<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="Vue-test-utils 是官方提供的内置在vue中的一个测试工具，它可以加载某个vue实例并可以提取，替换其中的方法，属性，事件等。 其实熟悉了Vue框架之后，再来看vue-test-util工具会很容易，因为二者之间的许多概念是相同的。 这篇博客基于vue-test-utils，vue的官方文档，对于部分官方文档中有歧义的地方进行了尝试，也参考了一些博客之后进行了解释。主要是用于概念的理解"><meta property="og:type" content="article"><meta property="og:title" content="Vue-test-utils"><meta property="og:url" content="https://sunra.top/2020/01/03/vue-test-utils/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="Vue-test-utils 是官方提供的内置在vue中的一个测试工具，它可以加载某个vue实例并可以提取，替换其中的方法，属性，事件等。 其实熟悉了Vue框架之后，再来看vue-test-util工具会很容易，因为二者之间的许多概念是相同的。 这篇博客基于vue-test-utils，vue的官方文档，对于部分官方文档中有歧义的地方进行了尝试，也参考了一些博客之后进行了解释。主要是用于概念的理解"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-01-03T12:31:51.000Z"><meta property="article:modified_time" content="2025-02-26T06:32:18.993Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="技术分享 使用教程 原理 前端 计算机图形学"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/2020/01/03/vue-test-utils/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://sunra.top/2020/01/03/vue-test-utils/","path":"2020/01/03/vue-test-utils/","title":"Vue-test-utils"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Vue-test-utils | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/js/third-party/analytics/google-analytics.js"></script><script src="/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">一起探索互联网的秘密</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#api"><span class="nav-number">1.</span> <span class="nav-text">API</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#mount"><span class="nav-number">1.1.</span> <span class="nav-text">Mount</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shallowmount"><span class="nav-number">1.2.</span> <span class="nav-text">ShallowMount</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#render"><span class="nav-number">1.3.</span> <span class="nav-text">render</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rendertostring"><span class="nav-number">1.4.</span> <span class="nav-text">renderToString</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#selector"><span class="nav-number">1.5.</span> <span class="nav-text">selector</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#createlocalvue"><span class="nav-number">1.6.</span> <span class="nav-text">createLocalVue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#createwrappernode-options"><span class="nav-number">1.7.</span> <span class="nav-text">createWrapper(node [, options])</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#wrapper"><span class="nav-number">2.</span> <span class="nav-text">Wrapper</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">一起探索互联网的秘密</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">328</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">分类</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://sunra.top/2020/01/03/vue-test-utils/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="一起探索互联网的秘密"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Vue-test-utils | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Vue-test-utils</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-01-03 20:31:51" itemprop="dateCreated datePublished" datetime="2020-01-03T20:31:51+08:00">2020-01-03</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-02-26 14:32:18" itemprop="dateModified" datetime="2025-02-26T14:32:18+08:00">2025-02-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Vue/" itemprop="url" rel="index"><span itemprop="name">Vue</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline：</span><a title="waline" href="/2020/01/03/vue-test-utils/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/2020/01/03/vue-test-utils/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Vue-test-utils 是官方提供的内置在vue中的一个测试工具，它可以加载某个vue实例并可以提取，替换其中的方法，属性，事件等。</p><p>其实熟悉了Vue框架之后，再来看vue-test-util工具会很容易，因为二者之间的许多概念是相同的。</p><p>这篇博客基于vue-test-utils，vue的官方文档，对于部分官方文档中有歧义的地方进行了尝试，也参考了一些博客之后进行了解释。主要是用于概念的理解以及基本的几个用法的解释。</p><span id="more"></span><h1 id="api"><a class="markdownIt-Anchor" href="#api"></a> API</h1><h2 id="mount"><a class="markdownIt-Anchor" href="#mount"></a> Mount</h2><ul><li><p>参数</p><ul><li>component: Component</li><li>options: Options</li></ul></li><li><p>返回值：Wrapper</p></li><li><p>options</p><ul><li><p>context：Object</p><p>将上下文传递给函数式组件，该选项只能用于<a href="%5Bhttps://cn.vuejs.org/v2/guide/render-function.html#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6%5D(https://cn.vuejs.org/v2/guide/render-function.html#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6)">函数式组件</a></p><p>示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Bar</span> <span class="keyword">from</span> <span class="string">&#x27;./Bar.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">mount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">context</span>: &#123;</span><br><span class="line">    <span class="attr">props</span>: &#123; <span class="attr">show</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    <span class="attr">children</span>: [<span class="title class_">Foo</span>, <span class="title class_">Bar</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="title function_">is</span>(<span class="title class_">Component</span>)).<span class="title function_">toBe</span>(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure></li><li><p>slots: Array<component>|Component|string</component></p><p>为组件提供一个 slot 内容的对象。该对象中的键名就是相应的 slot 名，键值可以是一个组件、一个组件数组、一个字符串模板或文本。</p><p>示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bazComponent = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;baz-component&#x27;</span>,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;p&gt;baz&lt;/p&gt;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">slots</span>: &#123;</span><br><span class="line">    <span class="attr">default</span>: [<span class="title class_">Foo</span>, <span class="string">&#x27;&lt;my-component /&gt;&#x27;</span>, <span class="string">&#x27;text&#x27;</span>],</span><br><span class="line">    <span class="attr">fooBar</span>: <span class="title class_">Foo</span>, <span class="comment">// 将会匹配 `&lt;slot name=&quot;FooBar&quot; /&gt;`.</span></span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&#x27;&lt;div /&gt;&#x27;</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">    <span class="attr">baz</span>: bazComponent,</span><br><span class="line">    <span class="attr">qux</span>: <span class="string">&#x27;&lt;my-component /&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="title function_">find</span>(<span class="string">&#x27;div&#x27;</span>)).<span class="title function_">toBe</span>(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>这里官方文档的描述太过简单，可能会产生歧义，如果大家对这段内容有疑惑，可以查看<a target="_blank" rel="external nofollow noopener noreferrer" href="https://alexjover.com/blog/test-vue-js-slots-in-jest/">这篇文章</a></p></li><li><p>scopedSlots</p><p>提供一个该组件所有<a href="%5Bhttps://cn.vuejs.org/v2/guide/components-slots.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD%5D(https://cn.vuejs.org/v2/guide/components-slots.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD)">作用域插槽</a>的对象。每个键对应到插槽的名字。</p><p>你可以使用 slot-scope 特性设置 prop 的名称：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">scopedSlots</span>: &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&#x27;&lt;p slot-scope=&quot;foo&quot;&gt;&#123;&#123;foo.index&#125;&#125;,&#123;&#123;foo.text&#125;&#125;&lt;/p&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>否则插槽被计算的时候可以通过 <code>props</code> 对象使用 prop：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">scopedSlots</span>: &#123;</span><br><span class="line">    <span class="attr">default</span>: <span class="string">&#x27;&lt;p&gt;&#123;&#123;props.index&#125;&#125;,&#123;&#123;props.text&#125;&#125;&lt;/p&gt;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>你也可以传递一个函数将 prop 作为参数带入：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">scopedSlots</span>: &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="keyword">function</span>(<span class="params">props</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.$createElement(<span class="string">&#x27;div&#x27;</span>, props.<span class="property">index</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>或者你可以使用 JSX。如果你在一个方法里撰写 JSX，babel-plugin-transform-vue-jsx 会自动注入 <code>this.$createElement</code>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">scopedSlots</span>: &#123;</span><br><span class="line">    <span class="title function_">foo</span>(<span class="params">props</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.text&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>stubs:<code>&#123; [name: string]: Component | boolean &#125; | Array</code></p><p>将子组件存根。可以是一个要存根的组件名的数组或对象。如果 <code>stubs</code> 是一个数组，则每个存根都是一个 <code>&lt;$&#123;component name&#125;-stub&gt;</code>。</p><p>示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">mount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">stubs</span>: [<span class="string">&#x27;registered-component&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">stubs</span>: &#123;</span><br><span class="line">    <span class="comment">// 使用一个特定的实现作为存根</span></span><br><span class="line">    <span class="string">&#x27;registered-component&#x27;</span>: <span class="title class_">Foo</span>,</span><br><span class="line">    <span class="comment">// 使用创建默认的实现作为存根。</span></span><br><span class="line">    <span class="comment">// 这里默认存根的组件名是 `another-component`。</span></span><br><span class="line">    <span class="comment">// 默认存根是 `&lt;$&#123;the component name of default stub&#125;-stub&gt;`。</span></span><br><span class="line">    <span class="string">&#x27;another-component&#x27;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>mocks: Object</p><p>为实例添加额外的属性。在伪造全局注入的时候有用。</p><p>示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> $route = &#123; <span class="attr">path</span>: <span class="string">&#x27;http://www.example-path.com&#x27;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">mocks</span>: &#123;</span><br><span class="line">    $route</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="property">vm</span>.<span class="property">$route</span>.<span class="property">path</span>).<span class="title function_">toBe</span>($route.<span class="property">path</span>)</span><br></pre></td></tr></table></figure></li><li><p>localVue: Vue</p><p>通过 [<code>./createLocalVue.md</code>] 创建的一个 <code>Vue</code> 的本地拷贝，用于挂载该组件的时候。在这份拷贝上安装插件可以防止原始的 <code>Vue</code> 被污染。</p><p>示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createLocalVue, mount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localVue = <span class="title function_">createLocalVue</span>()</span><br><span class="line">localVue.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [&#123; <span class="attr">path</span>: <span class="string">&#x27;/foo&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Foo</span> &#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">mount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  localVue,</span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="property">vm</span>.<span class="property">$route</span>).<span class="title function_">toBeInstanceOf</span>(<span class="title class_">Object</span>)</span><br></pre></td></tr></table></figure></li><li><p>attachToDocument: Boolean</p><p>当设为 <code>true</code> 时，组件在渲染时将会挂载到 DOM 上。</p><p>如果添加到了 DOM 上，你应该在测试的最后调用 <code>wrapper.destroy()</code> 将元素从文档中移除并销毁组件实例。</p></li><li><p>attrs: Object</p><p>设置组件实例的 <code>$attrs</code> 对象。</p></li><li><p>propsData</p><p>在组件被挂载时设置组件实例的 prop。</p><p>示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Component</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;msg&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">mount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">propsData</span>: &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;aBC&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="title function_">text</span>()).<span class="title function_">toBe</span>(<span class="string">&#x27;aBC&#x27;</span>)</span><br></pre></td></tr></table></figure><p>提示</p><p>值得注意的是 <code>propsData</code> 实际上是一个 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://cn.vuejs.org/v2/api/#propsData">Vue API</a>，不是 Vue Test Utils 的挂载选项。它会被 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://cn.vuejs.org/v2/api/#extends"><code>extends</code></a> 处理。请查阅<a target="_blank" rel="external nofollow noopener noreferrer" href="https://vue-test-utils.vuejs.org/zh/api/options.html#%E5%85%B6%E5%AE%83%E9%80%89%E9%A1%B9">其它选项</a>。</p></li><li><p>listeners： Object</p><p>设置组件实例的 <code>$listeners</code> 对象。</p></li><li><p>parentComponent: Object</p><p>用来作为被挂载组件的父级组件。</p><p>示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">parentComponent</span>: <span class="title class_">Foo</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="property">vm</span>.<span class="property">$parent</span>.<span class="property">$options</span>.<span class="property">name</span>).<span class="title function_">toBe</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>provide: Object</p><p>为组件传递用于注入的属性。可查阅 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://cn.vuejs.org/v2/api/#provide-inject">provie/inject</a> 了解更多。</p><p>示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Component</span> = &#123;</span><br><span class="line">  <span class="attr">inject</span>: [<span class="string">&#x27;foo&#x27;</span>],</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#123;&#123;this.foo()&#125;&#125;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Component</span>, &#123;</span><br><span class="line">  <span class="attr">provide</span>: &#123;</span><br><span class="line">    <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;fooValue&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="title function_">text</span>()).<span class="title function_">toBe</span>(<span class="string">&#x27;fooValue&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>其它选项</p><p>当 <code>mount</code> 和 <code>shallowMount</code> 的选项包含了挂载选项之外的选项时，则会将它们通过<a target="_blank" rel="external nofollow noopener noreferrer" href="https://vuejs.org/v2/api/#extends">扩展</a>覆写到其组件选项。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Component</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#123;&#123; foo() &#125;&#125;&#123;&#123; bar() &#125;&#125;&#123;&#123; baz() &#125;&#125;&lt;/div&gt;&#x27;</span>,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;a&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;b&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;B&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">baz</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;C&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">mount</span>(<span class="title class_">Component</span>, options)</span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="title function_">text</span>()).<span class="title function_">toBe</span>(<span class="string">&#x27;aBC&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="shallowmount"><a class="markdownIt-Anchor" href="#shallowmount"></a> ShallowMount</h2><p>用法与mount相同，只不过会将所有子组件给stub，类似mount的options中的stub属性把所有子组件填写后的效果</p><h2 id="render"><a class="markdownIt-Anchor" href="#render"></a> render</h2><p>将一个对象渲染成为一个字符串并返回一个 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cheeriojs/cheerio">cheerio 包裹器</a>。</p><p>Cheerio 是一个类似 jQuery 的库，可以在 Node.js 中游览 DOM 对象。它的 API 和 Vue Test Utils 的 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://vue-test-utils.vuejs.org/zh/api/wrapper/"><code>Wrapper</code></a> 类似。</p><p><code>render</code> 在底层使用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://ssr.vuejs.org/zh/basic.html"><code>vue-server-renderer</code></a> 将一个组件渲染为静态的 HTML。</p><p><code>render</code> 被包含在了 <code>@vue/server-test-utils</code> 包之中。</p><h2 id="rendertostring"><a class="markdownIt-Anchor" href="#rendertostring"></a> renderToString</h2><p>将一个组件渲染为 HTML。</p><p><code>renderToString</code> 在底层使用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://ssr.vuejs.org/en/basic.html"><code>vue-server-renderer</code></a> 将一个组件渲染为 HTML。</p><h2 id="selector"><a class="markdownIt-Anchor" href="#selector"></a> selector</h2><p>很多方法的参数中都包含选择器。一个选择器可以是一个 CSS 选择器、一个 Vue 组件或是一个查找选项对象</p><h2 id="createlocalvue"><a class="markdownIt-Anchor" href="#createlocalvue"></a> createLocalVue</h2><ul><li><strong>返回值：</strong><ul><li><code>&#123;Component&#125;</code></li></ul></li><li><strong>用法：</strong></li></ul><p><code>createLocalVue</code> 返回一个 Vue 的类供你添加组件、混入和安装插件而不会污染全局的 Vue 类。</p><p>可通过 <code>options.localVue</code> 来使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createLocalVue, shallowMount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localVue = <span class="title function_">createLocalVue</span>()</span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Foo</span>, &#123;</span><br><span class="line">  localVue,</span><br><span class="line">  <span class="attr">mocks</span>: &#123; <span class="attr">foo</span>: <span class="literal">true</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">expect</span>(wrapper.<span class="property">vm</span>.<span class="property">foo</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> freshWrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Foo</span>)</span><br><span class="line"><span class="title function_">expect</span>(freshWrapper.<span class="property">vm</span>.<span class="property">foo</span>).<span class="title function_">toBe</span>(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure><h2 id="createwrappernode-options"><a class="markdownIt-Anchor" href="#createwrappernode-options"></a> createWrapper(node [, options])</h2><ul><li><p><strong>参数：</strong></p><ul><li><p><code>&#123;vm|HTMLElement&#125; node</code></p></li><li><pre class="highlight"><code class>&#123;Object&#125; options
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    - `&#123;Boolean&#125; attachedToDocument`</span><br><span class="line"></span><br><span class="line">- **返回值：**</span><br><span class="line"></span><br><span class="line">  - `&#123;Wrapper&#125;`</span><br><span class="line"></span><br><span class="line">- **用法：**</span><br><span class="line"></span><br><span class="line">`createWrapper` 为一个被挂载的 Vue 实例或一个 HTML 元素创建一个 `Wrapper`。</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">import &#123; createWrapper &#125; from &#x27;@vue/test-utils&#x27;</span><br><span class="line">import Foo from &#x27;./Foo.vue&#x27;</span><br><span class="line"></span><br><span class="line">const Constructor = Vue.extend(Foo)</span><br><span class="line">const vm = new Constructor().$mount()</span><br><span class="line">const wrapper = createWrapper(vm)</span><br><span class="line">expect(wrapper.vm.foo).toBe(true)</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul><h1 id="wrapper"><a class="markdownIt-Anchor" href="#wrapper"></a> Wrapper</h1><p>上述的API都是为了创建一个vue实例的wrapper，那么创建完成之后，这个wrapper自身也是有很多接口的。</p><p>具体就在这里不重复了，大致的作用类似与options对wrapper的配置，wrapper的方法可以在wrapper实例产生之后去更改和获取某些属性，如setMethods可以改变vue中的methods，trigger可以触发某个组件上的指定事件。</p><p>这里我们就举个例子通过不同的方式来测试vue中的methods来说明它的用法：</p><ul><li><p>第一种就是官方文档的示例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sinon <span class="keyword">from</span> <span class="string">&#x27;sinon&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">mount</span>(<span class="title class_">Foo</span>)</span><br><span class="line"><span class="keyword">const</span> clickMethodStub = sinon.<span class="title function_">stub</span>()</span><br><span class="line"></span><br><span class="line">wrapper.<span class="title function_">setMethods</span>(&#123; <span class="attr">clickMethod</span>: clickMethodStub &#125;)</span><br><span class="line">wrapper.<span class="title function_">find</span>(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">trigger</span>(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line"><span class="title function_">expect</span>(clickMethodStub.<span class="property">called</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>这里要注意，不同版本的setMethods不太一样，有的版本它是一个同步方法，佐伊上述写法是对的，但是有的版本是异步方法，就需要等待它生效才可以，如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sinon <span class="keyword">from</span> <span class="string">&#x27;sinon&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">mount</span>(<span class="title class_">Foo</span>)</span><br><span class="line"><span class="keyword">const</span> clickMethodStub = sinon.<span class="title function_">stub</span>()</span><br><span class="line"></span><br><span class="line">wrapper.<span class="title function_">setMethods</span>(&#123; <span class="attr">clickMethod</span>: clickMethodStub &#125;)</span><br><span class="line"><span class="keyword">await</span> <span class="title class_">Vue</span>.<span class="title function_">nextTick</span>();</span><br><span class="line">wrapper.<span class="title function_">find</span>(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">trigger</span>(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line"><span class="title function_">expect</span>(clickMethodStub.<span class="property">called</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure></li><li><p>第二种方法是在创建wrapper时传入一个options，这里利用的是mount会将options中的其他选项通过extend扩展如wrapper中的特性，具体代码可以参考options中的其他选项部分的代码。</p></li></ul><p>上述两种方式都可以结合sinon去mock一个vue实例中的方法用于测试。</p><p>当然也有其他的方式可以传入一个方法进入wrapper中，如options中的context和provide等。</p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>本文作者：</strong> Ray Sun</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://sunra.top/2020/01/03/vue-test-utils/" title="Vue-test-utils">https://sunra.top/2020/01/03/vue-test-utils/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"> <span>欢迎关注我的其它发布渠道</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/2019/12/27/three_cache_issues/" rel="prev" title="缓存系统的三个问题"><i class="fa fa-chevron-left"></i> 缓存系统的三个问题</a></div><div class="post-nav-item"> <a href="/2020/01/12/webpack-code-splitting/" rel="next" title="Webpack Code Splitting">Webpack Code Splitting<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/2020/01/03/vue-test-utils/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>