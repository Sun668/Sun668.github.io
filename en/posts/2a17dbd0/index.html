<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="Currently, we have introduced the following steps in graphics:  The first three figures show the MVP matrix converting the coordinates of each point on the model into screen space The last figure show"><meta property="og:type" content="article"><meta property="og:title" content="GAMES101 Series Summary (3) - Shading"><meta property="og:url" content="https://sunra.top/en/posts/2a17dbd0/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="Currently, we have introduced the following steps in graphics:  The first three figures show the MVP matrix converting the coordinates of each point on the model into screen space The last figure show"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429090607759_gjxtzl.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429092234337_zghzrc.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429094006170_c4opr6.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429100008919_jk7hhj.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429100210149_jdpkeg.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429100510404_gtijoi.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429100559466_yk2ant.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429101306068_rf2yhu.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429101546302_f7vf37.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429101713604_fcqanp.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429101806591_e78urx.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429101857385_lhxc4z.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429205929337_jydyux.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429211623474_hyy8b7.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429213845443_g9t3vm.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775824/origin-of-ray/image-20230429213935339_vk3tjp.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775824/origin-of-ray/image-20230429214112589_zu5vnw.png"><meta property="article:published_time" content="2023-04-29T13:48:26.000Z"><meta property="article:modified_time" content="2024-02-07T08:38:34.450Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429090607759_gjxtzl.png"><link rel="canonical" href="https://sunra.top/en/posts/2a17dbd0/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/2a17dbd0/","path":"posts/2a17dbd0/","title":"GAMES101 Series Summary (3) - Shading"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>GAMES101 Series Summary (3) - Shading | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#There-are-several-different-kinds-of-light-at-one-point"><span class="nav-number">1.</span> <span class="nav-text">There are several different kinds of light at one point</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-calculate-the-lighting-effect-on-a-point"><span class="nav-number">2.</span> <span class="nav-text">How to calculate the lighting effect on a point</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Diffuse-illumination"><span class="nav-number">2.1.</span> <span class="nav-text">Diffuse illumination</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Highlight-reflection"><span class="nav-number">2.2.</span> <span class="nav-text">Highlight reflection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ambient-light"><span class="nav-number">2.3.</span> <span class="nav-text">Ambient light</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-superimpose-different-light-effects-on-one-point"><span class="nav-number">3.</span> <span class="nav-text">How to superimpose different light effects on one point</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-get-the-lighting-effect-of-a-triangular-surface-based-on-three-points"><span class="nav-number">4.</span> <span class="nav-text">How to get the lighting effect of a triangular surface based on three points</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Texture"><span class="nav-number">5.</span> <span class="nav-text">Texture</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/2a17dbd0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="GAMES101 Series Summary (3) - Shading | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> GAMES101 Series Summary (3) - Shading</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2023-04-29 21:48:26" itemprop="dateCreated datePublished" datetime="2023-04-29T21:48:26+08:00">2023-04-29</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-02-07 16:38:34" itemprop="dateModified" datetime="2024-02-07T16:38:34+08:00">2024-02-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/2a17dbd0/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/2a17dbd0/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Currently, we have introduced the following steps in graphics:</p><ul><li>The first three figures show the MVP matrix converting the coordinates of each point on the model into screen space</li><li>The last figure shows the process of grating the triangular panels that connect the points in the converted screen space, that is, to determine which pixels each triangular panel will affect</li></ul><span id="more"></span><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429090607759_gjxtzl.png" alt="image-20230429090607759"></p><p>But so far, we’ve only got the coordinates of each point in screen space and which pixels it affects, but what the specific impact is, we haven’t got it yet.</p><p>The next process we talk about shading is how to calculate the impact of these points on pixels.</p><p>The English translation of shading is: The darkening or coloring of an illustration or diagram with parallel lines or a block of color, which is what we usually call shadow</p><p>But in Computer Graphics, it refers to the process of calculating the effect of these points on pixels, that is, the color of these points.</p><p>Here we think about a question, how do we see objects in everyday life: the optical part of physics We all know this problem, <strong>the reason why we can see an object is because the light reflected by the object enters our eyes</strong> , the color and angle of the reflected light will affect our observation of the object</p><p>So we also use this theory in graphics, and our shading process is to calculate the angle and color of the reflected light at each point.</p><p>So how can we use this theory to calculate the process of physical illumination?</p><p>First, we need to model the illumination model, that is, what the result of the illumination of an object is composed of.</p><p>This modeling is also divided into several parts:</p><ul><li>A point can be affected by several different lights</li><li>What kind of calculation method does each different illumination follow, such as the color, angle, intensity, etc. of each illumination?</li><li>How different lighting effects stack up at a certain point</li><li>We get the lighting effect of different points, how to calculate the effect of each pixel in the triangle, is the color of each pixel in the direct triangle is just three points, simply average or what?</li><li>Finally, what is the input for each point calculation? Such as the color of each point, what is the normal vector, etc</li></ul><p>Here we use a relatively simple Bollinger-von model to introduce, other models may be more complex than this, but only the specific algorithm may be different, but the steps are still these steps</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429092234337_zghzrc.png" alt="image-20230429092234337"></p><h2 id="There-are-several-different-kinds-of-light-at-one-point"><a href="#There-are-several-different-kinds-of-light-at-one-point" class="headerlink" title="There are several different kinds of light at one point"></a>There are several different kinds of light at one point</h2><p>In this model, we divide the reflected light of an object into three parts:</p><ul><li>Specular highlight: reflected light with a relatively fixed exit angle<br>Diffuse reflection: Light reflected in all directions</li><li>Ambient lighting: that is, assuming there is no light source in the environment, nor is it black, there is always a little light</li></ul><blockquote><p>Note that if you have used Unity in the past, you may be exposed to several concepts, such as direct light and indirect light. This concept has nothing to do with specular reflection and diffuse reflection here. At the same time, there is also a concept in Unity called self-luminous, which is not the same as ambient light.</p></blockquote><h2 id="How-to-calculate-the-lighting-effect-on-a-point"><a href="#How-to-calculate-the-lighting-effect-on-a-point" class="headerlink" title="How to calculate the lighting effect on a point"></a>How to calculate the lighting effect on a point</h2><p>So how do we calculate the lighting effect at a point on the model?</p><p>The first is what inputs we have when calculating the lighting effect of a point:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429094006170_c4opr6.png" alt="image-20230429094006170"></p><p> <strong>Note that the v vector above is not the direction of the outgoing light, but the direction of the line between the reflection point and the camera</strong></p><p>So with these inputs, how do we calculate the lighting effect of a certain light at this point?</p><h3 id="Diffuse-illumination"><a href="#Diffuse-illumination" class="headerlink" title="Diffuse illumination"></a>Diffuse illumination</h3><p>The so-called diffuse reflection is the light reflected at all angles, and the reflection angle we get</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429100008919_jk7hhj.png" alt="image-20230429100008919"></p><p>So what about the intensity of the reflected light? That is, how is the light and shade of this point determined?</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429100210149_jdpkeg.png" alt="image-20230429100210149"></p><p>The model we take assumes that the illumination is a collection of light of uniform density. When your plane is not perpendicular to the light, there will be a part of the light that is not reflected. We pass the direction between the normal direction and the direction of the incident ray. The angle cosine calculates how much intensity the reflected light loses at the reflection point.</p><p>Another problem is that as the distance increases, the energy of the light will gradually decay. We also simply use the following model to calculate the energy decay during the propagation process</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775821/origin-of-ray/image-20230429100510404_gtijoi.png" alt="image-20230429100510404"></p><p>Adding this dot color value, we get this dot lighting effect (we will talk about how this color comes from later)</p><p> <strong>The $K_d $in the formula below is the diffuse reflection coefficient, which can be more than the color of this point</strong></p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429100559466_yk2ant.png" alt="image-20230429100559466"></p><blockquote><p>Note that the real physical lighting model is much more complicated than this, but simulating the real physical lighting is theoretically impossible. There is a model that can perfectly restore the physical world, and secondly, even if it is possible, the amount of calculation is too large.</p></blockquote><h3 id="Highlight-reflection"><a href="#Highlight-reflection" class="headerlink" title="Highlight reflection"></a>Highlight reflection</h3><p>For specular reflection, the direction of the incident ray and the direction of the outgoing light are symmetrical about the normal, while the direction of the outgoing light and the observation direction are about close, and the fresh fruit of the high light reflection is more obvious</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429101306068_rf2yhu.png" alt="image-20230429101306068"></p><p>That is to say, R and V are about close, and the highlight is more obvious</p><p>However, the Blinn-Phong model uses something called a half-pass vector to calculate the proximity of R and V, as shown in the following figure:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429101546302_f7vf37.png" alt="image-20230429101546302"></p><p>The $K_s $in this formula is the highlight coefficient, which can be the color of this point</p><p>We notice that in this formula, there is a p, and this p will eventually affect the range of highlights:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429101713604_fcqanp.png" alt="image-20230429101713604"></p><h3 id="Ambient-light"><a href="#Ambient-light" class="headerlink" title="Ambient light"></a>Ambient light</h3><p>Ambient light We simply assume that each point has a fixed light, and similarly, the ambient light coefficient can be just the color of this point</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775822/origin-of-ray/image-20230429101806591_e78urx.png" alt="image-20230429101806591"></p><h2 id="How-to-superimpose-different-light-effects-on-one-point"><a href="#How-to-superimpose-different-light-effects-on-one-point" class="headerlink" title="How to superimpose different light effects on one point"></a>How to superimpose different light effects on one point</h2><p>For the Blinn-Phong model, it’s very simple, just add</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429101857385_lhxc4z.png" alt="image-20230429101857385"></p><h2 id="How-to-get-the-lighting-effect-of-a-triangular-surface-based-on-three-points"><a href="#How-to-get-the-lighting-effect-of-a-triangular-surface-based-on-three-points" class="headerlink" title="How to get the lighting effect of a triangular surface based on three points"></a>How to get the lighting effect of a triangular surface based on three points</h2><p>We also have several different ways to calculate the effect of different pixels on a surface:</p><ul><li> <strong>Flat</strong> Shading: The first is simpler, the normal vector of all points on this surface is the same, which can be directly calculated from the coordinates of three points</li><li> <strong>Gouraud</strong> shading: interpolate using the colors of three points, each with its own normal vector</li><li> <strong>Phong</strong> Shading: It is also interpolated, but Phong shading calculates the color value at each pixel, not at the vertex</li></ul><blockquote><p>Gouraud</p><p>1.<br>2.<br>3.</p><p>Through this interpolation process, we can obtain a smooth color gradient effect, making the color change of the triangle surface more natural.</p><p>Gouraud</p><p>Phong</p></blockquote><p>The picture below shows the effect in three different ways as the number of faces increases.</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429205929337_jydyux.png" alt="image-20230429205929337"></p><blockquote><p>There are also different ways to get the normal vector of each point. For example, for a sphere, the normal direction is the direction of the connection between the center of the sphere and a point on the surface of the sphere. For ordinary geometry, we can calculate on several different surfaces of a point, calculate the normal vector of each surface separately, and then average it. There are many ways, just choose the right one.</p></blockquote><h2 id="Texture"><a href="#Texture" class="headerlink" title="Texture"></a>Texture</h2><p>So far we have talked about MVP matrices, triangulation, grating, lighting calculations, etc. We still need the last link, that is, we have talked about the calculation process before, and we have not talked about the input source of this process.</p><p>But before we get to that, let’s string together our previous knowledge and look at when we get and use these inputs.</p><p>The content that connects these knowledge is called rendering pipeline. In fact, I have talked about it in my previous blog, so I will not go into detail here. You can read my previous blog<a href="https://sunra.top/posts/63218/">Unity渲染流水线（一）从模型上的点到屏幕上的点</a>：</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429211623474_hyy8b7.png" alt="image-20230429211623474"></p><p>In this rendering pipeline, we can customize the programming, the first step and the fourth step, respectively, corresponding to the vertex shader and the slice shader. Like triangulation and rasterization, although we spent some time to understand its principle, what problems will be encountered, how to optimize, but in fact this process is Hardcode in the GPU.</p><p>In this calculation process, the final point will become a different color, which is determined by the input. We can set our own properties for each point, including the color of the point, the normal direction, etc., and the input method is Through Texture, that is, stickers can not only be used to control the color of each point, but also the properties of any point.</p><p>The specific application method is that each point of the model can have several sets of UV coordinates in addition to its own position coordinates. This is a two-dimensional coordinate, indicating the property corresponding to the coordinates of a certain property of this point on the map. For example, the UV coordinates of the color of a point are (0.5, 0.5), so the color of this point is the color of the corresponding point on the map (0.5, 0.5).</p><p>But now the problem is that we can only set properties for a certain point. For a triangular patch, how do we calculate the property value of one of the points? Let’s illustrate it with Gouraud Shading, which involves something called barycentric coordinates.</p><p>The so-called barycentric coordinate is a set of coordinates inside the triangle. For a certain triangle, any point inside it can be represented by this coordinate system</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775823/origin-of-ray/image-20230429213845443_g9t3vm.png" alt="image-20230429213845443"></p><p>So what is the use of this coordinate system? As follows:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775824/origin-of-ray/image-20230429213935339_vk3tjp.png" alt="image-20230429213935339"></p><p>It can represent the area ratio of the three triangles divided into the interior, so that we can use barycentric coordinates to calculate the influence of the three vertices on the current point in the interpolation process of any point:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1682775824/origin-of-ray/image-20230429214112589_zu5vnw.png" alt="image-20230429214112589"></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/2a17dbd0/" title="GAMES101 Series Summary (3) - Shading">https://sunra.top/en/posts/2a17dbd0/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/b6890d35/" rel="prev" title="GAMES101 Series Summary (2) - grating"><i class="fa fa-chevron-left"></i> GAMES101 Series Summary (2) - grating</a></div><div class="post-nav-item"> <a href="/en/posts/dbb538fc/" rel="next" title="Management Methodology of Technical Personnel (2) - Role Cognition">Management Methodology of Technical Personnel (2) - Role Cognition<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/2a17dbd0/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>