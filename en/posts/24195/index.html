<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.17.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="This time, we must deal with what a universal lock is. This article will slowly unfold in the following order:  Through a simple practical example to tell you, the performance of the universal lock in"><meta property="og:type" content="article"><meta property="og:title" content="Performance and Principle of Universal Lock"><meta property="og:url" content="https://sunra.top/en/posts/24195/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="This time, we must deal with what a universal lock is. This article will slowly unfold in the following order:  Through a simple practical example to tell you, the performance of the universal lock in"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1662679829/origin-of-ray/400px-Eulerangles.svg_ylhxly.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1662682019/origin-of-ray/200px-Euler2a_wnywfm.gif"><meta property="og:image" content="https://i.loli.net/2021/07/21/w1UdLtmlVe6Wrzb.png"><meta property="og:image" content="https://i.loli.net/2021/07/21/s9PDTQXd25x3cpA.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1662779292/origin-of-ray/v2-1b11f12de3b8309a49e7ea32a990d266_1440w_oublus.png"><meta property="article:published_time" content="2022-09-05T13:20:57.000Z"><meta property="article:modified_time" content="2023-07-06T08:25:48.549Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1662679829/origin-of-ray/400px-Eulerangles.svg_ylhxly.png"><link rel="canonical" href="https://sunra.top/en/posts/24195/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/24195/","path":"posts/24195/","title":"Performance and Principle of Universal Lock"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Performance and Principle of Universal Lock | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#A-small-experiment-with-a-universal-lock"><span class="nav-number">1.</span> <span class="nav-text">A small experiment with a universal lock</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Universal-lock"><span class="nav-number">2.</span> <span class="nav-text">Universal lock</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-Euler%E2%80%99s-Angle"><span class="nav-number">2.1.</span> <span class="nav-text">What is Euler’s Angle?</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Static-euler-angle"><span class="nav-number">2.1.1.</span> <span class="nav-text">Static euler angle</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dynamic-Euler-angle"><span class="nav-number">2.1.2.</span> <span class="nav-text">Dynamic Euler angle</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-a-universal-lock"><span class="nav-number">2.2.</span> <span class="nav-text">What is a universal lock?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-principle-of-universal-lock"><span class="nav-number">3.</span> <span class="nav-text">The principle of universal lock</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Geometrically-speaking"><span class="nav-number">3.1.</span> <span class="nav-text">Geometrically speaking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#From-a-matrix-perspective"><span class="nav-number">3.2.</span> <span class="nav-text">From a matrix perspective</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What%E2%80%99s-wrong-with-the-universal-lock"><span class="nav-number">4.</span> <span class="nav-text">What’s wrong with the universal lock?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-Quaternions-Solve-the-Gimbal-Lock-Problem"><span class="nav-number">5.</span> <span class="nav-text">How Quaternions Solve the Gimbal Lock Problem</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Another-way-to-represent-rotation"><span class="nav-number">5.1.</span> <span class="nav-text">Another way to represent rotation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#So-what-is-a-quaternion"><span class="nav-number">5.2.</span> <span class="nav-text">So what is a quaternion?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-introduce-quaternions"><span class="nav-number">5.3.</span> <span class="nav-text">Why introduce quaternions</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/24195/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Performance and Principle of Universal Lock | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Performance and Principle of Universal Lock</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-09-05 21:20:57" itemprop="dateCreated datePublished" datetime="2022-09-05T21:20:57+08:00">2022-09-05</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2023-07-06 16:25:48" itemprop="dateModified" datetime="2023-07-06T16:25:48+08:00">2023-07-06</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/24195/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/24195/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>This time, we must deal with what a universal lock is. This article will slowly unfold in the following order:</p><ul><li>Through a simple practical example to tell you, the performance of the universal lock in our lives</li><li>What’s a universal lock?</li><li>Talk about the principle of the existence of universal locks from the perspective of matrices and geometry respectively</li><li>What’s wrong with the universal lock?</li><li>Why quaternions can solve the gimbal lock problem</li></ul><span id="more"></span><h2 id="A-small-experiment-with-a-universal-lock"><a href="#A-small-experiment-with-a-universal-lock" class="headerlink" title="A small experiment with a universal lock"></a>A small experiment with a universal lock</h2><p>You can take out the phone and put it on the desktop, the screen is facing up, the longest side of the phone is perpendicular to the edge of the table is set to the X axis, and the short side of the screen is parallel to the edge of the table is set to the Y axis, so the vector between the vertical and the screen is the Z axis.</p><p>We first rotate 30 degrees clockwise around the X axis of the longest side of the mobile phone. At this time, the mobile phone leaves the desktop, leaving a long side in contact with the table; then rotate 90 degrees around the Y axis, that is, the short side of the mobile phone, so that the screen surface is connected with the table. Parallel to the edge;</p><p>Rotate 10 degrees around the Z axis, that is, rotate 10 degrees around the axis perpendicular to the screen. At this time, you will find that when you rotate around the Z axis, the screen surface is still parallel to the edge of the table, and the angle of rotation around the Z axis at this time gives The effect of the phone’s posture is the same as the initial rotation of the X axis on the phone’s posture - both make the final posture of the phone (which has been rotated 90 degrees around the Y axis so that the phone screen is parallel to the edge of the table) rotate a certain angle around an axis perpendicular to the screen.</p><p>In other words, you can not rotate around the Z axis, by adjusting the number of angles around the X axis, so that the final attitude of the phone and the rotation process to achieve the same attitude.</p><p>In other words, once the Y axis is rotated 90 degrees, your phone plane must be in a plane perpendicular to the desktop, no matter how you start with the X axis and end with the Z axis</p><h2 id="Universal-lock"><a href="#Universal-lock" class="headerlink" title="Universal lock"></a>Universal lock</h2><h3 id="What-is-Euler’s-Angle"><a href="#What-is-Euler’s-Angle" class="headerlink" title="What is Euler’s Angle?"></a>What is Euler’s Angle?</h3><p>Let’s briefly talk about Euler’s angle before explaining the universal lock.</p><p>We have actually been exposed to this concept, but it may not be that deep, so let’s explain it here:</p><p>Leonhard Euler used Euler angles to describe the orientation of a rigid body in three-dimensional Euclidean space. For any reference frame, the orientation of a rigid body is set by rotating three Euler angles from the reference frame in order. Therefore, the orientation of a rigid body can be determined by three basic rotation matrices. In other words, any rotation matrix about the rotation of a rigid body is composed of three basic rotation matrices.</p><p>It is divided into static Euler angles and dynamic Euler angles</p><p>Static: that is, the rotation around the three axes of the world coordinate system, because the coordinate axis remains static during the rotation of the object, it is called static.</p><p>2, dynamic: that is, the rotation around the three axes of the object coordinate system, because the coordinate axis of the object rotates with the object to do the same rotation, so called dynamic.</p><h4 id="Static-euler-angle"><a href="#Static-euler-angle" class="headerlink" title="Static euler angle"></a>Static euler angle</h4><p>For a reference system in three-dimensional space, the orientation of any coordinate system can be represented by three Euler angles. The reference system (fixed system), also known as the laboratory reference system, is stationary. The coordinate system (solid connection) is fixed to the rigid body and rotates as the rigid body rotates.</p><p>See the figure on the right. Set the xyz-axis as the reference axis of the reference system. The intersection of the xy-plane and the XY-plane is called the intersection line, represented by the English letter (N). The Euler angle of zxz cis can be statically defined as follows:</p><ul><li>$\ alpha $ (precession angle) is the angle between the x-axis and the intersection line,</li><li>$\ beta $ (nutation angle) is the angle between the z-axis and the Z-axis,</li><li>$\ gamma $ (spin angle) is the angle between the intersection line and the X-axis.</li></ul><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1662679829/origin-of-ray/400px-Eulerangles.svg_ylhxly.png" alt></p><p>There is no convention for the order and marking of the included angles, the designation of the two axes of the included angles. Scientists have never reached a consensus on this. Whenever Euler angles are used, we must clearly indicate the order of the included angles and specify their reference axes.</p><p>Range of angular values</p><p>The $\ alpha $and $\ gamma $values range from 0 to 2 dollars\ pi $radians, respectively.<br>$\ Beta $values are radians from 0 to $\ pi $.<br>The set of Euler angles is unique for each orientation; with some exceptions:</p><p>If the $\ alpha $of two Euler angles, one is 0 and the other is 2 dollars\ pi $, and $\ beta $and $\ gamma $are equal, then both Euler angles describe the same orientation.<br>If $\ gamma $of two Euler angles, one is 0 and the other is 2 dollars\ pi $, and $\ alpha $and $\ beta $are equal, then both Euler angles describe the same orientation.</p><p>As mentioned earlier, the rotation matrix {\ displaystyle [\ mathbf {R}]} [\ mathbf {R}] with the rigid body orientation is composed of three basic rotation matrices:</p><script type="math/tex;mode=display">
[R] = \begin{bmatrix}
cos\gamma & sin\gamma & 0 \\
-sin\gamma & cos\gamma & 0 \\
0 & 0 & 1
\end{bmatrix}
\begin{bmatrix}
1 & 0 & 0 \\
0 & cos\beta & sin\beta \\
0 & -sin\beta & cos\beta
\end{bmatrix}
\begin{bmatrix}
cos\alpha & sin\alpha & 0 \\
-sin\alpha & cos\alpha & 0 \\
0 & 0 & 1
\end{bmatrix}</script><p>The result after the calculation is</p><script type="math/tex;mode=display">
[R] = \begin{bmatrix}
cos\alpha cos\gamma - cos\beta sin\alpha sin\gamma & sin\alpha cos\gamma + cos\beta cos\alpha sin\gamma & sin\beta sin\gamma \\
-cos\alpha sin\gamma - cos\beta sin\alpha cos\gamma & -sin\alpha sin\gamma + cos\beta cos\alpha cos\gamma & sin\beta cos\gamma \\
sin\beta sin\alpha & -sin\beta cos\alpha & cos\beta
\end{bmatrix}</script><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1662682019/origin-of-ray/200px-Euler2a_wnywfm.gif" alt></p><p>In classical mechanics, the Euler angle is often set by the zxz conformism; according to the axis name of the second axis of rotation, it is abbreviated as the x-conformism. In addition, there are other types of Euler angle groups. In a legal Euler angle group, the only restriction is that any two consecutive rotations must rotate around different axes of rotation. Therefore, there are a total of 12 conformities. For example, y-conformism, where the second axis of rotation is the y-axis, is commonly used in quantum mechanics, nuclear physics, and particle physics. In addition, there is a compliance, xyz conformism, used in aerospace engineering; see Tate-Bryan angle</p><h4 id="Dynamic-Euler-angle"><a href="#Dynamic-Euler-angle" class="headerlink" title="Dynamic Euler angle"></a>Dynamic Euler angle</h4><p>We can also give two different dynamic definitions of the Euler angle. One is a composite of three rotations around a coordinate axis fixed to a rigid body; the other is a composite of three rotations around a laboratory reference axis. With a dynamic definition, we can better understand the physical meaning and application of the Euler angle. Note in particular that, in the following description, the XYZ coordinate axis is the rotating rigid body coordinate axis; while the xyz coordinate axis is the stationary laboratory reference axis.</p><ul><li><p>Rotation around the XYZ axis: Initially, the axes of both coordinate systems xyz and XYZ overlap. Start by rotating $\ alpha $, the angular value, around the Z-axis. Then, rotate $\ beta $, the angular value, around the X-axis. Finally, rotate $\ gamma $, the angular value around the Z-axis.</p></li><li><p>Rotation around the xyz axis: Initially, the axes of both coordinate systems xyz and XYZ overlap. Start by rotating $\ gamma $, the angular value, around the z-axis. Then, rotate $\ beta $, the angular value, around the x-axis. Finally, rotate $\ alpha $, the angular value around the z-axis.</p></li></ul><h3 id="What-is-a-universal-lock"><a href="#What-is-a-universal-lock" class="headerlink" title="What is a universal lock?"></a>What is a universal lock?</h3><p>We learned that Euler angles are divided into static Euler angles and dynamic Euler angles, and we continue to see what a universal lock is.</p><p>First of all, let’s intuitively understand that the universal lock will only produce dynamic Euler angles, that is, we are rotating around the object’s own coordinate system, and the object’s own coordinate system will rotate with the object’s rotation</p><p>Through the above small experiment, we can roughly understand that the reason why the universal lock is called a lock is because the rotation effect of two dimensions overlaps, that is, the effect of rotating the X axis and can be achieved by rotating the Z axis, that is, a dimension is lost.</p><p>But from another point of view, this “lock” does not mean that there are any angles that cannot be expressed in the Euler angle, but that if your nutation angle is 90 degrees, your final result must be in a certain plane.</p><h2 id="The-principle-of-universal-lock"><a href="#The-principle-of-universal-lock" class="headerlink" title="The principle of universal lock"></a>The principle of universal lock</h2><h3 id="Geometrically-speaking"><a href="#Geometrically-speaking" class="headerlink" title="Geometrically speaking"></a>Geometrically speaking</h3><p>Let’s first take a look at the following graph. The coordinate system of this graph is both the object’s own coordinate axis, which is exactly the same as the world coordinate axis</p><p><img src="https://i.loli.net/2021/07/21/w1UdLtmlVe6Wrzb.png" alt></p><p>Let’s first rotate an angle around the x-axis, no problem</p><p>Then we rotate 90 degrees around the y-axis</p><p><img src="https://i.loli.net/2021/07/21/s9PDTQXd25x3cpA.png" alt></p><p>At this time, you can see that the z-axis has changed to the direction of the original x-axis. At this time, we rotate around the z-axis of the object itself. From the perspective of world coordinates, it is about the x-axis of the initial state, that is to say, from the perspective of the world coordinate system. From the point of view, it seems that the x-axis of the object itself at the beginning and the z-axis of the object itself at the end are the same, both of which revolve around the x-axis of the world coordinate system</p><h3 id="From-a-matrix-perspective"><a href="#From-a-matrix-perspective" class="headerlink" title="From a matrix perspective"></a>From a matrix perspective</h3><p>The above process is written in the form of matrix multiplication</p><script type="math/tex;mode=display">
R_z(\beta)R_y(\pi / 2)R_x(\alpha) \\
=\begin{bmatrix}
cos\beta & -sin\beta & 0 \\
sin\beta & cos\beta & 0 \\
0 & 0 & 1
\end{bmatrix}
\begin{bmatrix}
0 & 0 & 1 \\
0 & 1 & 0 \\
-1 & 0 & 0
\end{bmatrix}
\begin{bmatrix}
1 & 0 & 0 \\
0 & cos\alpha & -sin\alpha \\
0 & sin\alpha & cos\alpha
\end{bmatrix} \\
= \begin{bmatrix}
0 & sin(\alpha - \beta) & cos(\alpha - \beta) \\
0 & con(\alpha - \beta) & -sin(\alpha - \beta) \\
-1 & 0 & 0
\end{bmatrix} \\
= \begin{bmatrix}
0 & 0 & 1 \\
0 & 1 & 0 \\
-1 & 0 & 0
\end{bmatrix}
\begin{bmatrix}
1 & 0 & 0 \\
0 & cos(\alpha - \beta) & -sin(\alpha - \beta) \\
0 & sin(\alpha - \beta) & cos(\alpha - \beta)
\end{bmatrix} \\
= R_y(\pi /2)R_x(\alpha - \beta)</script><h2 id="What’s-wrong-with-the-universal-lock"><a href="#What’s-wrong-with-the-universal-lock" class="headerlink" title="What’s wrong with the universal lock?"></a>What’s wrong with the universal lock?</h2><p>So the universal lock is not unable to represent a certain angular displacement in space, but because of the universal lock, the interpolation between angular displacements becomes unsatisfactory, so how does the universal lock appear? When the second rotation angle is 90 degrees, use the first axis to coincide with the third axis. This is to understand this phenomenon from a perceptual point of view. If it is explained from a mathematical point of view, it is cos90 = 0</p><p>In the game, when the animation of the character rotation is triggered, the character will make a series of continuous rotation transformations, each transformation must be represented by a set of Euler angles, but it is impossible to store the Euler angles of each orientation. So the animator defines a series of key frames, specifying the position of the character at the key frame (described by a set of Euler angles), and then the computer interpolates these sets of Euler angles according to time t to obtain a series of Euler angles.</p><p>If the pitch is not ± 90 °, there will be no gimbal lock phenomenon, and a series of Euler angles after interpolation can completely characterize the desired character rotation path.</p><p>If the pitch of a key frame, that is, the rotation around the second axis, is 90 °, you will encounter a universal lock. At this time, the phone can only rotate in a horizontal plane. If the animator specifies that the orientation of the next key frame phone is not standing up, there is no problem, but what happens if the orientation of the next key frame specified is standing up?</p><h2 id="How-Quaternions-Solve-the-Gimbal-Lock-Problem"><a href="#How-Quaternions-Solve-the-Gimbal-Lock-Problem" class="headerlink" title="How Quaternions Solve the Gimbal Lock Problem"></a>How Quaternions Solve the Gimbal Lock Problem</h2><h3 id="Another-way-to-represent-rotation"><a href="#Another-way-to-represent-rotation" class="headerlink" title="Another way to represent rotation"></a>Another way to represent rotation</h3><p>To solve this problem, we must first ask about the preconditions for the existence of the universal lock problem</p><p>As we know earlier, the universal lock only exists in the dynamic Euler angle, that is, the object rotates around its own coordinate system, and its own coordinate system rotates with its own rotation. If it rotates 90 degrees on the Y axis, the X axis and Z axis The rotation effect of the axis is the same.</p><p>Think about it from another angle, in fact, under the Euler angle, the same effect has many different rotation methods, resulting in uncertain interpolation results.</p><p>To solve this problem, in fact, the idea is relatively clear, that is, change the representation method, in this new representation method, the representation method of a rotation result is unique.</p><p>We give another way to express the direction: Axis-Angle-Representation. Unlike Euler angles, this time we don’t take multiple rotations to find the target direction, but instead find an axis of rotation, and we can get the target direction by rotating around this axis only once. Will this not cause problems? Yes, the proof method is very simple. First, take the origin of the target matrix as one angle and the three axes as three sides to establish a cube. The diagonal line passing through the origin in this cube is the rotation axis we are looking for. Obviously, this rotation axis is unique, and We know that rotating around a rotation axis at different angles corresponds to different directions (angle range (−π,π]）， It can be seen that the axis angle representation of any position in space is unique.</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1662779292/origin-of-ray/v2-1b11f12de3b8309a49e7ea32a990d266_1440w_oublus.png" alt></p><p>Generally speaking, when the axis angle represents the direction, there will be 4 parameters, 3 of which are used to represent the rotation axis and 1 is used to represent the rotation angle size. And if we specify the vector representing the rotation axis as the unit vector e, considering that $\ sqrt {x ^ 2 + y ^ 2 + z ^ 2} = 1 $, we can represent the rotation axis with two parameters, which only requires three parameters in total, as many as the Euler angle. The rotation vector can be represented by $\ bm {\ theta} =\ theta e $, where e is the unit vector. Incidentally, the rotation axis here is called the Euler axis, and the rotation vector here is called the Euler vector.</p><p>It is also possible to consider the existence of this thing from the perspective of a matrix. There is a concept of a similar matrix and an eigenvector in the matrix. You can understand that this rotation axis is the eigenvector of the Euler angle rotation matrix, and the rotation angle of this rotation axis is the eigenvector. eigenvalue.</p><h3 id="So-what-is-a-quaternion"><a href="#So-what-is-a-quaternion" class="headerlink" title="So what is a quaternion?"></a>So what is a quaternion?</h3><p>A quaternion is a complex number, and more specifically a quaternion is a complex number with three imaginary parts. q = w + ix + jy + kz, where i, j, k are imaginary units, such that i ^ 2 = j ^ 2 = k ^ 2 = -1, and i (j) j = k, j (i) i = k.</p><script type="math/tex;mode=display">
q_1 + q_2 = (w_1 + w_2) + i(x_1 + x_2) + j(y_1 + y_2) + k(z_1 +z_2) = [(w_1 + 2_2), (v_1 +v_2)] \\
q_1 \cdot q_2 = (w_1w_2 -x_1x_2 - y_1y_2 - z_1z_2) + \\
i(w_1x_2 + x_1w_2 + y_1z_2 - z1y_2) + \\
j(w_1y_2 - x_1z_2 + y_1w_2 + z_1x_2) + \\
k(w_1z_2 + x_1y_2 -y_zx_2 + z_1w_2)</script><p>When using quaternions to compute axis angle representations, we usually write them in vector representation, $q =\ begin {bmatrix}<br>W,\ vec v\ end {bmatrix} =\ begin {bmatrix} w,\ begin {pmatrix} x\ y\ z\ end {pmatrix}\ end {bmatrix} $, for clarity of expression and convenience of calculation, we position the value of w, x, y, z $w ^ 2 + x ^ 2 + y ^ 2 + z ^ 2 = 1 $, and call it the unit quaternion. In the direction calculation, the role of w, x, y, z in the unit quaternion is behind us Will explain. At this point, complex multiplication can be expressed in vector form</p><script type="math/tex;mode=display">
q_1 \cdot q_2 = [w_1, \vec v_1] \cdot [w_2, \vec v_2] = [w_1w_2 - v_1v_2, v1 \times v_2 + w_1 \cdot v_2 + w_2 \cdot v_1]</script><p>Or we can also write it in the form of a matrix</p><script type="math/tex;mode=display">
q_1q_2 = \begin{bmatrix}
w_1 & -x_1 & -y_1 & -z_1 \\
x_1 & w_1 & -z_1 & y_1 \\
y_1 & z_1 & w_1 & -x_1 \\
z_1 & -y_1 & x_1 & w_1
\end{bmatrix}
\begin{bmatrix}
w_2 \\ x_2 \\ y_2 \\ z_2
\end{bmatrix}</script><p>Observing this formula, we found that multiplying two quaternions requires storing 8 units of data, that is, each quaternion involved in the operation only needs to store 4 units of data. In addition, several special properties are required:</p><ul><li>Quaternion modulo $| | q | | =\ sqrt {w ^ 2 + x ^ 2 + y ^ 2 + z ^ 2} $</li><li>Quaternion conjugate $q ^{<em>} = ( w + ix + jy + kz )^{</em>}= w -ix -jy - kz $</li><li>共轭的向量形式 $q^{<em>} = (\begin{bmatrix} w &amp; \vec v \end{bmatrix})^{</em>} = \begin{bmatrix} w &amp; -\vec v \end{bmatrix}$</li><li>The reciprocal of a quaternion: $q\ cdot q ^ {-1} = q ^ {-1}\ cdot q = 1 $</li><li>Conjugate vs. reciprocal: $q ^ {-1} =\ frac {q ^ <em>} {w ^ 2 + x ^ 2 + y ^ 2 + z ^ 2} $, for the unit quaternion $q ^{</em>} = q {-1} $</li><li>Quaternion operations satisfy both associative and distributive laws, but do not conform to commutative laws</li></ul><p>Knowing the above calculation rules, we can use quaternions to calculate the direction transformation process. Remember that we said before that when calculating quaternions, we use vector form to represent them and ensure that they are unit quaternions? In fact, the vector form of quaternions can be further rewritten as polar representation, $q =\ | q\ | [cos\ theta,\ vec {n}\ cdot sin\ theta] $</p><p>Where q represents the modulus of the quaternion, the modulus of the quaternion is 1, and θ is the half-angle size of the rotation process represented by the quaternion, that is to say, (2θ) is the size of the rotation angle, and n is the rotation axis. The unit vector of direction. With this representation, the quaternion can represent the direction transformation expressed by any axis angle.</p><p>First, the original vector coordinates are expressed as quaternions $p = [0,\ vec {v}] $, and the rotation angle and rotation axis are expressed as unit quaternions q. The rotated vector coordinates can be obtained by $r = q\ cdot p\ cdot q ^ * $or $r = q\ cdot p\ cdot q ^ {-1} $</p><h3 id="Why-introduce-quaternions"><a href="#Why-introduce-quaternions" class="headerlink" title="Why introduce quaternions"></a>Why introduce quaternions</h3><p>In fact, the quaternion is to better represent the rotation axis and rotation angle. The rotation axis is a three-dimensional vector, and the rotation angle becomes four-dimensional. The quaternion was chosen to represent it because of some of its characteristics.</p><p>Let’s start with the conclusion that quaternion references are used to reduce the amount of computation and storage space occupied during computation.</p><p>However, if you are careful enough, you can definitely find that the process of multiplying two quaternions is actually a process of multiplying a 4 × 4 matrix with a 4 × 1 matrix, and the quaternion calculation requires two times this process, including 24 addition operations and 32 multiplication operations. In contrast, the matrix transformation of the Euler angle only needs to perform a multiplication operation of a 3 × 3 matrix and a 3 × 1 matrix, including 6 addition operations and 9 multiplication operations. The amount of operation is obviously Quaternion is larger. If you are more careful, you can find that although there is a 4 × 4 matrix involved in the operation of the quaternion operation, each item in the matrix is the unit data that has been stored, and the 3 × 3 matrix involved in the Euler angle operation It is obtained by 16 multiplication operations, 4 addition operations and 4 sign change operations performed on the stored unit data, but even with these operations, the matrix operation only needs 25 multiplication operations, 10 addition operations and 4 sign change operations. In terms of computational volume, the matrix operation of Euler angles still has an advantage over the quaternion operation. But in fact, the kinematics problems we generally encounter rarely have to do only one direction conversion. For complex systems and robots, we often face a large number of direction conversion processes. In this case, the advantages of quaternions are reflected. We consider quaternion operations for multiple transformations (using the polar coordinate form above):</p><script type="math/tex;mode=display">
R = R_1R_2...R_{n-1}R_n = (q_n(q_{n-1}...(q_2(q_1pq^*_1)q^*_2)...q^*_{n-1})q^*_n)</script><p>Use associative law:</p><script type="math/tex;mode=display">
R = R_1R_2...R_{n-1}R_n = (q_nq_{n-1}...q_2q_1)p(q^*_1q^*_2...q^*_{n-1}q^*_n）</script><p>Consider the conjugate $ (q_aq_b) ^ <em>= q ^</em> _bq ^ * _a $</p><script type="math/tex;mode=display">
R = R_1R_2...R_{n-1}R_n = (q_nq_{n-1}...q_2q_1)p(q_nq_{n-1}...q_2q_1)^*</script><p>It can be found that the operation result in the parentheses on the left and right sides of the original vector ppp is a pair of conjugated quaternions, that is to say, the 3-th easy sign operation can be used instead of the n-th quaternion multiplication operation, which greatly reduces the amount of calculation.</p><blockquote><p>Finally, a little mention, a lot of people who come into contact with this problem are game developers, may have doubts, why there is no such problem in Unity’s Inspector, you can try this, Unity’s Inspector in the Y axis is not the object’s own coordinate axis rotation, so the universal lock is solved, the specific Unity internal rotation is how to see the next blog, here to dig a pit</p></blockquote><p>Reference article:</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://zh.m.wikipedia.org/zh/%E6%AC%A7%E6%8B%89%E8%A7%92">欧拉角 - 维基百科</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.zhihu.com/question/47736315/answer/236808639">如何通俗地解释欧拉角？之后为何要引入四元数？</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/24195/" title="Performance and Principle of Universal Lock">https://sunra.top/en/posts/24195/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/62391/" rel="prev" title="Principles of Unity Rendering (16) Unity Cube Textures"><i class="fa fa-chevron-left"></i> Principles of Unity Rendering (16) Unity Cube Textures</a></div><div class="post-nav-item"> <a href="/en/posts/18414/" rel="next" title="Implementing a Simple React">Implementing a Simple React<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/24195/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>