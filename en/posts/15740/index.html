<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="These few weeks is the massive open online course 400 ocean bought about React best engineering practices of the course to listen to the seventy-eight, the rest is mainly two parts, one part is some i"><meta property="og:type" content="article"><meta property="og:title" content="react-fiber"><meta property="og:url" content="https://sunra.top/en/posts/15740/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="These few weeks is the massive open online course 400 ocean bought about React best engineering practices of the course to listen to the seventy-eight, the rest is mainly two parts, one part is some i"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505912/origin-of-ray/bVboIrF_jbskrs.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505935/origin-of-ray/bVboJj4_drxyog.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505970/origin-of-ray/bVboJHa_lnhgaq.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505995/origin-of-ray/bVboJNB_sax2xo.png"><meta property="article:published_time" content="2021-06-01T00:02:45.000Z"><meta property="article:modified_time" content="2024-11-19T02:48:43.227Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505912/origin-of-ray/bVboIrF_jbskrs.png"><link rel="canonical" href="https://sunra.top/en/posts/15740/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/15740/","path":"posts/15740/","title":"react-fiber"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>react-fiber | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#react"><span class="nav-number">1.</span> <span class="nav-text">React</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#react-2"><span class="nav-number">2.</span> <span class="nav-text">React</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reference-article"><span class="nav-number">3.</span> <span class="nav-text">Reference article</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/15740/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="react-fiber | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> react-fiber</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-06-01 08:02:45" itemprop="dateCreated datePublished" datetime="2021-06-01T08:02:45+08:00">2021-06-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-11-19 10:48:43" itemprop="dateModified" datetime="2024-11-19T10:48:43+08:00">2024-11-19</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/React/" itemprop="url" rel="index"><span itemprop="name">React</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/15740/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/15740/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>These few weeks is the massive open online course 400 ocean bought about React best engineering practices of the course to listen to the seventy-eight, the rest is mainly two parts, one part is some interactive optimization, and a little bit about performance optimization, these two parts I feel is not very urgent, can be in my work to slowly experience.</p><p>My current priority in React is that I have only learned practice, but I don’t know why I write a lot of things like this, such as why setState can be updated, how hooks take effect, what React fiber is, etc. I don’t understand these, I feel that my React is still floating in mid-air, and there is no better landing, so the next step is to understand the principle. As for whether to read the source code, let’s talk about it next.</p><p>The main content of this blog is to read the blogs of several bosses at home and abroad, and first have a general understanding of the fiber of react</p><span id="more"></span><h2 id="react"><a class="markdownIt-Anchor" href="#react"></a> React</h2><p>In scenarios where there are many page elements and frequent refreshes are required, React 15 will experience frame drops.</p><p>The root cause is that a large number of synchronous computing tasks block the browser’s UI rendering. By default, JS operations, page layout, and page rendering all run in the main thread of the browser (for this paragraph, you can go to my blog about browser architecture: <a href="https://sunra.top/posts/bbe10e1c/">https://sunra.top/posts/bbe10e1c/</a>), and there is a mutual exclusion relationship between them. If JS operations continue to occupy the main thread, the page will not be updated in time. When we call’setState 'to update the page, React will traverse all nodes of the application, calculate the difference, and then update the UI. The whole process is in one go and cannot be interrupted. If there are many page elements, the whole process may take more than 16 milliseconds, which is prone to frame drops.</p><p>The basic idea to solve the problem that the main thread is occupied by JS operations for a long time is to cut the operation into multiple steps and complete them in batches. That is to say, after completing a part of the task, the control is returned to the browser, so that the browser has time to render the page. After the browser is busy, continue with the previously uncompleted task.</p><p>Older versions of React render by recursion, using the JS engine’s own function call stack, which executes until the stack is empty. Fiber implements its own component call stack, which traverses the component tree in the form of a linked list, and can flexibly pause, continue, and discard executed tasks. The implementation method is to use the browser’s requestIdleCallback API. The official explanation is this:</p><blockquote><p>Window.requestIdleCallback () will call the function in turn during the idle time of the browser, which allows developers to perform background or low-priority tasks in the main event loop without affecting delayed but critical events such as animation and user interaction. Functions are generally executed in first-in-first-call order, unless the function reaches its timeout before the browser calls it.</p></blockquote><h2 id="react-2"><a class="markdownIt-Anchor" href="#react-2"></a> React</h2><p>The inner workings of the React framework can be divided into 3 layers:</p><ul><li>Virtual DOM layer that describes what the page looks like.</li><li>Reconciler layer, responsible for calling component lifecycle methods, performing Diff operations, etc.</li><li>Renderer layer, according to different platforms, render the corresponding page, the more common are ReactDOM and ReactNative.</li></ul><p>The biggest change this time is the Reconciler layer. The React team also gave it a new name, called’Fiber Reconciler '. This introduces another keyword: Fiber.</p><p>Fiber actually refers to a data structure that can be represented as a pure JS object (this is just the simple version, there are many other properties):</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fiber = &#123;</span><br><span class="line">    stateNode,<span class="comment">//node instance</span></span><br><span class="line">    <span class="title class_">Child</span>,<span class="comment">//sub-node</span></span><br><span class="line">    <span class="title class_">Siblings</span>,<span class="comment">//siblings</span></span><br><span class="line">    <span class="title class_">Return</span>,<span class="comment">//parent node</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In order to distinguish between them, the previous Reconciler was named’Stack Reconciler '. The process of Stack Reconciler operation cannot be interrupted, and must go to the dark:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505912/origin-of-ray/bVboIrF_jbskrs.png" alt></p><p>Fiber Reconciler will return control to the browser every time it is executed for a period of time, and can be executed in segments.</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505935/origin-of-ray/bVboJj4_drxyog.png" alt></p><p>In order to achieve this effect, a Scheduler is needed to assign tasks. There are six priorities for tasks:</p><ul><li>synchronous, as with the previous Stack Reconciler operation, execute synchronously</li><li>task, execute before next tick</li><li>animation, executed before the next frame</li><li>high, to be implemented immediately in the near future</li><li>low, it doesn’t matter if there is a slight delay in execution</li><li>offscreen, will not be executed until the next render or scroll</li></ul><p>High-priority tasks (such as keyboard input) can interrupt the execution of low-priority tasks (such as Diff), resulting in faster entry into force.</p><p>Fiber Reconciler will be divided into two stages during execution.</p><ul><li>Stage 1, generate the Fiber tree and derive the node information that needs to be updated. This step is a gradual process and can be interrupted.</li><li>Phase two, the nodes that need to be updated are updated in batches at once, and this process cannot be interrupted.</li></ul><p>The feature that stage one can be interrupted allows higher priority tasks to be executed first, which greatly reduces the probability of page frame drops from the framework level.</p><p>Fiber Reconciler will generate a Fiber tree when performing Diff calculation in Phase 1. This tree is generated by adding additional information on the basis of the Virtual DOM tree, which is essentially a linked list.</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505970/origin-of-ray/bVboJHa_lnhgaq.png" alt></p><p>The Fiber tree will be generated in one go during the first rendering. When Diff is needed later, a new tree will be generated based on the information of the existing tree and the latest Virtual DOM. Every time a new node is generated, the new tree will return control to the main thread to check if there are any higher priority tasks that need to be executed. If not, continue the process of building the tree:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1622505995/origin-of-ray/bVboJNB_sax2xo.png" alt></p><p>If there is a higher priority task in the process that needs to be performed, the Fiber Reconciler will discard the tree being generated and re-execute it when it is idle.</p><p>In the process of constructing the Fiber tree, Fiber Reconciler will save the node information that needs to be updated in the’Effect List ', and when the second stage is executed, the corresponding nodes will be updated in batches.</p><h2 id="reference-article"><a class="markdownIt-Anchor" href="#reference-article"></a> Reference article</h2><ul><li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://segmentfault.com/a/1190000018250127">https://segmentfault.com/a/1190000018250127</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e">https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e</a></li></ul></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/15740/" title="react-fiber">https://sunra.top/en/posts/15740/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/32299/" rel="prev" title="Some common tools of Redux and linkage with React"><i class="fa fa-chevron-left"></i> Some common tools of Redux and linkage with React</a></div><div class="post-nav-item"> <a href="/en/posts/5822/" rel="next" title="VsCode Plugin Language Plugin Development">VsCode Plugin Language Plugin Development<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/15740/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>