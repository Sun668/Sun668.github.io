<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="As one of the most mainstream frameworks in front-end, vue has a large number of users. From students’ practice projects to large-scale projects of enterprises, vue has its commendable points. But onc"><meta property="og:type" content="article"><meta property="og:title" content="Vue skeleton screen implementation scheme"><meta property="og:url" content="https://sunra.top/en/posts/6ddddf41/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="As one of the most mainstream frameworks in front-end, vue has a large number of users. From students’ practice projects to large-scale projects of enterprises, vue has its commendable points. But onc"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1566827650/Vue/360%E6%88%AA%E5%9B%BE17860606373553_rnx8aj.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1567216104/Vue/skeleton_yuefj7.png"><meta property="article:published_time" content="2019-08-26T12:21:54.000Z"><meta property="article:modified_time" content="2024-11-15T07:15:04.952Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1566827650/Vue/360%E6%88%AA%E5%9B%BE17860606373553_rnx8aj.png"><link rel="canonical" href="https://sunra.top/en/posts/6ddddf41/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/6ddddf41/","path":"posts/6ddddf41/","title":"Vue skeleton screen implementation scheme"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Vue skeleton screen implementation scheme | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#skeleton-screen-introduction"><span class="nav-number">1.</span> <span class="nav-text">Skeleton screen introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#skeleton-screen-generation-method"><span class="nav-number">2.</span> <span class="nav-text">Skeleton screen generation method</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#vue-server-renderer"><span class="nav-number">2.1.</span> <span class="nav-text">Vue-server-renderer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#principle"><span class="nav-number">2.1.1.</span> <span class="nav-text">Principle</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#implementation-process"><span class="nav-number">2.1.2.</span> <span class="nav-text">Implementation process</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#create-a-new-vue-for-storing-skeleton-screen-files-such-as-skeletonvue"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">Create a new vue for storing skeleton screen files, such as Skeleton.vue</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#create-a-new-entry-file-such-as-skeletonentryjs"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">Create a new entry file, such as skeleton.entry.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#use-the-vue-server-renderer-plugin"><span class="nav-number">2.1.2.3.</span> <span class="nav-text">Use the vue-server-renderer plugin</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#concrete-realization"><span class="nav-number">2.1.3.</span> <span class="nav-text">Concrete realization</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#create-webpackskeletonconfjs"><span class="nav-number">2.1.3.1.</span> <span class="nav-text">Create webpack.skeleton.conf.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#create-a-new-skeletonjs-in-the-root-directory-to-insert-the-skeleton-screen-into-indexhtml"><span class="nav-number">2.1.3.2.</span> <span class="nav-text">Create a new skeleton.js in the root directory to insert the skeleton screen into index.html.</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#use-images-as-skeleton-screens"><span class="nav-number">2.2.</span> <span class="nav-text">Use images as skeleton screens</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#automatically-generate-skeleton-screen"><span class="nav-number">2.3.</span> <span class="nav-text">Automatically generate skeleton screen</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#features"><span class="nav-number">2.3.1.</span> <span class="nav-text">Features</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#installation"><span class="nav-number">2.3.2.</span> <span class="nav-text">Installation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#use"><span class="nav-number">2.3.3.</span> <span class="nav-text">Use</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9buildwebpackbaseconfigjs"><span class="nav-number">2.3.3.1.</span> <span class="nav-text">修改build&#x2F;webpack.base.config.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#modify"><span class="nav-number">2.3.3.2.</span> <span class="nav-text">Modify</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#write-to-skeleton-page"><span class="nav-number">2.3.3.3.</span> <span class="nav-text">Write to skeleton page</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#precautions"><span class="nav-number">2.3.3.4.</span> <span class="nav-text">Precautions</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#use-vue-skeleton-webpack-plugin"><span class="nav-number">2.4.</span> <span class="nav-text">Use vue-skeleton-webpack-plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#installation-2"><span class="nav-number">2.4.0.1.</span> <span class="nav-text">Installation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#create-skeleton-screen-component"><span class="nav-number">2.4.0.2.</span> <span class="nav-text">Create skeleton screen component</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#create-entry-file-for-skeleton-screen"><span class="nav-number">2.4.0.3.</span> <span class="nav-text">Create entry file for skeleton screen</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#create-webpack-config-file-for-skeleton-screen"><span class="nav-number">2.4.0.4.</span> <span class="nav-text">Create webpack config file for skeleton screen</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%86%E5%88%AB%E5%9C%A8webpackprodconfjs%E5%92%8Cwebpackdevconfjs"><span class="nav-number">2.4.0.5.</span> <span class="nav-text">分别在webpack.prod.conf.js和webpack.dev.conf.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#verification"><span class="nav-number">2.4.0.6.</span> <span class="nav-text">Verification</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/6ddddf41/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Vue skeleton screen implementation scheme | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Vue skeleton screen implementation scheme</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2019-08-26 20:21:54" itemprop="dateCreated datePublished" datetime="2019-08-26T20:21:54+08:00">2019-08-26</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-11-15 15:15:04" itemprop="dateModified" datetime="2024-11-15T15:15:04+08:00">2024-11-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Vue/" itemprop="url" rel="index"><span itemprop="name">Vue</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/6ddddf41/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/6ddddf41/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>As one of the most mainstream frameworks in front-end, vue has a large number of users. From students’ practice projects to large-scale projects of enterprises, vue has its commendable points. But once the project becomes huge, any project will become stuck. Here is an implementation of skeleton screen, one of the solutions to optimize vue User Experience. Strictly speaking, skeleton screen is also a way to optimize the first screen experience.</p><span id="more"></span><h2 id="skeleton-screen-introduction"><a class="markdownIt-Anchor" href="#skeleton-screen-introduction"></a> Skeleton screen introduction</h2><p>Skeleton screen can be understood as a blank version of the page, a simple critical rendering path, before the data is loaded in. You can take a look at the Facebook skeleton screen implementation below. You can see that before the page is fully rendered, the user will see a skeleton screen page with a simple style that depicts the general frame of the current page, and then each placeholder in the skeleton screen is completely replaced by actual resources. During this process, users will feel that the content is gradually loading and will be presented, which reduces the user’s anxiety and makes the loading process subjectively smooth.</p><h2 id="skeleton-screen-generation-method"><a class="markdownIt-Anchor" href="#skeleton-screen-generation-method"></a> Skeleton screen generation method</h2><h3 id="vue-server-renderer"><a class="markdownIt-Anchor" href="#vue-server-renderer"></a> Vue-server-renderer</h3><p>Handwritten HTML and CSS customize the skeleton screen for the target page. The main idea is to use vue-server-renderer, a plugin originally used for server-side rendering, to process the ‘.vue’ file we wrote as’HTML 'and insert it into the page template. Mount Point to complete the injection of the skeleton screen. This method is not very civilized. If the page style changes, you have to change the skeleton screen again, which increases the maintenance cost.</p><h4 id="principle"><a class="markdownIt-Anchor" href="#principle"></a> Principle</h4><p>Those who have used vue know that after the vue project is packaged, there is an HTML file with an entry. There is only a div with the id of app in that file, while all other js files are actually dynamically calculated and generated HTML tags inserted into the id. The div of the app.</p><p>When we go to request the vue page, we first load the index.html file and then introduce the corresponding js code through the script tag in the html file. If these js files are too large, the download is too slow or the js running time is too long. It will lead to a white screen on the page for a long time.</p><p>So naturally think of this solution, first modify the index.html file, add the native html to the div with the id of the app as the skeleton screen first, and replace the content in the div when the js operation is completed</p><h4 id="implementation-process"><a class="markdownIt-Anchor" href="#implementation-process"></a> Implementation process</h4><p>But manually writing skeleton screen in div #app is obviously unreasonable.</p><p>Since we are a vue project, skeleton screen of course also needs to be a vue file, it can be automatically injected into the div #app when the component</p><h5 id="create-a-new-vue-for-storing-skeleton-screen-files-such-as-skeletonvue"><a class="markdownIt-Anchor" href="#create-a-new-vue-for-storing-skeleton-screen-files-such-as-skeletonvue"></a> Create a new vue for storing skeleton screen files, such as Skeleton.vue</h5><h5 id="create-a-new-entry-file-such-as-skeletonentryjs"><a class="markdownIt-Anchor" href="#create-a-new-entry-file-such-as-skeletonentryjs"></a> Create a new entry file, such as skeleton.entry.js</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Skeleton</span> <span class="keyword">from</span> <span class="string">&#x27;./Skeleton.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">Skeleton</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;skeleton /&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="use-the-vue-server-renderer-plugin"><a class="markdownIt-Anchor" href="#use-the-vue-server-renderer-plugin"></a> Use the vue-server-renderer plugin</h5><p>This plugin was originally used for server-side rendering (the server level generates different html pages according to different requests and returns them to the front end, and the browser renders them directly. As opposed to front-end rendering, the front end first gets part of the page, and then gets it from the background. Get the data, and then assemble the page on the front end), but we use it here to process the vue file into html and css strings. The process is as follows:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1566827650/Vue/360%E6%88%AA%E5%9B%BE17860606373553_rnx8aj.png" alt></p><h4 id="concrete-realization"><a class="markdownIt-Anchor" href="#concrete-realization"></a> Concrete realization</h4><h5 id="create-webpackskeletonconfjs"><a class="markdownIt-Anchor" href="#create-webpackskeletonconfjs"></a> Create webpack.skeleton.conf.js</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> nodeExternals = <span class="built_in">require</span>(<span class="string">&#x27;webpack-node-externals&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">VueSSRServerPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;vue-server-renderer/server-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">target</span>: <span class="string">&#x27;node&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">skeleton</span>: <span class="string">&#x27;./src/skeleton.entry.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">    <span class="attr">publicPath</span>: <span class="string">&#x27;/dist/&#x27;</span>,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].js&#x27;</span>,</span><br><span class="line">    <span class="attr">libraryTarget</span>: <span class="string">&#x27;commonjs2&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          <span class="string">&#x27;vue-style-loader&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;vue-loader&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">externals</span>: <span class="title function_">nodeExternals</span>(&#123;</span><br><span class="line">    <span class="attr">whitelist</span>: <span class="regexp">/\.css$/</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;vue $&#x27;</span>:<span class="string">&#x27; vue / dist / vue.esm.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">VueSSRServerPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;skeleton.json&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>After running the following command, skeleton.json will be generated in the dist folder, which records the styles of skeleton.vue and its references. This file will be provided to vue-server-renderer for use</p><h5 id="create-a-new-skeletonjs-in-the-root-directory-to-insert-the-skeleton-screen-into-indexhtml"><a class="markdownIt-Anchor" href="#create-a-new-skeletonjs-in-the-root-directory-to-insert-the-skeleton-screen-into-indexhtml"></a> Create a new skeleton.js in the root directory to insert the skeleton screen into index.html.</h5><h3 id="use-images-as-skeleton-screens"><a class="markdownIt-Anchor" href="#use-images-as-skeleton-screens"></a> Use images as skeleton screens</h3><p>This solution is simpler than the first one, requiring only the UI personnel to draw an image, but it is more difficult to maintain than the first one.</p><h3 id="automatically-generate-skeleton-screen"><a class="markdownIt-Anchor" href="#automatically-generate-skeleton-screen"></a> Automatically generate skeleton screen</h3><p>Automatically generate and automatically insert a static skeleton screen This method is similar to the first method, but it automatically generates a skeleton screen. You can pay attention to the open source plug-in of <a target="_blank" rel="external nofollow noopener noreferrer" href="http://Ele.me">Ele.me</a> <a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2FElemeFE%2Fpage-skeleton-webpack-plugin" rel="external nofollow noopener noreferrer" target="_blank">page-skeleton-webpack-plugin</a>It generates the corresponding skeleton screen page according to different routing pages in the project, and packages the skeleton screen page into the corresponding static routing page through webpack. However, it should be noted that this plugin currently only supports routing in history mode, and does not support hash mode. And currently only supports the skeleton screen of the home page, and there is no component-level local skeleton screen implementation.</p><h4 id="features"><a class="markdownIt-Anchor" href="#features"></a> Features</h4><p>Page Skeleton is a webpack plugin. The purpose of this plugin is to generate corresponding skeleton screen pages according to different routing pages in your project, and package the skeleton screen pages into the corresponding static routing pages through webpack.</p><ul><li>Support multiple loading animations</li><li>For mobile end web pages</li><li>Supports multiple routes</li><li>Customizable, you can configure the shape color of the skeleton block through the configuration item, and you can also modify the source code of the skeleton page directly on the preview page</li><li>Can be used with almost zero configuration</li></ul><h4 id="installation"><a class="markdownIt-Anchor" href="#installation"></a> Installation</h4><p>npm install --save-dev page-skeleton-webpack-plugin</p><p>npm install --save-dev html-webpack-plugin</p><h4 id="use"><a class="markdownIt-Anchor" href="#use"></a> Use</h4><h5 id="修改buildwebpackbaseconfigjs"><a class="markdownIt-Anchor" href="#修改buildwebpackbaseconfigjs"></a> 修改build/webpack.base.config.js</h5><p>This file configures the configuration of webpack packaging, including the loader, plugin, and path to the generated file of webpack packaging. This file will be referenced by the webpack.dev .config.js and webpack.prod .config.js files for packaging in Development Environment and production environment.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">SkeletonPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;page-skeleton-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> webpackConfig = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: __dirname + <span class="string">&#x27;/dist&#x27;</span>,</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;index.bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugin</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">       <span class="comment">// Your HtmlWebpackPlugin config</span></span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">SkeletonPlugin</span>(&#123;</span><br><span class="line">      <span class="title class_">Pathname</span>: path.<span class="property">resolve</span> (__dirname, <span class="string">&#x27;$&#123;customPath &#125;`), // address to store the shell file</span></span><br><span class="line"><span class="string">      StaticDir: path.resolve (__dirname, &#x27;</span>./dist <span class="string">&#x27;), // preferably same as&#x27;</span>output.<span class="property">path</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">      Routes : [&#x27;</span>/<span class="string">&#x27;, &#x27;</span>/ search <span class="string">&#x27;], // Add the routes that need to generate the skeleton screen to the array</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">  ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>Since the plugin selects different operations based on NODE_ENV environment variables, you need to display the scrpt option in the package.json file to configure the environment variables as follows</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=development node server.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;rm -rf dist &amp;&amp; cross-env NODE_ENV=production webpack --progress --hide-modules&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The cross-env is also a plugin that can dynamically modify the value of NODE_ENV variables</p><h5 id="modify"><a class="markdownIt-Anchor" href="#modify"></a> Modify</h5><p>Add &lt;! – shell – &gt; inside the root element</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line">&lt; html long = &quot;and&quot; &gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- shell --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="write-to-skeleton-page"><a class="markdownIt-Anchor" href="#write-to-skeleton-page"></a> Write to skeleton page</h5><ol><li><p>Call out the plug-in interface through Ctrl | Cmd + enter in the development page, or enter’toggleBar 'in the JavaScript Console of the browser to call out the interface.</p></li><li><p>Click the button in the interactive interface to preview the skeleton page. This process may take about 20s. When the plugin is ready for the skeleton page, it will automatically open the preview page through the browser.</p></li><li><p>Scan the QR code in the preview page to preview the skeleton page on the mobile phone. You can edit the source code directly on the preview page. By clicking the Write button in the upper right corner, the skeleton page is written into the shell.html file.</p></li><li><p>Repackage the application through webpack. When the page restarts, you can see the skeleton structure of the application before obtaining the data.</p></li></ol><h5 id="precautions"><a class="markdownIt-Anchor" href="#precautions"></a> Precautions</h5><p>You may encounter a problem here, that is, the Development Environment can display, but the production environment does not generate and insert the skeleton screen. The reason may be that there is a configuration in webpack.prod, js that will eliminate all comments. This configuration will remove the &lt;! --shell-- &gt; tag, so the insertion point of the skeleton screen cannot be found</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">filename</span>: config.<span class="property">build</span>.<span class="property">index</span>,</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">      <span class="attr">inject</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">minify</span>: &#123;</span><br><span class="line">        <span class="comment">//removeComments: true, remove comments</span></span><br><span class="line">        <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">removeAttributeQuotes</span>: <span class="literal">true</span></span><br><span class="line">        <span class="comment">// more options:</span></span><br><span class="line">        <span class="comment">// https://github.com/kangax/html-minifier#options-quick-reference</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// necessary to consistently work with multiple chunks via CommonsChunkPlugin</span></span><br><span class="line">      <span class="attr">chunksSortMode</span>: <span class="string">&#x27;dependency&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="use-vue-skeleton-webpack-plugin"><a class="markdownIt-Anchor" href="#use-vue-skeleton-webpack-plugin"></a> Use vue-skeleton-webpack-plugin</h3><p>It changes the way of inserting skeleton screen from manual to automatic. The principle is to use Vue pre-rendering function during construction. The rendered HTML fragment of the skeleton screen component is inserted into the Mount Point of the HTML page template, and the style is internal connection to the’head 'tag. This plugin can set different skeleton screens for different routes of a single page, or for multiple pages. At the same time, for the convenience of debugging during development, the skeleton screen will be written into the router as a route</p><h5 id="installation-2"><a class="markdownIt-Anchor" href="#installation-2"></a> Installation</h5><p>npm install vue-skeleton-webpack-plugin</p><h5 id="create-skeleton-screen-component"><a class="markdownIt-Anchor" href="#create-skeleton-screen-component"></a> Create skeleton screen component</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;skeleton&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;skeleton-head&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;skeleton-body&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;skeleton-name&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;skeleton-title&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;skeleton-content&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;skeleton&#x27;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.skeleton &#123;</span><br><span class="line">  padding: 15px;</span><br><span class="line">&#125;</span><br><span class="line">.skeleton .skeleton-head,</span><br><span class="line">.skeleton .skeleton-name,</span><br><span class="line">.skeleton .skeleton-title,</span><br><span class="line">.skeleton .skeleton-content,</span><br><span class="line">.skeleton .skeleton-content &#123;</span><br><span class="line">  background: rgb(194, 207, 214);</span><br><span class="line">&#125;</span><br><span class="line">.skeleton-head &#123;</span><br><span class="line">  width: 33px;</span><br><span class="line">  height: 33px;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  float: left;</span><br><span class="line">&#125;</span><br><span class="line">.skeleton-body &#123;</span><br><span class="line">  margin-left: 50px;</span><br><span class="line">&#125;</span><br><span class="line">.skeleton-name&#123;</span><br><span class="line">  width: 150px;</span><br><span class="line">  height: 30px;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.skeleton-title &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 30px;</span><br><span class="line">&#125;</span><br><span class="line">.skeleton-content &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 30px;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h5 id="create-entry-file-for-skeleton-screen"><a class="markdownIt-Anchor" href="#create-entry-file-for-skeleton-screen"></a> Create entry file for skeleton screen</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Skeleton</span> <span class="keyword">from</span> <span class="string">&#x27;./Skeleton&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">Skeleton</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;skeleton id=&quot;skeleton1&quot; style=&quot;display:none&quot;/&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="create-webpack-config-file-for-skeleton-screen"><a class="markdownIt-Anchor" href="#create-webpack-config-file-for-skeleton-screen"></a> Create webpack config file for skeleton screen</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) </span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>) </span><br><span class="line"><span class="keyword">const</span> baseWebpackConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.base.conf&#x27;</span>) </span><br><span class="line"><span class="keyword">const</span> nodeExternals = <span class="built_in">require</span>(<span class="string">&#x27;webpack-node-externals&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">&#x27;../config&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> utils = <span class="built_in">require</span>(<span class="string">&#x27;./utils&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> isProduction = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> = <span class="string">&#x27;production&#x27;</span></span><br><span class="line"><span class="keyword">const</span> sourceMapEnabled = isProduction</span><br><span class="line">  ? config.<span class="property">build</span>.<span class="property">productionSourceMap</span></span><br><span class="line">  : config.<span class="property">dev</span>.<span class="property">cssSourceMap</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">dir</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> path.<span class="title function_">join</span>(__dirname, dir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> skeletonWebpackConfig = <span class="title function_">merge</span>(baseWebpackConfig, &#123;</span><br><span class="line">  <span class="attr">target</span>: <span class="string">&#x27;node&#x27;</span>,</span><br><span class="line">  <span class="attr">devtool</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">app</span>: <span class="title function_">resolve</span>(<span class="string">&#x27;../src/entry-skeleton.js&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">output</span>: <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, baseWebpackConfig.<span class="property">output</span>, &#123;</span><br><span class="line">    <span class="attr">libraryTarget</span>: <span class="string">&#x27;commonjs2&#x27;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">externals</span>: <span class="title function_">nodeExternals</span>(&#123;</span><br><span class="line">    <span class="attr">whitelist</span>: <span class="regexp">/\.css$/</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">plugins</span>: []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// important: enable extract-text-webpack-plugin </span></span><br><span class="line"><span class="comment">//Key configuration</span></span><br><span class="line">skeletonWebpackConfig.<span class="property">module</span>.<span class="property">rules</span>[<span class="number">0</span>].<span class="property">options</span>.<span class="property">loaders</span> = utils.<span class="title function_">cssLoaders</span>(&#123;</span><br><span class="line">  <span class="attr">sourceMap</span>: sourceMapEnabled,</span><br><span class="line">  <span class="attr">extract</span>: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = skeletonWebpackConfig</span><br></pre></td></tr></table></figure><h5 id="分别在webpackprodconfjs和webpackdevconfjs"><a class="markdownIt-Anchor" href="#分别在webpackprodconfjs和webpackdevconfjs"></a> 分别在webpack.prod.conf.js和webpack.dev.conf.js</h5><p>First, you need to introduce the vue-skeleton-webpack-plugin plugin</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">SkeletonWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;vue-skeleton-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Use the plugin to add an item to the plugins array</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">SkeletonWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">webpackConfig</span>: <span class="built_in">require</span>(<span class="string">&#x27;./webpack.skeleton.conf&#x27;</span>),</span><br><span class="line">      <span class="attr">quiet</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">minimize</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">router</span>: &#123;</span><br><span class="line">        <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">        <span class="attr">routes</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="title class_">Path</span>: <span class="string">&#x27;/client/a/Quiksns/comment&#x27;</span>,<span class="comment">//Use route accordingly</span></span><br><span class="line">            <span class="title class_">SkeletonId</span>: <span class="string">&#x27;skeleton1&#x27;</span><span class="comment">//ID of the skeleton screen used</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br></pre></td></tr></table></figure><h5 id="verification"><a class="markdownIt-Anchor" href="#verification"></a> Verification</h5><p>After starting the vue project, enter <a target="_blank" rel="external nofollow noopener noreferrer" href="http://localhost:8080/client/a/Quiksns/comment">http://localhost:8080/client/a/Quiksns/comment</a> in the browser</p><p>We can see that there will be a skeleton screen before the page is loaded. If the page loads too fast and cannot be seen clearly, you can also use the performance tab of chrome Devtools to record the operation (pay attention to check the screenshot option), and we can see each page. Frame situation.</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1567216104/Vue/skeleton_yuefj7.png" alt></p><p>Reference article</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://zhuanlan.zhihu.com/p/35505062">https://zhuanlan.zhihu.com/p/35505062</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.cnblogs.com/FarmanKKK/p/9712913.html">https://www.cnblogs.com/FarmanKKK/p/9712913.html</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/6ddddf41/" title="Vue skeleton screen implementation scheme">https://sunra.top/en/posts/6ddddf41/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/a8b43915/" rel="prev" title="Front-end performance analysis tool"><i class="fa fa-chevron-left"></i> Front-end performance analysis tool</a></div><div class="post-nav-item"> <a href="/en/posts/dc372867/" rel="next" title="Summary of Precautions for Vue Use (Continuous Update)">Summary of Precautions for Vue Use (Continuous Update)<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/6ddddf41/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>