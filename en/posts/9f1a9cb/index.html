<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="What is a hash table The English name of the hash table is “Hash Table”, and we usually call it “Hash Table” or “Hash Table” The hash table uses the feature that arrays support random access to data"><meta property="og:type" content="article"><meta property="og:title" content="Design and Application of Hash Table"><meta property="og:url" content="https://sunra.top/en/posts/9f1a9cb/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="What is a hash table The English name of the hash table is “Hash Table”, and we usually call it “Hash Table” or “Hash Table” The hash table uses the feature that arrays support random access to data"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2020-10-12T13:42:34.000Z"><meta property="article:modified_time" content="2024-12-08T10:12:56.475Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/posts/9f1a9cb/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/9f1a9cb/","path":"posts/9f1a9cb/","title":"Design and Application of Hash Table"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Design and Application of Hash Table | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#what-is-a-hash-table"><span class="nav-number">1.</span> <span class="nav-text">What is a hash table</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#hash-function"><span class="nav-number">1.1.</span> <span class="nav-text">Hash function</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#solutions-to-hash-conflicts"><span class="nav-number">1.2.</span> <span class="nav-text">Solutions to hash conflicts</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#open-addressing-method"><span class="nav-number">1.2.1.</span> <span class="nav-text">Open addressing method</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#linear-detection-method"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">Linear detection method</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#quadratic-detection-method"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">Quadratic detection method</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#double-hashing"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">Double hashing</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#linked-list-method"><span class="nav-number">1.2.2.</span> <span class="nav-text">Linked list method</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#thinking"><span class="nav-number">1.3.</span> <span class="nav-text">Thinking</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#how-to-design-a-good-hash-table"><span class="nav-number">2.</span> <span class="nav-text">How to design a good hash table</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#design-a-hash-function"><span class="nav-number">2.1.</span> <span class="nav-text">Design a hash function</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#efficient-expansion"><span class="nav-number">2.2.</span> <span class="nav-text">Efficient expansion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#how-to-choose-a-conflict-resolution-method"><span class="nav-number">2.3.</span> <span class="nav-text">How to choose a conflict resolution method?</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#open-addressing-method-2"><span class="nav-number">2.3.1.</span> <span class="nav-text">Open addressing method</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#linked-list-method-2"><span class="nav-number">2.3.2.</span> <span class="nav-text">Linked list method</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#why-hash-tables-are-often-used-with-linked-lists"><span class="nav-number">3.</span> <span class="nav-text">Why hash tables are often used with linked lists</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/9f1a9cb/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Design and Application of Hash Table | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Design and Application of Hash Table</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-10-12 21:42:34" itemprop="dateCreated datePublished" datetime="2020-10-12T21:42:34+08:00">2020-10-12</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-12-08 18:12:56" itemprop="dateModified" datetime="2024-12-08T18:12:56+08:00">2024-12-08</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/9f1a9cb/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/9f1a9cb/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="what-is-a-hash-table"><a class="markdownIt-Anchor" href="#what-is-a-hash-table"></a> What is a hash table</h2><p>The English name of the hash table is “Hash Table”, and we usually call it “Hash Table” or “Hash Table”</p><p>The hash table uses the feature that arrays support random access to data according to subscripts, so the hash table is actually an extension of the array, evolved from the array. It can be said that if there is no array, there is no hash table.</p><p>Why do you say that? In fact, the storage of the so-called hash table is to extract some data from the data to be stored, calculate the index of an array according to a specific rule, and then store the data in the corresponding index position. The extracted data is called ** key (key), or the keyword **, this rule is called ** hash function **, and the calculated array index is ** hash value **, or Hash value.</p><p>Let’s take a specific example. We want to store a doc named ** abcd.txt ** in the hash table. We use the file name as the key to design a hash function. This hash function imported parameter is the file name. After a series of calculations, the index of the array is 3, so the content of this doc is stored in the place where the index of the array is 3. Next time I want to see if the doc of abcd.txt has been stored, I can execute the hash function again., get subscript 3, and then go to query whether there is data in the place where the subscript is 3.</p><span id="more"></span><h3 id="hash-function"><a class="markdownIt-Anchor" href="#hash-function"></a> Hash function</h3><p>From the above example, we can see that the hash function plays a very key role in the hash table. Now let’s learn about the hash function.</p><p>Hash function, as its name suggests, is a function. We can define it as hash (key), where key represents the key value of the element, and hash (key) represents the hash value calculated by the hash function.</p><p>So how should we design a hash function?</p><ul><li>The hash value calculated by the hash function is a non-negative integer;</li></ul><p>If key1 = key2, then hash (key1) hash(key2)；</p><p>If key1 ≠ key2, then hash (key1) ≠ hash (key2).</p><p>The first point is easy to understand because our hash table is an array, and the index of the array is a non-negative integer.</p><p>The second point is also easier to understand. The hash value I get for the same content should be the same, so as to ensure that I can find it accurately the next time I want to find it.</p><p>The third point is actually difficult to do. We can hardly find a perfect conflict-free hash function. Even if we can find it, the time cost and calculation cost are very large, so for the hash conflict problem, we need to use other ways to solve it. For a simple example, if the length of the hash table is 10,000, no matter how your hash function is designed, the 10001 data will definitely be the same as the array index obtained by a certain record. This is the case when the loading factor reaches 1, which is bound to conflict.</p><blockquote><p>The loading factor of the hash table = the number of elements filled in the table/the length of the hash table</p></blockquote><p>When key1 ≠ key2, then hash (key1) = hash (key2), which is called hash conflict.</p><h3 id="solutions-to-hash-conflicts"><a class="markdownIt-Anchor" href="#solutions-to-hash-conflicts"></a> Solutions to hash conflicts</h3><p>Now that we have said that we can hardly avoid hash conflicts, we need to think of a relatively low-cost way to solve hash conflicts.</p><p>There are two commonly used hash conflict resolution methods, open addressing and chaining.</p><h4 id="open-addressing-method"><a class="markdownIt-Anchor" href="#open-addressing-method"></a> Open addressing method</h4><p>The core idea of open addressing is that if a hash conflict occurs, we re-probe a free location and insert it.</p><h5 id="linear-detection-method"><a class="markdownIt-Anchor" href="#linear-detection-method"></a> Linear detection method</h5><ul><li>Insertion process:</li></ul><p>How to re-probe the new location? Let me first talk about a relatively simple detection method, Linear Probing. When we insert data into the hash table, if a certain data has been hashed by the hash function and the storage location has been occupied, we start from the current location and look back in turn to see if there is a free location until we find it.</p><ul><li>Search process:</li></ul><p>The process of searching for elements in the hash table is somewhat similar to the insertion process. We use the hash function to obtain the hash value corresponding to the key value of the element to be found, and then compare the element subscribed as the hash value in the array with the element to be found. If they are equal, it means that they are the elements we are looking for; otherwise, we search in order. If we traverse to the free position in the array and have not found it yet, it means that the element to be found is not in the hash table.</p><ul><li>Removal process:</li></ul><p>Hash tables, like arrays, support not only insert and find operations, but also delete operations. For hash tables that use linear probing to resolve conflicts, the delete operation is slightly special. We cannot simply set the element to be deleted to null. Why is this? Remember the search operation we just talked about? During the search, once we find a free position through linear probing method, we can assume that the data does not exist in the hash table. However, if this free position is later deleted by us, it will invalidate the original search algorithm. The data that originally existed will be considered non-existent. How to solve this problem? We can mark the deleted element as deleted in particular. When the linear probe searches, it encounters a space marked as deleted, and instead of stopping, it continues to probe down.</p><h5 id="quadratic-detection-method"><a class="markdownIt-Anchor" href="#quadratic-detection-method"></a> Quadratic detection method</h5><p>The so-called quadratic detection is very similar to linear detection. The step size of each linear detection is 1, so the subscript sequence it detects is hash (key) + 0, hash (key) + 1, hash (key) + 2… And the step size of the quadratic detection becomes the original “quadratic”, that is to say, the subscript sequence it detects is hash (key) + 0, hash (key) + 12, hash (key) + 22…</p><h5 id="double-hashing"><a class="markdownIt-Anchor" href="#double-hashing"></a> Double hashing</h5><p>The so-called double hashing means not only using one hash function. We use a set of hash functions hash1 (key), hash2 (key), hash3 (key)… We first use the first hash function, if the calculated storage location is already occupied, then use the second hash function, and so on, until a free storage location is found. No matter which detection method is used, when there are not many free positions in the hash table, the probability of hash collision will be greatly increased. In order to ensure the operational efficiency of the hash table as much as possible, in general, we will try our best to ensure that there are a certain proportion of free slots in the hash table. We use the load factor to represent the number of vacancies. The calculation formula of the loading factor is: the loading factor of the hash table = the number of elements filled in the table/the length of the hash table. The larger the loading factor, the fewer free positions and the more conflicts, the performance of the hash table will decrease.</p><h4 id="linked-list-method"><a class="markdownIt-Anchor" href="#linked-list-method"></a> Linked list method</h4><p>The linked list method is a more commonly used hash conflict resolution method, which is much simpler than the open addressing method.</p><p>In the hash table, each “bucket” or “slot” corresponds to a linked list, and all elements with the same hash value are placed in the linked list corresponding to the same slot.</p><p>When inserting, we only need to calculate the corresponding hash slot through the hash function and insert it into the corresponding linked list, so the time complexity of insertion is O (1).</p><p>When searching and deleting an element, we also calculate the corresponding slot through the hash function, and then traverse the linked list to find or delete.</p><p>What is the time complexity of the find or delete operation? In fact, the time complexity of these two operations is proportional to the length k of the linked list, which is O (k). For a hash function with a uniform hash, theoretically, k = n/m, where n represents the number of data in the hash and m represents the number of “slots” in the hash table. The solution begins.</p><h3 id="thinking"><a class="markdownIt-Anchor" href="#thinking"></a> Thinking</h3><p>Since the hash table is actually an array, why do we need to make it so complicated?</p><p>Personally, I think the most important point is to be able to determine whether the value you are looking for is in the hash table in O (1) time complexity, and if so, return it.</p><h2 id="how-to-design-a-good-hash-table"><a class="markdownIt-Anchor" href="#how-to-design-a-good-hash-table"></a> How to design a good hash table</h2><p>The query efficiency of hash table cannot be generalized as O (1). It is related to hash function, load factor, hash conflict, etc.</p><p>If the hash function is not well designed or the loading factor is too high, it may lead to an increase in the probability of hash collision and a decrease in query efficiency.</p><p>In extreme cases, some malicious attackers may also use carefully constructed data so that all data is hashed into the same slot after a hash function. If we use a list-based conflict resolution method, then at this time, the hash table will degenerate into a linked list, and the time complexity of the query will rapidly degrade from O (1) to O (n).</p><p>From our description of the hash table above, we should be able to understand the three main points of designing a good hash table:</p><ul><li>Design an efficient and evenly distributed hash function</li><li>Efficient expansion of hash tables</li><li>Choose the right hash conflict solution</li></ul><h3 id="design-a-hash-function"><a class="markdownIt-Anchor" href="#design-a-hash-function"></a> Design a hash function</h3><p>First of all, the design of the hash function should not be too complicated. An overly complex hash function will inevitably consume a lot of computing time, which indirectly affects the performance of the hash table. Secondly, the values generated by the hash function should be as random and evenly distributed as possible, so as to avoid or minimize hash conflicts, and even if there is a conflict, the data hashed into each slot will be relatively average, and there will be no A situation where there is a lot of data in one slot.</p><h3 id="efficient-expansion"><a class="markdownIt-Anchor" href="#efficient-expansion"></a> Efficient expansion</h3><p>When the load factor of the hash table exceeds a certain threshold, it needs to be expanded. The load factor threshold needs to be selected properly. If it is too large, it will lead to too many collisions; if it is too small, it will lead to serious memory waste</p><p>For array expansion, the data move operation is relatively simple. However, for hash table expansion, the data move operation is much more complicated.</p><p>Because the size of the hash table has changed, the storage location of the data has also changed, so we need to recalculate the storage location of each data through the hash function.</p><p>Insert a data, in the best case, no expansion is required, and the best time complexity is O (1). In the worst case, the hash table loading factor is too high, and the expansion is started. We need to reapply the Memory Space, recalculate the hash position, and move the data, so the time complexity is O (n)</p><p>In most cases, inserting data into a dynamically expanded hash table is very fast, but in special cases, when the loading factor has reached the threshold, it is necessary to expand first and then insert data. At this time, inserting data will become very slow and even unacceptable.</p><p>In order to solve the situation that one-time expansion takes too much time, we can interspersed the expansion operation with the insertion operation and complete it in batches. When the loading factor reaches the threshold, ** we only apply for new space, but do not move the old data to the new hash table **.</p><p>** When there is new data to be inserted, we insert the new data into the new hash table, and take a data from the old hash table and put it into the new hash table **. Each time a data is inserted into the hash table, we repeat the above process. After multiple insert operations, all the data in the old hash table is moved to the new hash table bit by bit. In this way, there is no centralized one-time data movement, and the insertion operation becomes very fast.</p><h3 id="how-to-choose-a-conflict-resolution-method"><a class="markdownIt-Anchor" href="#how-to-choose-a-conflict-resolution-method"></a> How to choose a conflict resolution method?</h3><h4 id="open-addressing-method-2"><a class="markdownIt-Anchor" href="#open-addressing-method-2"></a> Open addressing method</h4><p>The open addressing method is not like the linked list method, which requires pulling a lot of linked lists. The data in the hash table is stored in an array, which can effectively use the CPU cache to speed up the query. Moreover, the hash table implemented by this method is relatively simple to serialize.</p><p>Deleting data is more troublesome, and it is necessary to mark the data that has been deleted. Moreover, in the open addressing method, all data is stored in an array, which is more expensive than the linked list method. Therefore, using the open addressing method to resolve conflicting hash tables, the upper limit of the loading factor should not be too large. This also leads to this method wasting Memory Space more than the linked list method.</p><p>Therefore, when the amount of data is relatively small and the loading factor is small, it is suitable to use the open addressing method. This is also the reason why the ThreadLocalMap in the Java uses the open addressing method to solve the hash conflict</p><h4 id="linked-list-method-2"><a class="markdownIt-Anchor" href="#linked-list-method-2"></a> Linked list method</h4><p>The linked list method has a higher tolerance for large loading factors than the open addressing method. The open addressing method can only be used when the loading factor is less than 1. When it is close to 1, there may be a lot of hash collisions, resulting in a large number of probes, re-hashes, etc., and the performance will drop a lot. But for the linked list method, as long as the value of the hash function is randomly uniform, even if the loading factor becomes 10, that is, the length of the linked list becomes longer. Although the search efficiency has decreased, it is still much faster than the sequential search.</p><p>Because the linked list needs to store pointers, it consumes more memory for the storage of relatively small objects, and may double the memory consumption. Moreover, because the nodes in the linked list are scattered in memory, not continuous, it is not friendly to CPU cache, which also has a certain impact on execution efficiency.</p><p>If we are storing large objects, that is to say, the size of the object to be stored is much larger than the size of a pointer (4 bytes or 8 bytes), then the memory consumption of the pointer in the linked list can be ignored in front of the large object.</p><p>In fact, we can achieve a more efficient hash table by modifying the linked list method a little. That is, we transform the linked list in the linked list method into other efficient dynamic data structures, such as jump tables and Red-Black Trees. In this way, even if there is a hash collision, in extreme cases, all the data is hashed into the same bucket, and the search time of the final hash table is only O (logn). This also effectively avoids the hash collision attack mentioned earlier.</p><h2 id="why-hash-tables-are-often-used-with-linked-lists"><a class="markdownIt-Anchor" href="#why-hash-tables-are-often-used-with-linked-lists"></a> Why hash tables are often used with linked lists</h2><p>Arrays have the advantage of random access, but have the disadvantage of requiring continuous memory.</p><p>Linked lists have the advantage of non-contiguous storage, but access lookups are linear.</p><p>The mixed use of hash tables and linked lists is to combine the advantages of arrays and linked lists and avoid their shortcomings.</p><p>Through the hash plus linked list, you can achieve discontinuous storage but random access, such as we need to access an element, you can calculate its hash value and then directly to the hash table to find, and because each item in the hash table is a linked list, but also can achieve discontinuous storage of data.</p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/9f1a9cb/" title="Design and Application of Hash Table">https://sunra.top/en/posts/9f1a9cb/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/8a7b9568/" rel="prev" title="Basic Data Structure - Queue"><i class="fa fa-chevron-left"></i> Basic Data Structure - Queue</a></div><div class="post-nav-item"> <a href="/en/posts/803d8247/" rel="next" title="Comparison of Several Basic Data Structures">Comparison of Several Basic Data Structures<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/9f1a9cb/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>