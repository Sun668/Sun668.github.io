<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="Recently, when reviewing the configuration of cookies, I found a new configuration called sameSite. The Chinese translation of this sameSite is same site. Let’s take a look today at what this same sit"><meta property="og:type" content="article"><meta property="og:title" content="Cookies and the Same Site"><meta property="og:url" content="https://sunra.top/en/posts/586529c7/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="Recently, when reviewing the configuration of cookies, I found a new configuration called sameSite. The Chinese translation of this sameSite is same site. Let’s take a look today at what this same sit"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2020-12-18T11:55:33.000Z"><meta property="article:modified_time" content="2023-10-21T13:23:10.954Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/posts/586529c7/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/586529c7/","path":"posts/586529c7/","title":"Cookies and the Same Site"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Cookies and the Same Site | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Same-origin-and-same-station"><span class="nav-number">1.</span> <span class="nav-text">Same origin and same station</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scope-of-cookies"><span class="nav-number">2.</span> <span class="nav-text">Scope of cookies</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CSRF"><span class="nav-number">3.</span> <span class="nav-text">CSRF</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SameSite-Properties"><span class="nav-number">4.</span> <span class="nav-text">SameSite Properties</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Strict"><span class="nav-number">4.1.</span> <span class="nav-text">Strict</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lax"><span class="nav-number">4.2.</span> <span class="nav-text">Lax</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#None"><span class="nav-number">4.3.</span> <span class="nav-text">None</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/586529c7/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Cookies and the Same Site | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Cookies and the Same Site</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-12-18 19:55:33" itemprop="dateCreated datePublished" datetime="2020-12-18T19:55:33+08:00">2020-12-18</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2023-10-21 21:23:10" itemprop="dateModified" datetime="2023-10-21T21:23:10+08:00">2023-10-21</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Security/" itemprop="url" rel="index"><span itemprop="name">Security</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/586529c7/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/586529c7/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Recently, when reviewing the configuration of cookies, I found a new configuration called sameSite.</p><p>The Chinese translation of this sameSite is same site.</p><p>Let’s take a look today at what this same site is, what is the difference between it and the same origin, and why cookies clearly have domain and path to specify the scope and need the sameSite attribute.</p><span id="more"></span><h2 id="Same-origin-and-same-station"><a href="#Same-origin-and-same-station" class="headerlink" title="Same origin and same station"></a>Same origin and same station</h2><ul><li>Same origin: Protocol (scheme) + hostname (hostname) + Port Number (port) are exactly the same.</li><li>Same site: ‘eTLD + 1’ is exactly the same.</li></ul><p>TLD means top-level domain name, such as .com, .org, .cn, etc. However, top-level domain names are not static and will increase over time.</p><p>‘TLD + 1 ‘represents a combination of a Top-Level Domain name and the second-level domain name preceding it, for example, the URL is:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.example.com:443/foo</span><br></pre></td></tr></table></figure><p>So:</p><ul><li>‘TLD’ is’ .com ‘</li><li><code>TLD+1</code> 是 <code>example.com</code></li></ul><p>However, this representation is flawed, for example for the following URL:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.example.com.cn</span><br></pre></td></tr></table></figure><p>If according to the above rules, its’ TLD + 1 ‘is’ com.cn ‘, which does not represent this site. What really represents this site should be’ example.com.cn ‘, so the concept of’eTLD’ is derived, that is, <strong>effective top-level domain name</strong> :</p><ul><li>‘eTLD’:’ com.cn ‘</li><li><code>eTLD+1</code>：<code>example.com.cn</code></li></ul><blockquote><p>注意，同源与跨域同级的概念</p><p>同站与跨站是相同的概念，比如著名的XSS和CSRF，都是跨站攻击</p></blockquote><h2 id="Scope-of-cookies"><a href="#Scope-of-cookies" class="headerlink" title="Scope of cookies"></a>Scope of cookies</h2><p> <strong>Cookies have two important attributes: Domain and Path, which indicate the scope of this cookie:</strong></p><p>　 Domain tells the browser the domain name ownership of the current cookie to be added. If it is not clearly specified, it defaults to the current domain name. For example, the domain name of the cookie added by visiting www.baidu.com defaults to www.baidu.com, and the domain name of the cookie generated by visiting [www.baidu.com is www.baidu.com</p><p>　　Path tells the browser the path attribution of the current cookie to be added, and defaults to the current path if not explicitly specified, such as by visiting <a href="https://link.zhihu.com/?target=http%3A//www.baidu.com/java/hotspot.html" rel="external nofollow noopener noreferrer" target="_blank">www.baidu.com/java/hotspot.html</a> The default path for added cookies is/java/, via <a href="https://link.zhihu.com/?target=http%3A//www.baidu.com/java/hotspot.html" rel="external nofollow noopener noreferrer" target="_blank">www.baidu.com/java/hotspot.html</a> The path of the generated cookie is also /java/</p><p> <strong>The cookies submitted by the browser need to meet the following two points:</strong></p><ul><li><p>Cookies under the current domain name or parent domain name;</p></li><li><p>Cookies under current path or parent path</p></li></ul><h2 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h2><p>After understanding the scope of the same site and cookie, let’s take a look at the attack method of CSRF.</p><p>Cookies are a solution we use to deal with HTTP statelessness. They achieve the purpose of making HTTP requests carry state by storing some user information in the browser and automatically carrying cookies in subsequent requests.</p><p>Cookies are often used to store user identity information. Malicious websites can manage to forge HTTP requests with the correct cookies. This is called a CSRF attack.</p><p>For example, when a user logs into the your-bank.com, the bank server sends a cookie.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie:<span class="built_in">id</span>=afasdfafa;</span><br></pre></td></tr></table></figure><p>The user later visited the malicious website evil.com, which had a form on it.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;your-bank.com/transfer&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Once the user is tricked into sending this form, <strong>since the target of the request is the bank, the content of the cookie in the bank’s domain and path will be automatically carried</strong> , and the bank website will receive the request with the correct cookie. In order to prevent this attack, the form generally has a random token to tell the server that this is a real request.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;your-bank.com/transfer&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;token&quot;</span> <span class="attr">value</span>=<span class="string">&quot;dad3weg34&quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>This type of cookie guided by a third-party website is called a third-party cookie. In addition to being used for CSRF attacks, it can also be used for user tracking.</p><p>For example, Facebook inserts an invisible image on a third-party website.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;facebook.com&quot;</span> <span class="attr">style</span>=<span class="string">&quot;visibility:hidden;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>When the browser loads the above code, it will send a request to Facebook with cookies, so that Facebook will know who you are and what websites you have visited.</p><h2 id="SameSite-Properties"><a href="#SameSite-Properties" class="headerlink" title="SameSite Properties"></a>SameSite Properties</h2><p>Starting Chrome 51, browser cookies have added a SameSite property to prevent CSRF attacks and user tracking.</p><p>But since cookies already have domain and path, why do you need a sameSite?</p><p> <strong>Actually, it’s because sameSite restricts the scope of cookies. The scope restricts what cookies can be obtained when I want to carry cookies in a request. This is called scope, and sameSite restricts whether I allow it to carry cookies if I send a request from my page.</strong></p><p>For example, my own blog page has a link to Taobao, whether this link is posted by myself or injected by XSS, anyway there is such a link, if I click on this link in my blog, Since my blog and Taobao are different stations, the restrictions of sameSite will not allow this request to carry cookies at all. If there is no restriction of sameSite, it will further go to see what cookies are allowed according to the scope.</p><p>The’SameSite ‘attribute of cookies is used to restrict third-party cookies, thereby reducing security risks.</p><p>It can set three values.</p><ul><li>Strict</li><li>Lax</li><li>None</li></ul><h3 id="Strict"><a href="#Strict" class="headerlink" title="Strict"></a>Strict</h3><p>‘Strict ‘is the strictest, completely prohibits third-party cookies, and will not send cookies under any circumstances when crossing sites. In other words, <strong>Cookies will only be brought if the URL of the current webpage matches the request target</strong> .</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: CookieName=CookieValue; SameSite=Strict;</span><br></pre></td></tr></table></figure><p>This rule is too strict and may result in a very bad User Experience. For example, if the current webpage has a GitHub link, the user will not have GitHub cookies when clicking the jump, and the jump is always not logged in.</p><h3 id="Lax"><a href="#Lax" class="headerlink" title="Lax"></a>Lax</h3><p>Lax rules are slightly relaxed, and in most cases third-party cookies are not sent, except for Get requests that navigate to the target URL.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: CookieName=CookieValue; SameSite=Lax;</span><br></pre></td></tr></table></figure><p>The GET request for navigating to the target URL only includes three cases: link, preload request, and GET form. See the table below for details.</p><div class="table-container"><table><thead><tr><th style="text-align:left">Request Type</th><th style="text-align:center">Examples</th><th style="text-align:right">Normal</th><th style="text-align:left">Lax</th></tr></thead><tbody><tr><td style="text-align:left">Links</td><td style="text-align:center">‘&lt; a href = “…” &gt;&lt;/a&gt;’</td><td style="text-align:right">Send Cookies</td><td style="text-align:left">Send Cookies</td></tr><tr><td style="text-align:left">preload</td><td style="text-align:center">‘&lt; link rel = “prerender” href = “…”/&gt;’</td><td style="text-align:right">send cookies</td><td style="text-align:left">send cookies</td></tr><tr><td style="text-align:left">GET form</td><td style="text-align:center">‘&lt; form method = “GET” action = “…” &gt;’</td><td style="text-align:right">Send Cookies</td><td style="text-align:left">Send Cookies</td></tr><tr><td style="text-align:left">POST form</td><td style="text-align:center">‘&lt; form method = “POST” action = “…” &gt;’</td><td style="text-align:right">send cookies</td><td style="text-align:left">do not send</td></tr><tr><td style="text-align:left">iframe</td><td style="text-align:center">‘&lt; iframe src = “…” &gt; &lt;/iframe &gt;’</td><td style="text-align:right">Send Cookies</td><td style="text-align:left">Do Not Send</td></tr><tr><td style="text-align:left">AJAX</td><td style="text-align:center">‘$.get (“…”) ‘</td><td style="text-align:right">Send Cookies</td><td style="text-align:left">Do Not Send</td></tr><tr><td style="text-align:left">Image</td><td style="text-align:center">‘&lt; img src = “…” &gt;’</td><td style="text-align:right">Send cookies</td><td style="text-align:left">Do not send</td></tr></tbody></table></div><p>After setting’Strict ‘or’Lax’, CSRF attacks are basically eliminated. Of course, the premise is that the user’s browser supports the SameSite attribute.</p><h3 id="None"><a href="#None" class="headerlink" title="None"></a>None</h3><p>Chrome plan to make’Lax ‘the default setting. At this time, websites can choose to explicitly turn off the’SameSite’ attribute and set it to’None ‘. However, the premise is that the’Secure’ attribute must also be set (cookies can only be sent over the HTTPS protocol), otherwise it will be invalid.</p><p>The following settings are invalid.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: widget_session=abc123; SameSite=None</span><br></pre></td></tr></table></figure><p>The following settings are valid.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: widget_session=abc123; SameSite=None; Secure</span><br></pre></td></tr></table></figure><p>Reference link:</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.cn/post/6877496781505200142">https://juejin.cn/post/6877496781505200142</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html">https://www.ruanyifeng.com/blog/2019/09/cookie-samesite.html</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/586529c7/" title="Cookies and the Same Site">https://sunra.top/en/posts/586529c7/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/7a3d3c75/" rel="prev" title="JavaScript Execution Mechanism (5) Clarifying Prototype Chain with Formulas"><i class="fa fa-chevron-left"></i> JavaScript Execution Mechanism (5) Clarifying Prototype Chain with Formulas</a></div><div class="post-nav-item"> <a href="/en/posts/a97149cb/" rel="next" title="Mathematics for Programmers (1) Iterative Method and Mathematical Induction Method">Mathematics for Programmers (1) Iterative Method and Mathematical Induction Method<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/586529c7/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>