<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="If you want to understand the difference between arrow function and ordinary function and anonymous function, you must first clarify three concepts, prototype chain, scope, and context. These three co"><meta property="og:type" content="article"><meta property="og:title" content="JavaScript arrow function exploration"><meta property="og:url" content="https://sunra.top/en/posts/376816af/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="If you want to understand the difference between arrow function and ordinary function and anonymous function, you must first clarify three concepts, prototype chain, scope, and context. These three co"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2019-12-13T13:15:08.000Z"><meta property="article:modified_time" content="2024-02-07T08:26:25.596Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/posts/376816af/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/376816af/","path":"posts/376816af/","title":"JavaScript arrow function exploration"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>JavaScript arrow function exploration | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-concepts"><span class="nav-number">1.</span> <span class="nav-text">Basic concepts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Prototype-chain"><span class="nav-number">1.1.</span> <span class="nav-text">Prototype chain</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#prototype"><span class="nav-number">1.1.1.</span> <span class="nav-text">prototype</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#proto"><span class="nav-number">1.1.2.</span> <span class="nav-text">proto</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#constructor-NaN"><span class="nav-number">1.1.3.</span> <span class="nav-text">constructor</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Examples-and-prototypes"><span class="nav-number">1.1.4.</span> <span class="nav-text">Examples and prototypes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Prototype-of-prototype"><span class="nav-number">1.1.5.</span> <span class="nav-text">Prototype of prototype</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Prototype-chain-1"><span class="nav-number">1.1.6.</span> <span class="nav-text">Prototype chain</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scope"><span class="nav-number">1.2.</span> <span class="nav-text">Scope</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Context"><span class="nav-number">1.3.</span> <span class="nav-text">Context</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Type-of-execution-context"><span class="nav-number">1.3.1.</span> <span class="nav-text">Type of execution context</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#The"><span class="nav-number">1.3.2.</span> <span class="nav-text">The</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#This"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">**This</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Lexical-environment"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">Lexical environment</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Variable-environment"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">Variable environment:</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Arrow-function-exploration"><span class="nav-number">2.</span> <span class="nav-text">Arrow function exploration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Difference-between-arrow-function-and-anonymous-function"><span class="nav-number">2.1.</span> <span class="nav-text">Difference between arrow function and anonymous function</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Difference-between-normal-function-and-arrow-function"><span class="nav-number">2.2.</span> <span class="nav-text">Difference between normal function and arrow function</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#The-arrow-function-this-points-to"><span class="nav-number">2.2.1.</span> <span class="nav-text">The arrow function this points to:</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">1.</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">2.</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">3.</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4"><span class="nav-number">2.2.1.4.</span> <span class="nav-text">4.</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5"><span class="nav-number">2.2.1.5.</span> <span class="nav-text">5.</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Arrow-function-has-no-arguments-inside"><span class="nav-number">2.2.2.</span> <span class="nav-text">Arrow function has no arguments inside</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Arrow-functions-cannot-use-yield-command"><span class="nav-number">2.2.3.</span> <span class="nav-text">Arrow functions cannot use yield command</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/376816af/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="JavaScript arrow function exploration | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> JavaScript arrow function exploration</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2019-12-13 21:15:08" itemprop="dateCreated datePublished" datetime="2019-12-13T21:15:08+08:00">2019-12-13</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-02-07 16:26:25" itemprop="dateModified" datetime="2024-02-07T16:26:25+08:00">2024-02-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/376816af/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/376816af/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>If you want to understand the difference between arrow function and ordinary function and anonymous function, you must first clarify three concepts, prototype chain, scope, and context. These three concepts are very important and easy to confuse.</p><p>In general, the scope describes the scope of the variable, the prototype chain describes what path we follow to find a variable, and the context mostly refers to who this is, and getting a variable through this does not look up like the prototype chain.</p><span id="more"></span><p>The part about prototype chain and scope is intercepted<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/mqyqingfeng/Blog">这篇博客</a>Part of the content, and add some personal understanding and explanation</p><h2 id="Basic-concepts"><a href="#Basic-concepts" class="headerlink" title="Basic concepts"></a>Basic concepts</h2><h3 id="Prototype-chain"><a href="#Prototype-chain" class="headerlink" title="Prototype chain"></a>Prototype chain</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;Ray&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>) <span class="comment">// Kevin</span></span><br></pre></td></tr></table></figure><p>In the above code, Person is a constructor function (there is no special class and constructor function in js, as long as you can call a function through new, this function can be a constructor function). We create an instance of Person person through new, and add an attribute name to this instance.</p><p>However, if we create a new Person, there will be no name attribute in this new instance.</p><p>So how do we make every instance of Person have a name attribute?</p><p>The answer is to write the name attribute on the prototype</p><h4 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h4><p>Each function has a prototype property</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Although it is written in the comments, you should pay attention to:</span></span><br><span class="line"><span class="comment">//prototype is a property that only functions have</span></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&#x27;Kevin&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> person1 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1.<span class="property">name</span>) <span class="comment">// Kevin</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person2.<span class="property">name</span>) <span class="comment">// Kevin</span></span><br></pre></td></tr></table></figure><p>The prototype of this function refers to an object, which is the prototype of the instance created by calling the constructor function, that is, the common prototype of all instances created by constructing the function</p><h4 id="proto"><a href="#proto" class="headerlink" title="proto"></a><strong>proto</strong></h4><p>This is a property that every JavaScript object (except null) has, called <strong>proto</strong>, which points to the prototype of the object.</p><p>To prove this, we can type in Firefox or Google:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">__proto__</span> = <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h4><p>Prototypes cannot point to constructors, because a constructor can generate multiple instances, but prototypes do point to constructors, which brings us to the third property: constructor. Every prototype has a constructor property that points to the associated constructor function.</p><p>To verify this, we can try:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span> = <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="Examples-and-prototypes"><a href="#Examples-and-prototypes" class="headerlink" title="Examples and prototypes"></a>Examples and prototypes</h4><p>When reading the properties of an instance, if it cannot be found, it will look for the properties in the prototype associated with the object. If it cannot be found, it will go to the prototype of the prototype, all the way to the top level.</p><p>For example:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&#x27;Kevin&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&#x27;Daisy&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>) <span class="comment">// Daisy</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> person.<span class="property">name</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>) <span class="comment">// Kevin</span></span><br></pre></td></tr></table></figure><p>In this example, we add the name attribute to the instance object person, and when we print the person.name, the result is Daisy.</p><p>But when we delete the name property of person, read person.name, can not find the name property from the person object will be from the prototype of the person is person.<strong>proto</strong>, that is, Person.prototype to find, fortunately we found the name property, the result is Kevin.</p><h4 id="Prototype-of-prototype"><a href="#Prototype-of-prototype" class="headerlink" title="Prototype of prototype"></a>Prototype of prototype</h4><p>Earlier, we have said that the prototype is also an object. Since it is an object, we can create it in the most primitive way, that is:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var obj = new Object();</span><br><span class="line">obj.name = &#x27;Kevin&#x27;</span><br><span class="line">console.log(obj.name) // Kevin</span><br></pre></td></tr></table></figure><p>In fact, the prototype object is generated by the Object constructor function. Combined with the previous discussion, the <strong>proto</strong> of the instance points to the prototype of the constructor function, so we update the relationship diagram:</p><h4 id="Prototype-chain-1"><a href="#Prototype-chain-1" class="headerlink" title="Prototype chain"></a>Prototype chain</h4><p>What about the prototype of Object.prototype?</p><p>Null, we can print:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(Object.prototype.__proto__ = null) // true</span><br></pre></td></tr></table></figure><p>But what exactly does null represent? Null means “no object”, that is, there should be no value there.</p><p>So the value of Object.prototype.<strong>proto</strong> is null and Object.prototype has no prototype, which actually expresses a meaning.</p><p>So when searching for properties, you can stop searching when you find Object.prototype.</p><p>The chain structure composed of interrelated prototypes in the figure is the prototype chain, which is the rightmost line.</p><h3 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h3><p>The scope refers to the area where variables are defined in the program source code.</p><p>The scope specifies how to find a variable, that is, determine the access permission of the current executable code to the variable.</p><p>JavaScript uses lexical scoping, which is static scoping.</p><p>Because JavaScript uses lexical scope, the scope of a function is determined when the function is defined.</p><p>The opposite of lexical scope is dynamic scope. The scope of a function is determined only when the function is called.</p><p>Let’s take a closer look at an example to understand the difference:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> value = <span class="number">2</span>;</span><br><span class="line">    <span class="title function_">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">bar</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//The result is???</span></span><br></pre></td></tr></table></figure><p>Assuming that JavaScript uses static scope, let’s analyze the execution process.</p><p>Execute foo function, first from the inside of foo function to find if there is a local variable value, if not, according to the writing position, find the code of the above layer, that is, value is equal to 1, so the result will print 1.</p><p>Assuming that JavaScript uses dynamic scope, let’s analyze the execution process.</p><p>Execute the foo function and still look for the local variable value from inside the foo function. If not, look for the value variable from the scope of the calling function, that is, inside the bar function, so the result will print 2.</p><p>As we mentioned earlier, JavaScript uses static scope, so the result of this example is 1.</p><h3 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h3><p>The contextual explanation is a translated blog of a foreign boss, which is<a target="_blank" rel="external nofollow noopener noreferrer" href="https://blog.bitsrc.io/understanding-execution-context-and-execution-stack-in-javascript-1c9ea8642dd0">链接</a></p><p>Execution context is an abstract concept of the environment in which JavaScript code is evaluated and executed. Whenever Javascript code is running, it runs in the execution context.</p><h4 id="Type-of-execution-context"><a href="#Type-of-execution-context" class="headerlink" title="Type of execution context"></a>Type of execution context</h4><p>There are three types of execution context in JavaScript.</p><ul><li> <strong>Global Execution Context</strong> - This is the default or base context, any code that is not inside the function is in the global context. It will do two things: create a global window object (in the case of browsers), and set the value of’this’ to be equal to this global object. There will only be one global execution context in a program.</li><li> <strong>Function Execution Context</strong> - Whenever a function is called, a new context is created for that function. Each function has its own execution context, but it is created when the function is called. Function contexts can have any number of them. Whenever a new execution context is created, it performs a series of steps in the defined order (discussed later).</li><li> <strong>Eval function execution context</strong> - The code executed inside the’eval ‘function will also have its own execution context,</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;Hello World!&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">first</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Inside first function&#x27;</span>);</span><br><span class="line">  <span class="title function_">second</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Again inside first function&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">second</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Inside second function&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">first</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Inside Global Execution Context&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>When the above code loads in the browser, the JavaScript engine creates a global execution context and pushes it into the current execution stack. When encountering a’first () ‘function call, the JavaScript engine creates a new execution context for the function and pushes it to the top of the current execution stack.</p><p>When the second () function is called from inside the first () function, the JavaScript engine creates a new execution context for the second () function and pushes it to the top of the current execution stack. When the second () function finishes executing, its execution context pops up from the current stack and the control flow reaches the next execution context, that of the first () function.</p><p>When’first () ‘finishes executing, its execution context pops up from the stack and the control flow reaches the global execution context. Once all the code has been executed, the JavaScript engine removes the global execution context from the current stack.</p><p>Now let’s understand how the JavaScript engine creates execution contexts.</p><p>There are two stages in creating an execution context: <strong>1) the creation stage</strong> and <strong>2) the execution stage</strong> .</p><h4 id="The"><a href="#The" class="headerlink" title="The"></a>The</h4><p>Before the JavaScript code executes, the execution context will go through the creation phase. Three things happen during the creation phase:</p><ol><li>The determination of the value of <strong>this</strong> , known as <strong>This binding</strong> .</li><li>Create the Lexical Environment component.</li><li>Create a variable environment component.</li></ol><p>Therefore, the execution context is conceptually represented as follows:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ExecutionContext</span> = &#123;</span><br><span class="line">  <span class="title class_">ThisBinding</span> = <span class="language-xml"><span class="tag">&lt;<span class="name">this</span> <span class="attr">value</span>&gt;</span>,</span></span><br><span class="line"><span class="language-xml">  LexicalEnvironment = &#123; ... &#125;,</span></span><br><span class="line"><span class="language-xml">  VariableEnvironment = &#123; ... &#125;,</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure><h5 id="This"><a href="#This" class="headerlink" title="**This"></a>**This</h5><p>In the global execution context, the value of this refers to the global object. (In the browser, this refers to the Window object.)</p><p>In the context of function execution, the value of’this’ depends on how the function is called. If it is called by a reference object, then’this’ will be set to that object, otherwise the value of’this’ will be set to a global object or’undefined ‘ (in strict mode). For example:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = &#123;</span><br><span class="line">  <span class="attr">baz</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Foo</span>.<span class="property">baz</span> (); <span class="comment">// &#x27; this&#x27;quotes&#x27;foo &#x27;, because&#x27;baz&#x27; is</span></span><br><span class="line">             <span class="comment">//object&#x27;foo &#x27;call</span></span><br><span class="line"><span class="keyword">let</span> bar = foo.<span class="property">baz</span>;</span><br><span class="line"><span class="title class_">Bar</span> (); <span class="comment">// &#x27; this&#x27; points to the global window object because</span></span><br><span class="line">             <span class="title class_">No</span> reference object is specified</span><br></pre></td></tr></table></figure><h5 id="Lexical-environment"><a href="#Lexical-environment" class="headerlink" title="Lexical environment"></a>Lexical environment</h5><p><a target="_blank" rel="external nofollow noopener noreferrer" href="http://ecma-international.org/ecma-262/6.0/">官方的 ES6</a> 文档把词法环境定义为</p><blockquote><p> <strong>Lexical Environment</strong> is a canonical type, based on</p></blockquote><p>Simply put, a Lexical Environment is a structure that holds an identifier, a variable map. (The identifier here refers to the name of the variable/function, and the variable is a reference to the actual object [containing object of type function] or the original data source).</p><p>Now, inside the Lexical Environment there are two components: (1) the Environment Recorder and (2) a reference to the External Environment.</p><ol><li>The environment logger is the actual place where variable and function declarations are stored.</li><li>A reference to an external environment means that it has access to its parent lexical environment (scope).</li></ol><p>There are two types of Lexical Environments:</p><ul><li> <strong>The global environment</strong> (in the global execution context) is a lexical environment without an external environment reference. The external environment reference of the global environment is <strong>null</strong> . It has built-in Object/Array/etc., prototype functions in the environment logger (associated with global objects, such as window objects), and any user-defined global variables, and the value of’this’ refers to the global object.</li><li>In the function environment, user-defined variables inside the function are stored in the environment logger. And the referenced external environment may be the global environment, or any external function that contains this internal function.</li></ul><p> <strong>Ambient loggers</strong> are also available in two types (as above!):</p><ol><li>Declarative Environment Logger stores variables, functions, and parameters.</li><li>The object environment logger is used to define the relationships between variables and functions that appear in the global context.</li></ol><p>In short,</p><ul><li>In the global environment, the environment logger is the object environment logger.<br>In the function environment, the environment logger is a declarative environment logger.</li></ul><p>Note that for the function environment, the declarative environment logger also contains an arguments object passed to function (which stores the mapping of indexes and parameters) and a length of the arguments passed to function.</p><p>In the abstract, the lexical environment looks like this in pseudocode:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">GlobalExectionContext</span> = &#123;</span><br><span class="line">  <span class="title class_">LexicalEnvironment</span>: &#123;</span><br><span class="line">    <span class="title class_">EnvironmentRecord</span>: &#123;</span><br><span class="line">      <span class="title class_">Type</span>: <span class="string">&quot;Object&quot;</span>,</span><br><span class="line">      <span class="comment">//Bind the identifier here</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">outer</span>: &lt;<span class="literal">null</span>&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">FunctionExectionContext</span> = &#123;</span><br><span class="line">  <span class="title class_">LexicalEnvironment</span>: &#123;</span><br><span class="line">    <span class="title class_">EnvironmentRecord</span>: &#123;</span><br><span class="line">      <span class="title class_">Type</span>: <span class="string">&quot;Declarative&quot;</span>,</span><br><span class="line">      <span class="comment">//Bind the identifier here</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">outer</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Global</span> <span class="attr">or</span> <span class="attr">outer</span> <span class="attr">function</span> <span class="attr">environment</span> <span class="attr">reference</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  &#125;</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure><h5 id="Variable-environment"><a href="#Variable-environment" class="headerlink" title="Variable environment:"></a>Variable environment:</h5><p>It is also a lexical environment, and its environment logger holds the binding relationships created by variable declaration statements in the execution context.</p><p>As mentioned above, the variable environment is also a lexical environment, so it has all the properties of the lexical environment defined above.</p><p>In ES6, one difference between Lexical Environment components and Variable Environment components is that the former is used to store function declarations and variable (let and const) bindings, while the latter is only used to store var variable bindings.</p><p>Let’s look at some sample code to understand the above concept.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">var</span> c;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">multiply</span>(<span class="params">e, f</span>) &#123;</span><br><span class="line"> <span class="keyword">var</span> g = <span class="number">20</span>;</span><br><span class="line"> <span class="keyword">return</span> e * f * g;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">c = <span class="title function_">multiply</span>(<span class="number">20</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure><p>The execution context looks like this:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">GlobalExectionContext</span> = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">ThisBinding</span>: &lt;Global Object&gt;,</span><br><span class="line"></span><br><span class="line">  LexicalEnvironment: &#123;</span><br><span class="line">    EnvironmentRecord: &#123;</span><br><span class="line">      Type: &quot;Object&quot;,</span><br><span class="line">      //Bind the identifier here</span><br><span class="line">      a: &lt; uninitialized &gt;,</span><br><span class="line">      b: &lt; uninitialized &gt;,</span><br><span class="line">      multiply: &lt; func &gt;</span><br><span class="line">    &#125;</span><br><span class="line">    outer: &lt;null&gt;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  VariableEnvironment: &#123;</span><br><span class="line">    EnvironmentRecord: &#123;</span><br><span class="line">      Type: &quot;Object&quot;,</span><br><span class="line">      //Bind the identifier here</span><br><span class="line">      c: undefined,</span><br><span class="line">    &#125;</span><br><span class="line">    outer: &lt;null&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">FunctionExectionContext = &#123;</span><br><span class="line">  ThisBinding: &lt;Global Object&gt;,</span><br><span class="line"></span><br><span class="line">  LexicalEnvironment: &#123;</span><br><span class="line">    EnvironmentRecord: &#123;</span><br><span class="line">      Type: &quot;Declarative&quot;,</span><br><span class="line">      //Bind the identifier here</span><br><span class="line">      Arguments: &#123;0: 20, 1: 30, length: 2&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    outer: &lt;GlobalLexicalEnvironment&gt;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">VariableEnvironment: &#123;</span><br><span class="line">    EnvironmentRecord: &#123;</span><br><span class="line">      Type: &quot;Declarative&quot;,</span><br><span class="line">      //Bind the identifier here</span><br><span class="line">      g: undefined</span><br><span class="line">    &#125;,</span><br><span class="line">    outer: &lt;GlobalLexicalEnvironment&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <strong>Note</strong> - The function execution context will only be created when calling function’multiply ‘.</p><p>You may have noticed that the variables defined by’let ‘and’const’ do not have any associated values, but the variables defined by’var ‘are set to’undefined’.</p><p>This is because during the creation phase, the engine examines the code to find variable and function declarations. Although the function declaration is completely stored in the environment, the variable is initially set to’undefined ‘ (in the case of’var’), or uninitialized (in the case of’let ‘and’const’).</p><p>This is why you can access variables defined by’var ‘before declaration (although it is’undefined’), but accessing variables defined by’let ‘and’const’ before declaration will result in a reference error.</p><p>This is what we call variable declaration promotion.</p><h2 id="Arrow-function-exploration"><a href="#Arrow-function-exploration" class="headerlink" title="Arrow function exploration"></a>Arrow function exploration</h2><h3 id="Difference-between-arrow-function-and-anonymous-function"><a href="#Difference-between-arrow-function-and-anonymous-function" class="headerlink" title="Difference between arrow function and anonymous function"></a>Difference between arrow function and anonymous function</h3><p>Arrow function looks like a shorthand for anonymous function, but in fact, there is a clear difference between arrow function and anonymous function: the’this’ inside arrow function is lexical scope, determined by context.</p><p>Looking back at the previous example, due to the incorrect handling of the’this’ binding by the JavaScript function, the following example does not get the expected result:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">birth</span>: <span class="number">1990</span>,</span><br><span class="line">    <span class="attr">getAge</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="variable language_">this</span>.<span class="property">birth</span>; <span class="comment">// 1990</span></span><br><span class="line">        <span class="keyword">var</span> fn = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>() - <span class="variable language_">this</span>.<span class="property">birth</span>; <span class="comment">// this指向window或undefined</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fn</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>Now, the arrow function completely fixes the pointing of’this’, which always points to the lexical scope, i.e. the outer caller’obj ‘:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">birth</span>: <span class="number">1990</span>,</span><br><span class="line">    <span class="attr">getAge</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="variable language_">this</span>.<span class="property">birth</span>; <span class="comment">// 1990</span></span><br><span class="line">        <span class="keyword">var</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>() - <span class="variable language_">this</span>.<span class="property">birth</span>; <span class="comment">// this指向obj对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fn</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="title function_">getAge</span>(); <span class="comment">// 25</span></span><br></pre></td></tr></table></figure><p>If you use the arrow function, the previous hack is written:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br></pre></td></tr></table></figure><p>It’s no longer needed.</p><p>Since’this’ is already bound in lexical scope in arrow function, when calling arrow function with’call () ‘or’apply () ‘, ‘this’ cannot be bound, i.e. the first parameter passed in is ignored:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">birth</span>: <span class="number">1990</span>,</span><br><span class="line">    <span class="attr">getAge</span>: <span class="keyword">function</span> (<span class="params">year</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="variable language_">this</span>.<span class="property">birth</span>; <span class="comment">// 1990</span></span><br><span class="line">        <span class="keyword">var</span> <span class="title function_">fn</span> = (<span class="params">y</span>) =&gt; y - <span class="variable language_">this</span>.<span class="property">birth</span>; <span class="comment">// this.birth仍是1990</span></span><br><span class="line">        <span class="keyword">return</span> fn.<span class="title function_">call</span>(&#123;<span class="attr">birth</span>:<span class="number">2000</span>&#125;, year);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="title function_">getAge</span>(<span class="number">2015</span>); <span class="comment">// 25</span></span><br></pre></td></tr></table></figure><h3 id="Difference-between-normal-function-and-arrow-function"><a href="#Difference-between-normal-function-and-arrow-function" class="headerlink" title="Difference between normal function and arrow function"></a>Difference between normal function and arrow function</h3><h4 id="The-arrow-function-this-points-to"><a href="#The-arrow-function-this-points-to" class="headerlink" title="The arrow function this points to:"></a>The arrow function this points to:</h4><h5 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">a</span> = (<span class="params"></span>) =&gt; &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="property"><span class="keyword">prototype</span></span>);  <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h5 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h5><blockquote><p>The definition here refers not to the definition code when we code, but to the definition in memory when we actually run to the location where the function is defined</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Let</span> a, barObj = &#123;<span class="attr">msg</span>: <span class="string">&#x27;bar this points to&#x27;</span>&#125;;</span><br><span class="line">fooObj = &#123;<span class="attr">msg</span>: <span class="string">&#x27;foo this points to&#x27;</span>&#125;;</span><br><span class="line">bar.<span class="property">call</span> (barObj);<span class="comment">//point this of bar to barObj</span></span><br><span class="line">foo.<span class="property">call</span> (fooObj);<span class="comment">//point foo&#x27;s this to fooObj</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  A (); <span class="comment">// result: &#123;msg: &#x27;bar this points to&#x27;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  a = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Console</span>.<span class="property">log</span> (<span class="variable language_">this</span>, <span class="string">&#x27;this refers to the first normal function &#x27;</span>); <span class="comment">// </span></span><br><span class="line">  &#125;;<span class="comment">//define this in bar inherits from the this point of the bar function</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In the above code, the arrow function a is defined in the bar function, which is executed in foo, so the object passed in when the bar.call () is executed is the object pointed to by the arrow function this, because the arrow function is defined when the bar.call is executed, and this time The outer function of the arrow function is called to barObj.</p><h5 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Let</span> fnObj = &#123;<span class="attr">msg</span>: <span class="string">&#x27;Attempt to change the this point of the arrow function directly&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  a.<span class="property">call</span> (fnObj);<span class="comment">//result: &#123;msg: &#x27;bar this points to&#x27;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Can only be changed by recalling the defined outer function and changing the this pointing of the outer function</p><h5 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h5><h5 id="5"><a href="#5" class="headerlink" title="5."></a>5.</h5><h4 id="Arrow-function-has-no-arguments-inside"><a href="#Arrow-function-has-no-arguments-inside" class="headerlink" title="Arrow function has no arguments inside"></a>Arrow function has no arguments inside</h4><h4 id="Arrow-functions-cannot-use-yield-command"><a href="#Arrow-functions-cannot-use-yield-command" class="headerlink" title="Arrow functions cannot use yield command"></a>Arrow functions cannot use yield command</h4><p>Reference article</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/post/5c76972af265da2dc4538b64">https://juejin.im/post/5c76972af265da2dc4538b64</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/mqyqingfeng/Blog">https://github.com/mqyqingfeng/Blog</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/post/5ba32171f265da0ab719a6d7">https://juejin.im/post/5ba32171f265da0ab719a6d7</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/376816af/" title="JavaScript arrow function exploration">https://sunra.top/en/posts/376816af/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/52b6d429/" rel="prev" title="Promise Source Code Analysis"><i class="fa fa-chevron-left"></i> Promise Source Code Analysis</a></div><div class="post-nav-item"> <a href="/en/posts/303b575/" rel="next" title="NAT and Intranet Penetration">NAT and Intranet Penetration<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/376816af/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>