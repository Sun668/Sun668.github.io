<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="After we package Unity into an apk in il2cpp + release mode, the internal code will be packaged into a so file. This thing is actually the format of the Linux dynamic link library, which corresponds t"><meta property="og:type" content="article"><meta property="og:title" content="Unity Android Symbol Table Parsing Crash Log"><meta property="og:url" content="https://sunra.top/en/posts/12560/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="After we package Unity into an apk in il2cpp + release mode, the internal code will be packaged into a so file. This thing is actually the format of the Linux dynamic link library, which corresponds t"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2022-04-02T13:42:41.000Z"><meta property="article:modified_time" content="2023-08-13T02:19:43.232Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/posts/12560/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/12560/","path":"posts/12560/","title":"Unity Android Symbol Table Parsing Crash Log"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Unity Android Symbol Table Parsing Crash Log | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Save-files-during-packaging-so"><span class="nav-number">1.</span> <span class="nav-text">Save files during packaging so</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Use-the-saved-so-to-parse-the-log"><span class="nav-number">2.</span> <span class="nav-text">Use the saved so to parse the log</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/12560/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Unity Android Symbol Table Parsing Crash Log | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Unity Android Symbol Table Parsing Crash Log</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-04-02 21:42:41" itemprop="dateCreated datePublished" datetime="2022-04-02T21:42:41+08:00">2022-04-02</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2023-08-13 10:19:43" itemprop="dateModified" datetime="2023-08-13T10:19:43+08:00">2023-08-13</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/12560/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/12560/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>After we package Unity into an apk in il2cpp + release mode, the internal code will be packaged into a so file. This thing is actually the format of the Linux dynamic link library, which corresponds to the DLL of Windows or the dylib of Mac. It can also be called a symbol table on the android side, because it will store the correspondence between the virtual memory address and the assembly code internally.</p><p>After packaging in this way, it will reduce our package size and help our code to protect against plagiarism, but it will also cause us developers to not understand the error message, because these error messages are virtual memory addresses, not The name of the function, so how do we read the error message that occurs online?</p><span id="more"></span><p>In fact, we just said that this so file is not only a dynamic link library, but also saves the mapping relationship between the virtual memory address and the function, so we need to read these error messages and use this dynamic link library.</p><p>Let’s talk about how to use this so</p><h2 id="Save-files-during-packaging-so"><a href="#Save-files-during-packaging-so" class="headerlink" title="Save files during packaging so"></a>Save files during packaging so</h2><p>Packaging android project, we can choose to export directly as apk or export as gradle project, if we pack the apk, check the packaging setting’Create Symbols.zip ‘, it will be in the apk directory of the same level to save all the so files</p><p>If we choose to export as a gradle project, and the architecture choice is arm64-v8a, then our own code will be packaged as libil2cpp.so because we chose il2cpp, and stored as a dynamic link library in the unityLibrary/src/main/jniLibs/arm64-v8a of the gradle project</p><blockquote><p>Here to explain this path, if familiar with Android development colleagues will be very sensitive to this path, this path is basically the ordinary Android project default dynamic link library path, jniLibs, taken apart is jni</p></blockquote><p>In addition to our own code will be packaged into libil2cpp.so, unity’s own engine code, or the code of third-party packages, will also be packaged into various so files, such as libunity.so, but these files are not in this directory, we have two places to find these so files, one is unityLibrary/src/symbols/arm64-v8a, and the other is in the Unity project/Temp/StagingArea/libs/below, we need to copy them after packaging.</p><p>It should be noted here that if you use the editor to manually build, then manually copy it, but if it is packaged through the command line batchmode, you should pay attention that if you want the BuildPlayer method to run and then copy it, you can’t get it, because once the editor is closed, the Temp folder will be deleted.</p><p>At this time we need to use the PostProcessBuildAttribute hook, after the Build is completed, add a logic to save before exiting the editor.</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> UnityEditor.Callbacks;</span><br><span class="line"><span class="keyword">using</span> UnityEditor;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PostProcessBuild</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">PostProcessBuildAttribute()</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">OnPostprocessBuild</span>(<span class="params">BuildTarget target, <span class="built_in">string</span> pathToBuiltProject</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (target  BuildTarget.Android)</span><br><span class="line">            PostProcessAndroidBuild(pathToBuiltProject);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PostProcessAndroidBuild</span>(<span class="params"><span class="built_in">string</span> pathToBuiltProject</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        UnityEditor.ScriptingImplementation backend = UnityEditor.PlayerSettings.GetScriptingBackend(UnityEditor.BuildTargetGroup.Android);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (backend  UnityEditor.ScriptingImplementation.IL2CPP)</span><br><span class="line">        &#123;</span><br><span class="line">            CopyARMSymbols (<span class="string">&quot;armeabi-v7a&quot;</span>);</span><br><span class="line">            CopyARMSymbols(<span class="string">&quot;arm64-v8a&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CopyARMSymbols</span>(<span class="params"><span class="built_in">string</span> target</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">string</span> libpath = <span class="string">&quot;/Temp/StagingArea/libs/&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> sourcePath = Directory.GetCurrentDirectory() + libpath + <span class="string">$&quot;<span class="subst">&#123;target&#125;</span>/&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> desPath = Directory.GetCurrentDirectory() + <span class="string">$&quot;/Build/android/unityLibrary/symbols/<span class="subst">&#123;target&#125;</span>&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (!Directory.Exists(desPath))</span><br><span class="line">        &#123;</span><br><span class="line">            Directory.CreateDirectory(desPath);</span><br><span class="line">        &#125;</span><br><span class="line">        CopyDirectory(sourcePath, desPath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">CopyDirectory</span>(<span class="params"><span class="built_in">string</span> sourcePath, <span class="built_in">string</span> targetPath</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (System.IO.Directory.Exists(sourcePath))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">string</span>[] files = System.IO.Directory.GetFiles(sourcePath);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Copy the files and overwrite destination files if they already exist.</span></span><br><span class="line">            <span class="keyword">foreach</span> (<span class="built_in">string</span> s <span class="keyword">in</span> files)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// Use static Path methods to extract only the file name from the path.</span></span><br><span class="line">                <span class="keyword">var</span> fileName = System.IO.Path.GetFileName(s);</span><br><span class="line">                <span class="keyword">var</span> destFile = System.IO.Path.Combine(targetPath, fileName);</span><br><span class="line">                Debug.Log(<span class="string">$&quot;fileName: <span class="subst">&#123;fileName&#125;</span>, destFile: <span class="subst">&#123;destFile&#125;</span>&quot;</span>);</span><br><span class="line">                System.IO.File.Copy(s, destFile, <span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">&quot;Source path does not exist!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Use-the-saved-so-to-parse-the-log"><a href="#Use-the-saved-so-to-parse-the-log" class="headerlink" title="Use the saved so to parse the log"></a>Use the saved so to parse the log</h2><p>With so, we can parse logs that are all addresses.</p><p>Because this is actually the dynamic link library of android, the analysis needs to use the android tool: addr2line. I directly used the android tool installed by unity, and depending on the architecture, I need to use different tools, because mine is arm64-v8a. What I use is aarch64-linux-android-addr2line. The specific path is different for each person’s computer, just find it</p><p>We can directly run it on the command line.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aarch64-linux-android-addr2line -f -C -e libil2cpp.so 日志中的地址</span><br></pre></td></tr></table></figure><p>Of course, you can also do this through code, because parsing line by line is very laborious, I only use lib2cpp.so and libunity.so here</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">OutCrash</span>(<span class="params">filename, version, target</span>):</span><br><span class="line">	</span><br><span class="line">	addr2linePath = <span class="string">&quot;/Applications/Unity/Hub/Editor/2020.3.20f1/PlaybackEngines/AndroidPlayer/NDK/toolchains/llvm/prebuilt/darwin-x86_64/bin/aarch64-linux-android-addr2line -f -C -e &quot;</span></span><br><span class="line">	il2cppdebugsoPath = <span class="string">&quot;/Users/bytedance/Desktop/Unity/Android/symbols/&quot;</span> + version + <span class="string">&quot;/&quot;</span> + target + <span class="string">&quot;/libil2cpp.so &quot;</span></span><br><span class="line">	unitydebugsoPath = <span class="string">&quot;/Users/bytedance/Desktop/Unity/Android/symbols/&quot;</span> + version + <span class="string">&quot;/&quot;</span> + target + <span class="string">&quot;/libunity.so &quot;</span></span><br><span class="line">	</span><br><span class="line">	f = <span class="built_in">open</span>(filename,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">	logstr = f.readlines()</span><br><span class="line">	il2cppflag = <span class="string">&#x27;libil2cpp&#x27;</span></span><br><span class="line">	unityflag = <span class="string">&#x27;libunity&#x27;</span></span><br><span class="line">	crashEndFlag = <span class="string">&#x27;libunity.so\n&#x27;</span></span><br><span class="line">	<span class="keyword">for</span> log <span class="keyword">in</span> logstr:</span><br><span class="line">		OutCmd(log,addr2linePath,crashEndFlag,unitydebugsoPath)</span><br><span class="line">		OutCmd (log, addr2linePath, il2cppflag, il2cppdebugsoPath)</span><br><span class="line">		OutCmd(log,addr2linePath,unityflag,unitydebugsoPath)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">OutCmd</span>(<span class="params">log,addr2linePath,debugFlagStr,debugsoPath</span>):</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span> log.endswith(debugFlagStr):</span><br><span class="line">		startIndex = log.index(<span class="string">&#x27; pc &#x27;</span>)</span><br><span class="line">		endflag = log.index(<span class="string">r&#x27; /data/&#x27;</span>)</span><br><span class="line">		addstr = log[startIndex+<span class="number">4</span>:endflag]</span><br><span class="line">		<span class="built_in">print</span>(addstr)</span><br><span class="line">		cmdstr = addr2linePath +debugsoPath+addstr</span><br><span class="line">		os.system(cmdstr)</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		unitystart = log.find(debugFlagStr)</span><br><span class="line">		<span class="keyword">if</span> unitystart &gt;= <span class="number">0</span>:</span><br><span class="line">			unitylen = log.index(debugFlagStr)</span><br><span class="line">			unitylen = unitylen + <span class="built_in">len</span>(debugFlagStr) +<span class="number">1</span></span><br><span class="line">			endlen = log.find(<span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">			<span class="keyword">if</span> endlen &gt;= <span class="number">0</span>:</span><br><span class="line">				endIndex = log.index(<span class="string">&#x27;(&#x27;</span>) </span><br><span class="line">				addstr = log[unitylen:endIndex]</span><br><span class="line">				addstr = addstr.replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		</span><br><span class="line">				cmdstr = addr2linePath + debugsoPath +addstr</span><br><span class="line">				<span class="built_in">print</span>(addstr)</span><br><span class="line">				os.system(cmdstr)</span><br><span class="line"></span><br><span class="line">OutCrash(sys.argv[<span class="number">1</span>], sys.argv[<span class="number">2</span>], sys.argv[<span class="number">3</span>])</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/12560/" title="Unity Android Symbol Table Parsing Crash Log">https://sunra.top/en/posts/12560/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/12773/" rel="prev" title="Unity Memory Best Practices"><i class="fa fa-chevron-left"></i> Unity Memory Best Practices</a></div><div class="post-nav-item"> <a href="/en/posts/31918/" rel="next" title="Unity Performance optimization record (1) The use of performance analysis tools">Unity Performance optimization record (1) The use of performance analysis tools<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/12560/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>