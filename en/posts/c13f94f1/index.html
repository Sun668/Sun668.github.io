<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="After reading the official mongoDb documentation, the author sorted out the basic concepts, CRUD, and related operations"><meta property="og:type" content="article"><meta property="og:title" content="MongoDB Tutorails"><meta property="og:url" content="https://sunra.top/en/posts/c13f94f1/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="After reading the official mongoDb documentation, the author sorted out the basic concepts, CRUD, and related operations"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2019-09-20T00:08:41.000Z"><meta property="article:modified_time" content="2024-08-27T05:04:42.449Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/posts/c13f94f1/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/c13f94f1/","path":"posts/c13f94f1/","title":"MongoDB Tutorails"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>MongoDB Tutorails | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#overview"><span class="nav-number">1.</span> <span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#command"><span class="nav-number">2.</span> <span class="nav-text">Command</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#data"><span class="nav-number">3.</span> <span class="nav-text">Data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#document"><span class="nav-number">4.</span> <span class="nav-text">Document</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#projection"><span class="nav-number">5.</span> <span class="nav-text">Projection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#limiting"><span class="nav-number">6.</span> <span class="nav-text">Limiting</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sorting"><span class="nav-number">7.</span> <span class="nav-text">Sorting</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#indexing"><span class="nav-number">8.</span> <span class="nav-text">Indexing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#aggregate"><span class="nav-number">9.</span> <span class="nav-text">Aggregate</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pipeline"><span class="nav-number">9.1.</span> <span class="nav-text">Pipeline</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#replication"><span class="nav-number">10.</span> <span class="nav-text">Replication</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#set"><span class="nav-number">10.1.</span> <span class="nav-text">Set</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#example"><span class="nav-number">10.1.1.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#add"><span class="nav-number">10.2.</span> <span class="nav-text">Add</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#syntax"><span class="nav-number">10.2.1.</span> <span class="nav-text">Syntax</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#example-2"><span class="nav-number">10.2.2.</span> <span class="nav-text">Example</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/c13f94f1/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="MongoDB Tutorails | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> MongoDB Tutorails</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2019-09-20 08:08:41" itemprop="dateCreated datePublished" datetime="2019-09-20T08:08:41+08:00">2019-09-20</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-08-27 13:04:42" itemprop="dateModified" datetime="2024-08-27T13:04:42+08:00">2024-08-27</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Sundry/" itemprop="url" rel="index"><span itemprop="name">Sundry</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/c13f94f1/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/c13f94f1/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>After reading the official mongoDb documentation, the author sorted out the basic concepts, CRUD, and related operations</p><span id="more"></span><h2 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h2><table><thead><tr><th>RDBMS</th><th>MongoDB</th></tr></thead><tbody><tr><td>Database</td><td>Database</td></tr><tr><td>Table</td><td>Collection</td></tr><tr><td>Tuple/Row</td><td>Document</td></tr><tr><td>column</td><td>Field</td></tr><tr><td>Table Join</td><td>Embedded Documents</td></tr><tr><td>Primary Key</td><td>Primary Key (Default key _id provided by mongodb itself)</td></tr></tbody></table><h2 id="command"><a class="markdownIt-Anchor" href="#command"></a> Command</h2><ol><li><p>create databse or return the exists database</p><p>use DATABSE_NAME</p></li><li><p>check the current database</p><p>db</p></li><li><p>check the database lists</p><p>show dbs</p></li><li><p>new created db will not show when you use “show dbs” command, you need to insert at least on document into it</p><p>db.movie.insert({“name”: “tutorialspoints”})</p></li><li><p>dropdatabse</p><p>db.dropDatabse()</p><p>this will delete the selected databse, it not, it will delete the default ‘test’ databse</p></li><li><p>create collection</p><p>db.createCollection(name, options)</p></li></ol><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Name</td><td>String</td><td>Name of the collection to be created</td></tr><tr><td>Options</td><td>Document</td><td>(Optional) Specify options about memory size and indexing</td></tr></tbody></table><p>Options parameter is optional, so you need to specify only the name of the collection. Following is the list of options you can use −</p><table><thead><tr><th style="text-align:center">Field</th><th style="text-align:center">Type</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">capped</td><td style="text-align:center">Boolean</td><td style="text-align:center">(Optional) If true, enables a capped collection. Capped collection is a fixed size collection that automatically overwrites its oldest entries when it reaches its maximum size. <strong>If you specify true, you need to specify size parameter also.</strong></td></tr><tr><td style="text-align:center">autoIndexId</td><td style="text-align:center">Boolean</td><td style="text-align:center">(Optional) If true, automatically create index on _id field.s Default value is false.</td></tr><tr><td style="text-align:center">size</td><td style="text-align:center">number</td><td style="text-align:center">(Optional) Specifies a maximum size in bytes for a capped collection. <strong>If capped is true, then you need to specify this field also.</strong></td></tr><tr><td style="text-align:center">max</td><td style="text-align:center">number</td><td style="text-align:center">(Optional) Specifies the maximum number of documents allowed in the capped collection.</td></tr></tbody></table><p>example: db.createCollection(“mycollection”)</p><ol start="7"><li><p>check the created collection</p><p>show collections</p></li><li><p>mongodb can create collection automatically, when you insert some document</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.tutorialspoint.insert(&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;tutorialspoint&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p>drop collection</p><p>db.collection.drop() is used to drop a collection from the database</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.drop()</span><br></pre></td></tr></table></figure></li></ol><h2 id="data"><a class="markdownIt-Anchor" href="#data"></a> Data</h2><ol><li>String</li><li>Integer</li><li>Boolean</li><li>Double</li><li>Min/Max keys: This type is used to compare a value against the lowest and highest BSON elements</li><li>Arrays</li><li>Timestamp</li><li>Object</li><li>Null</li><li>Symbol: This datatype is used identically to a string, however, it’s generally reserved for languages that use a specific symbol type.</li><li>Date</li><li>Object ID: used to store the document’s ID</li><li>Binary data</li><li>Code: use to store JavaScript code into the document</li><li>Regular expression</li></ol><h2 id="document"><a class="markdownIt-Anchor" href="#document"></a> Document</h2><ol><li><p>insert method</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.insert(document)</span><br></pre></td></tr></table></figure><p>example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.insert(&#123;</span><br><span class="line">   _id: ObjectId(<span class="number">7</span>df78ad8902c),</span><br><span class="line">   title: <span class="string">&#x27;MongoDB Overview&#x27;</span>, </span><br><span class="line">   description: <span class="string">&#x27;MongoDB is no sql database&#x27;</span>,</span><br><span class="line">   by: <span class="string">&#x27;tutorials point&#x27;</span>,</span><br><span class="line">   url: <span class="string">&#x27;http://www.tutorialspoint.com&#x27;</span>,</span><br><span class="line">   keywords: [<span class="string">&#x27;mongodb&#x27;</span>, <span class="string">&#x27;database&#x27;</span>, <span class="string">&#x27;NoSQL&#x27;</span>],</span><br><span class="line">   likes: <span class="number">100</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>if we don’t specify the _id parameter, the MongoDB assgin a unique ObjectId for this document, _id is 12 bytes hexadecimal number unique for every document in a collection, 12 bytes are divided as follows:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_id: ObjectId(<span class="number">4</span> bytes timestamp, <span class="number">3</span> bytes machine id, <span class="number">2</span> bytes process id, </span><br><span class="line">   <span class="number">3</span> bytes incrementer)</span><br></pre></td></tr></table></figure></li><li><p>insert multiple</p><p>To insert multiple documents in a single query, we can pass an array of documents in insert command</p><p>example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">db.post.insert([</span><br><span class="line">   &#123;</span><br><span class="line">      title: <span class="string">&#x27;MongoDB Overview&#x27;</span>, </span><br><span class="line">      description: <span class="string">&#x27;MongoDB is no sql database&#x27;</span>,</span><br><span class="line">      by: <span class="string">&#x27;tutorials point&#x27;</span>,</span><br><span class="line">      url: <span class="string">&#x27;http://www.tutorialspoint.com&#x27;</span>,</span><br><span class="line">      keywords: [<span class="string">&#x27;mongodb&#x27;</span>, <span class="string">&#x27;database&#x27;</span>, <span class="string">&#x27;NoSQL&#x27;</span>],</span><br><span class="line">      likes: <span class="number">100</span></span><br><span class="line">   &#125;,</span><br><span class="line">	</span><br><span class="line">   &#123;</span><br><span class="line">      title: <span class="string">&#x27;NoSQL Database&#x27;</span>, </span><br><span class="line">      description: <span class="string">&quot;NoSQL database doesn&#x27;t have tables&quot;</span>,</span><br><span class="line">      by: <span class="string">&#x27;tutorials point&#x27;</span>,</span><br><span class="line">      url: <span class="string">&#x27;http://www.tutorialspoint.com&#x27;</span>,</span><br><span class="line">      keywords: [<span class="string">&#x27;mongodb&#x27;</span>, <span class="string">&#x27;database&#x27;</span>, <span class="string">&#x27;NoSQL&#x27;</span>],</span><br><span class="line">      likes: <span class="number">20</span>, </span><br><span class="line">      comments: [	</span><br><span class="line">         &#123;</span><br><span class="line">            user:<span class="string">&#x27;user1&#x27;</span>,</span><br><span class="line">            message: <span class="string">&#x27;My first comment&#x27;</span>,</span><br><span class="line">            dateCreated: new Date(<span class="number">2013</span>,<span class="number">11</span>,<span class="number">10</span>,<span class="number">2</span>,<span class="number">35</span>),</span><br><span class="line">            like: <span class="number">0</span> </span><br><span class="line">         &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>To insert the document you can also use db.COLLECTION_NAME.save .</p><p>But if you specify the _id, it will replace the whole data with the specified _id</p></li><li><p>Query document</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.find()</span><br></pre></td></tr></table></figure><p>find() method will display all documents in a non-structured way</p><p>if you want to display the result in a formatted way, we can use pretty method</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.find().pretty()</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">Operation</th><th style="text-align:center">Syntax</th><th style="text-align:center">Example</th><th style="text-align:center">RDBMS Equivalent</th></tr></thead><tbody><tr><td style="text-align:center">Equality</td><td style="text-align:center">{<key>:<value>}</value></key></td><td style="text-align:center">db.mycol.find({“by”:“tutorials point”}).pretty()</td><td style="text-align:center">where by = ‘tutorials point’</td></tr><tr><td style="text-align:center">Less Than</td><td style="text-align:center">{<key>:{$lt:<value>}}</value></key></td><td style="text-align:center">db.mycol.find({“likes”:{$lt:50}}).pretty()</td><td style="text-align:center">where likes &lt; 50</td></tr><tr><td style="text-align:center">Less Than Equals</td><td style="text-align:center">{<key>:{$lte:<value>}}</value></key></td><td style="text-align:center">db.mycol.find({“likes”:{$lte:50}}).pretty()</td><td style="text-align:center">where likes &lt;= 50</td></tr><tr><td style="text-align:center">Greater Than</td><td style="text-align:center">{<key>:{$gt:<value>}}</value></key></td><td style="text-align:center">db.mycol.find({“likes”:{$gt:50}}).pretty()</td><td style="text-align:center">where likes &gt; 50</td></tr><tr><td style="text-align:center">Greater Than Equals</td><td style="text-align:center">{<key>:{$gte:<value>}}</value></key></td><td style="text-align:center">db.mycol.find({“likes”:{$gte:50}}).pretty()</td><td style="text-align:center">where likes &gt;= 50</td></tr><tr><td style="text-align:center">Not Equals</td><td style="text-align:center">{<key>:{$ne:<value>}}</value></key></td><td style="text-align:center">db.mycol.find({“likes”:{$ne:50}}).pretty()</td><td style="text-align:center">where likes != 50</td></tr></tbody></table><p><strong>AND</strong> in the find method, if you pass multiple keys by separating them by ‘,’, then mongoDB treats it as AND condition, following is the basic syntax of and. example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.find(&#123;$and:[&#123;<span class="string">&quot;by&quot;</span>:<span class="string">&quot;tutorials point&quot;</span>&#125;,&#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;MongoDB Overview&quot;</span>&#125;]&#125;).pretty()</span><br></pre></td></tr></table></figure><p><strong>OR</strong> example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.find(&#123;$or:[&#123;<span class="string">&quot;by&quot;</span>:<span class="string">&quot;tutorials point&quot;</span>&#125;,&#123;<span class="string">&quot;title&quot;</span>: <span class="string">&quot;MongoDB Overview&quot;</span>&#125;]&#125;).pretty()</span><br></pre></td></tr></table></figure><p>USE <strong>AND</strong> and <strong>OR</strong> together</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.find(&#123;<span class="string">&quot;likes&quot;</span>: &#123;$gt:<span class="number">10</span>&#125;, $or: [&#123;<span class="string">&quot;by&quot;</span>: <span class="string">&quot;tutorials point&quot;</span>&#125;,</span><br></pre></td></tr></table></figure><p>Equivalent SQL where clause is <strong>‘where likes&gt;10 AND (by = ‘tutorials point’ OR title = ‘MongoDB Overview’)’</strong></p></li><li><p>Update Document</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.update(SELECTION_CRITERIA, UPDATED_DATA)</span><br></pre></td></tr></table></figure><p>example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.update(&#123;<span class="string">&#x27;title&#x27;</span>:<span class="string">&#x27;MongoDB Overview&#x27;</span>&#125;,&#123;$<span class="built_in">set</span>:&#123;<span class="string">&#x27;title&#x27;</span>:<span class="string">&#x27;New MongoDB Tutorial&#x27;</span>&#125;&#125;)</span><br></pre></td></tr></table></figure><p>by default, MongoDB will update only a single document, To update multiple documents, you need to set a parameter ‘multi’ to true, example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.update(&#123;<span class="string">&#x27;title&#x27;</span>:<span class="string">&#x27;MongoDB Overview&#x27;</span>&#125;,&#123;$<span class="built_in">set</span>:&#123;<span class="string">&#x27;title&#x27;</span>:<span class="string">&#x27;New MongoDB Tutorial&#x27;</span>&#125;&#125;,&#123;multi:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure><p><strong>save</strong> method can also update the data</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.save(&#123;_id:ObjectId(),NEW_DATA&#125;)</span><br></pre></td></tr></table></figure><p>example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.save(</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="string">&quot;_id&quot;</span> : ObjectId(<span class="number">5983548781331</span>adf45ec5), <span class="string">&quot;title&quot;</span>:<span class="string">&quot;Tutorials Point New Topic&quot;</span>,</span><br><span class="line">      <span class="string">&quot;by&quot;</span>:<span class="string">&quot;Tutorials Point&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p>Delete Document</p><p>MongoDB’s <strong>remove()</strong> method is used to remove a document from the collection. remove() method accepts two parameters. One is deletion criteria and second is justOne flag.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.remove(DELLETION_CRITTERIA)  <span class="comment">//remove sepecified</span></span><br><span class="line">db.COLLECTION_NAME.remove(DELETION_CRITERIA,<span class="number">1</span>) <span class="comment">//remove one</span></span><br><span class="line">db.mycol.remove(&#123;&#125;)  <span class="comment">//remove all</span></span><br></pre></td></tr></table></figure><p>example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.remove(&#123;<span class="string">&#x27;title&#x27;</span>:<span class="string">&#x27;MongoDB Overview&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure></li></ol><h2 id="projection"><a class="markdownIt-Anchor" href="#projection"></a> Projection</h2><p>In the MongoDB, projection means selecting only the necessary data rather than selecting whole of the data of a document.</p><p>MongoDB’s find method accept second optional parameter that is list of fields that you want to retrieve. In MongoDB, we can set a list of fields with value 1 or 0, 1 is used to show the fields</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.find(&#123;&#125;,&#123;KEY: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="limiting"><a class="markdownIt-Anchor" href="#limiting"></a> Limiting</h2><p><strong>limit</strong> method accept one number type argument, which is the number of documents that you want to display</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.find().limit(NUMBER)</span><br></pre></td></tr></table></figure><p><strong>skip</strong> method can accept number type argument and is used to skip the number of documents</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.find().limit(NUMBER).skip(NUMBER)</span><br></pre></td></tr></table></figure><p>example: following example will display only the second document</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.find(&#123;&#125;, &#123;&quot;title&quot;: 1, _id: 0&#125;).limit(1).skip(1)</span><br></pre></td></tr></table></figure><h2 id="sorting"><a class="markdownIt-Anchor" href="#sorting"></a> Sorting</h2><p><strong>sort</strong> method accepts a document containing a list of fields along with their sorting order. To specify sorting order 1 and -1 are used. 1 is used for ascending order while -1 is used for descending order.(default ascending order)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.find().sort(&#123;KEY:<span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure><p>example:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.find(&#123;&#125;,&#123;<span class="string">&quot;title&quot;</span>:<span class="number">1</span>,_id:<span class="number">0</span>&#125;).sort(&#123;<span class="string">&quot;title&quot;</span>:<span class="number">-1</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="indexing"><a class="markdownIt-Anchor" href="#indexing"></a> Indexing</h2><p>indexing support the efficient resolution of queries. Without indexes, MongoDB must scan every document of a collection to select those documents that match the query statement.</p><p>Indexes are special data structures, that store a small portion of data set in an easy-to-traverse form. The index stores the value of a specific field or set of fields, ordered by the value of the field as specified in the index.</p><p>Syntax:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.ensureIndex(&#123;KEY: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure><p>key is the name of the field on which you want to create index and 1 is for ascending order</p><p>example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.ensureIndex(&#123;&quot;title&quot;:1&#125;)</span><br></pre></td></tr></table></figure><p>we can also specify multiple fields:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.ensureIndex(&#123;&quot;title&quot;:1,&quot;description&quot;:-1&#125;)</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">Parameter</th><th style="text-align:center">Type</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td style="text-align:center">background</td><td style="text-align:center">Boolean</td><td style="text-align:center">Builds the index in the background so that building an index does not block other database activities. Specify true to build in the background. The default value is <strong>false</strong>.</td></tr><tr><td style="text-align:center">unique</td><td style="text-align:center">Boolean</td><td style="text-align:center">Creates a unique index so that the collection will not accept insertion of documents where the index key or keys match an existing value in the index. Specify true to create a unique index. The default value is <strong>false</strong>.</td></tr><tr><td style="text-align:center">name</td><td style="text-align:center">string</td><td style="text-align:center">The name of the index. If unspecified, MongoDB generates an index name by concatenating the names of the indexed fields and the sort order.</td></tr><tr><td style="text-align:center">dropDups</td><td style="text-align:center">Boolean</td><td style="text-align:center">Creates a unique index on a field that may have duplicates. MongoDB indexes only the first occurrence of a key and removes all documents from the collection that contain subsequent occurrences of that key. Specify true to create unique index. The default value is <strong>false</strong>.</td></tr><tr><td style="text-align:center">sparse</td><td style="text-align:center">Boolean</td><td style="text-align:center">If true, the index only references documents with the specified field. These indexes use less space but behave differently in some situations (particularly sorts). The default value is <strong>false</strong>.</td></tr><tr><td style="text-align:center">expireAfterSeconds</td><td style="text-align:center">integer</td><td style="text-align:center">Specifies a value, in seconds, as a TTL to control how long MongoDB retains documents in this collection.</td></tr><tr><td style="text-align:center">v</td><td style="text-align:center">index version</td><td style="text-align:center">The index version number. The default index version depends on the version of MongoDB running when creating the index.</td></tr><tr><td style="text-align:center">weights</td><td style="text-align:center">document</td><td style="text-align:center">The weight is a number ranging from 1 to 99,999 and denotes the significance of the field relative to the other indexed fields in terms of the score.</td></tr><tr><td style="text-align:center">default_language</td><td style="text-align:center">string</td><td style="text-align:center">For a text index, the language that determines the list of stop words and the rules for the stemmer and tokenizer. The default value is <strong>english</strong>.</td></tr><tr><td style="text-align:center">language_override</td><td style="text-align:center">string</td><td style="text-align:center">For a text index, specify the name of the field in the document that contains, the language to override the default language. The default value is language.</td></tr></tbody></table><h2 id="aggregate"><a class="markdownIt-Anchor" href="#aggregate"></a> Aggregate</h2><p>Aggregate operations process data records and return computed results. Aggregate operations group values from multiple documents together, and can perform a variety of operations on the grouped data to return a single result. In SQL count(*) and with group by is an equivalent of mongodb aggregation</p><p>Syntax</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.COLLECTION_NAME.aggreagate(AGGREGATE_OPERATION)</span><br></pre></td></tr></table></figure><p>example:</p><p>if we have the following data</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   _id<span class="punctuation">:</span> ObjectId(<span class="number">7</span>df78ad8902c)</span><br><span class="line">   title<span class="punctuation">:</span> &#x27;MongoDB Overview&#x27;<span class="punctuation">,</span> </span><br><span class="line">   description<span class="punctuation">:</span> &#x27;MongoDB is no sql database&#x27;<span class="punctuation">,</span></span><br><span class="line">   by_user<span class="punctuation">:</span> &#x27;tutorials point&#x27;<span class="punctuation">,</span></span><br><span class="line">   url<span class="punctuation">:</span> &#x27;http<span class="punctuation">:</span><span class="comment">//www.tutorialspoint.com&#x27;,</span></span><br><span class="line">   keywords<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;mongodb&#x27;<span class="punctuation">,</span> &#x27;database&#x27;<span class="punctuation">,</span> &#x27;NoSQL&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">   likes<span class="punctuation">:</span> <span class="number">100</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   _id<span class="punctuation">:</span> ObjectId(<span class="number">7</span>df78ad8902d)</span><br><span class="line">   title<span class="punctuation">:</span> &#x27;NoSQL Overview&#x27;<span class="punctuation">,</span> </span><br><span class="line">   description<span class="punctuation">:</span> &#x27;No sql database is very fast&#x27;<span class="punctuation">,</span></span><br><span class="line">   by_user<span class="punctuation">:</span> &#x27;tutorials point&#x27;<span class="punctuation">,</span></span><br><span class="line">   url<span class="punctuation">:</span> &#x27;http<span class="punctuation">:</span><span class="comment">//www.tutorialspoint.com&#x27;,</span></span><br><span class="line">   keywords<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;mongodb&#x27;<span class="punctuation">,</span> &#x27;database&#x27;<span class="punctuation">,</span> &#x27;NoSQL&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">   likes<span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   _id<span class="punctuation">:</span> ObjectId(<span class="number">7</span>df78ad8902e)</span><br><span class="line">   title<span class="punctuation">:</span> &#x27;Neo4j Overview&#x27;<span class="punctuation">,</span> </span><br><span class="line">   description<span class="punctuation">:</span> &#x27;Neo4j is no sql database&#x27;<span class="punctuation">,</span></span><br><span class="line">   by_user<span class="punctuation">:</span> &#x27;Neo4j&#x27;<span class="punctuation">,</span></span><br><span class="line">   url<span class="punctuation">:</span> &#x27;http<span class="punctuation">:</span><span class="comment">//www.neo4j.com&#x27;,</span></span><br><span class="line">   keywords<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;neo4j&#x27;<span class="punctuation">,</span> &#x27;database&#x27;<span class="punctuation">,</span> &#x27;NoSQL&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">   likes<span class="punctuation">:</span> <span class="number">750</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>if we want to display a list stating how many tutorials are written by each user</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.mycol.aggregate([&#123;$group: &#123;_id: <span class="string">&#x27;$by_user&#x27;</span>, num_tutorial: &#123;$sum: <span class="number">1</span>&#125;&#125;&#125;])</span><br></pre></td></tr></table></figure><p>is equal to <strong>select by_user, count(*) from mycol group by by_user</strong>.</p><p>in the above example, we have grouped documents by fields <strong>by_user</strong> and on each occurrence of by_user previous value of sum is incremented. Following is a list of available aggregation expressions.</p><table><thead><tr><th style="text-align:center">Expression</th><th style="text-align:center">Description</th><th style="text-align:center">Example</th></tr></thead><tbody><tr><td style="text-align:center">$sum</td><td style="text-align:center">Sums up the defined value from all documents in the collection.</td><td style="text-align:center">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, num_tutorial : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">sum : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">&quot;</span></span></span></span>likes&quot;}}}])</td></tr><tr><td style="text-align:center">$avg</td><td style="text-align:center">Calculates the average of all given values from all documents in the collection.</td><td style="text-align:center">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, num_tutorial : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>v</mi><mi>g</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">avg : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.19444em"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:.03588em">v</span><span class="mord mathnormal" style="margin-right:.03588em">g</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">&quot;</span></span></span></span>likes&quot;}}}])</td></tr><tr><td style="text-align:center">$min</td><td style="text-align:center">Gets the minimum of the corresponding values from all documents in the collection.</td><td style="text-align:center">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, num_tutorial : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">min : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.65952em;vertical-align:0"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">&quot;</span></span></span></span>likes&quot;}}}])</td></tr><tr><td style="text-align:center">$max</td><td style="text-align:center">Gets the maximum of the corresponding values from all documents in the collection.</td><td style="text-align:center">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, num_tutorial : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">max : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">&quot;</span></span></span></span>likes&quot;}}}])</td></tr><tr><td style="text-align:center">$push</td><td style="text-align:center">Inserts the value to an array in the resulting document.</td><td style="text-align:center">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, url : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>u</mi><mi>s</mi><mi>h</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">push: &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">&quot;</span></span></span></span>url&quot;}}}])</td></tr><tr><td style="text-align:center">$addToSet</td><td style="text-align:center">Inserts the value to an array in the resulting document but does not create duplicates.</td><td style="text-align:center">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, url : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>d</mi><mi>d</mi><mi>T</mi><mi>o</mi><mi>S</mi><mi>e</mi><mi>t</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">addToSet : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">&quot;</span></span></span></span>url&quot;}}}])</td></tr><tr><td style="text-align:center">$first</td><td style="text-align:center">Gets the first document from the source documents according to the grouping. Typically this makes only sense together with some previously applied “$sort”-stage.</td><td style="text-align:center">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, first_url : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">first : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">&quot;</span></span></span></span>url&quot;}}}])</td></tr><tr><td style="text-align:center">$last</td><td style="text-align:center">Gets the last document from the source documents according to the grouping. Typically this makes only sense together with some previously applied “$sort”-stage.</td><td style="text-align:center">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#039;}&#039;, got &#039;EOF&#039; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, last_url : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>a</mi><mi>s</mi><mi>t</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">last : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.01968em">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">:</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord">&quot;</span></span></span></span>url&quot;}}}])</td></tr></tbody></table><h3 id="pipeline"><a class="markdownIt-Anchor" href="#pipeline"></a> Pipeline</h3><p>In UNIX command, shell pipeline means the possibility to execute an operation on some input and use the output as the input for the next command and so on. MongoDB also supports same concept in aggregation framework. There is a set of possible stages and each of those is taken as a set of documents as an input and produces a resulting set of documents (or the final resulting JSON document at the end of the pipeline). This can then in turn be used for the next stage and so on.</p><p>Following are the possible stages in aggregation framework −</p><ul><li><strong>$project</strong> − Used to select some specific fields from a collection.</li><li><strong>$match</strong> − This is a filtering operation and thus this can reduce the amount of documents that are given as input to the next stage.</li><li><strong>$group</strong> − This does the actual aggregation as discussed above.</li><li><strong>$sort</strong> − Sorts the documents.</li><li><strong>$skip</strong> − With this, it is possible to skip forward in the list of documents for a given amount of documents.</li><li><strong>$limit</strong> − This limits the amount of documents to look at, by the given number starting from the current positions.</li><li><strong>$unwind</strong> − This is used to unwind document that are using arrays. When using an array, the data is kind of pre-joined and this operation will be undone with this to have individual documents again. Thus with this stage we will increase the amount of documents for the next stage.</li></ul><h2 id="replication"><a class="markdownIt-Anchor" href="#replication"></a> Replication</h2><p>Replication is the process of synchronizing data across multiple servers. Replication provides redundancy and increases data availability with multiple copies of data on different database servers. Replication protects a database from the loss of a single server. Replication also allows you to recover from hardware failure and service interruptions. With additional copies of the data, you can dedicate one to disaster recovery, reporting, or backup.</p><p>MongoDB achieves replication by the use of replica set. A replica set is a group of <strong>mongod</strong> instances that host the same data set. In a replica, one node is primary node that receives all write operations. All other instances, such as secondaries, apply operations from the primary so that they have the same data set. Replica set can have only one primary node.</p><ul><li>Replica set is a group of two or more nodes (generally minimum 3 nodes are required).</li><li>In a replica set, one node is primary node and remaining nodes are secondary.</li><li>All data replicates from primary to secondary node.</li><li>At the time of automatic failover or maintenance, election establishes for primary and a new primary node is elected.</li><li>After the recovery of failed node, it again join the replica set and works as a secondary node.</li></ul><h3 id="set"><a class="markdownIt-Anchor" href="#set"></a> Set</h3><p>In this tutorial, we will convert standalone MongoDB instance to a replica set. To convert to replica set, following are the steps −</p><ul><li>Shutdown already running MongoDB server.</li><li></li><li>Start the MongoDB server by specifying – replSet option. Following is the basic syntax of --replSet −</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --port &quot;PORT&quot; --dbpath &quot;YOUR_DB_DATA_PATH&quot; --replSet &quot;REPLICA_SET_INSTANCE_NAME&quot;</span><br></pre></td></tr></table></figure><h4 id="example"><a class="markdownIt-Anchor" href="#example"></a> Example</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --port 27017 --dbpath &quot;D:\set up\mongodb\data&quot; --replSet rs0</span><br></pre></td></tr></table></figure><ul><li>It will start a mongod instance with the name rs0, on port 27017.</li><li>Now start the command prompt and connect to this mongod instance.</li><li>In Mongo client, issue the command <strong>rs.initiate()</strong> to initiate a new replica set.</li><li>To check the replica set configuration, issue the command <strong>rs.conf()</strong>. To check the status of replica set issue the command <strong>rs.status()</strong>.</li></ul><h3 id="add"><a class="markdownIt-Anchor" href="#add"></a> Add</h3><p>To add members to replica set, start mongod instances on multiple machines. Now start a mongo client and issue a command <strong>rs.add()</strong>.</p><h4 id="syntax"><a class="markdownIt-Anchor" href="#syntax"></a> Syntax</h4><p>The basic syntax of <strong>rs.add()</strong> command is as follows −</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;rs.add(HOST_NAME:PORT) </span><br></pre></td></tr></table></figure><h4 id="example-2"><a class="markdownIt-Anchor" href="#example-2"></a> Example</h4><p>Suppose your mongod instance name is <strong><a target="_blank" rel="external nofollow noopener noreferrer" href="http://mongod1.net">mongod1.net</a></strong> and it is running on port <strong>27017</strong>. To add this instance to replica set, issue the command <strong>rs.add()</strong> in Mongo client.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;rs.add(&quot;mongod1.net:27017&quot;) </span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure><p>You can add mongod instance to replica set only when you are connected to primary node. To check whether you are connected to primary or not, issue the command <strong>db.isMaster()</strong> in mongo client.</p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/c13f94f1/" title="MongoDB Tutorails">https://sunra.top/en/posts/c13f94f1/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/dfdf7442/" rel="prev" title="ARP virus principle and defense"><i class="fa fa-chevron-left"></i> ARP virus principle and defense</a></div><div class="post-nav-item"> <a href="/en/posts/7f31b34d/" rel="next" title="Introduction to blockchain">Introduction to blockchain<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/c13f94f1/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>