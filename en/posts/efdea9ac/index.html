<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.17.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="Browser resource loading processLet’s start with two questions:  How does the browser know which resources should be loaded? In what order does the browser load these resources?  When the browser inte"><meta property="og:type" content="article"><meta property="og:title" content="Browser Rendering HTML Process"><meta property="og:url" content="https://sunra.top/en/posts/efdea9ac/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="Browser resource loading processLet’s start with two questions:  How does the browser know which resources should be loaded? In what order does the browser load these resources?  When the browser inte"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/1/5/160c40056914c841?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/1/5/160c40056936869b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><meta property="og:image" content="https://user-gold-cdn.xitu.io/2018/1/5/160c40056950e6f8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><meta property="article:published_time" content="2020-05-14T10:43:28.000Z"><meta property="article:modified_time" content="2023-07-22T10:15:23.851Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://user-gold-cdn.xitu.io/2018/1/5/160c40056914c841?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"><link rel="canonical" href="https://sunra.top/en/posts/efdea9ac/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/posts/efdea9ac/","path":"posts/efdea9ac/","title":"Browser Rendering HTML Process"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Browser Rendering HTML Process | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Browser-resource-loading-process"><span class="nav-number">1.</span> <span class="nav-text">Browser resource loading process</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Resource-classification"><span class="nav-number">1.1.</span> <span class="nav-text">Resource classification</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Security-policy-check"><span class="nav-number">1.2.</span> <span class="nav-text">Security policy check</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Resource-priority-calculation"><span class="nav-number">1.3.</span> <span class="nav-text">Resource priority calculation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Load-or-block-resources-according-to-the-security-policy-and-priority-calculated-above"><span class="nav-number">1.4.</span> <span class="nav-text">Load or block resources according to the security policy and priority calculated above.</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Browser-rendering-process"><span class="nav-number">2.</span> <span class="nav-text">Browser rendering process</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Critical-Render-Path"><span class="nav-number">2.1.</span> <span class="nav-text">Critical Render Path</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Blocking-Rendering-CSS"><span class="nav-number">2.2.</span> <span class="nav-text">** Blocking Rendering: CSS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CSS"><span class="nav-number">2.3.</span> <span class="nav-text">CSS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript"><span class="nav-number">2.4.</span> <span class="nav-text">JavaScript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Change-blocking-mode-defer"><span class="nav-number">2.5.</span> <span class="nav-text">** Change blocking mode: defer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#defer"><span class="nav-number">2.6.</span> <span class="nav-text">defer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#async"><span class="nav-number">2.7.</span> <span class="nav-text">async</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#document-createElement"><span class="nav-number">2.8.</span> <span class="nav-text">document.createElement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#document-write"><span class="nav-number">2.9.</span> <span class="nav-text">**document.write</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rearrangement-and-repaint"><span class="nav-number">3.</span> <span class="nav-text">Rearrangement and repaint</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Under-what-circumstances-will-rearrangement-and-redrawing-be-triggered"><span class="nav-number">3.1.</span> <span class="nav-text">Under what circumstances will rearrangement and redrawing be triggered?</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/posts/efdea9ac/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Browser Rendering HTML Process | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Browser Rendering HTML Process</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-05-14 18:43:28" itemprop="dateCreated datePublished" datetime="2020-05-14T18:43:28+08:00">2020-05-14</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2023-07-22 18:15:23" itemprop="dateModified" datetime="2023-07-22T18:15:23+08:00">2023-07-22</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Sundry/" itemprop="url" rel="index"><span itemprop="name">Sundry</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/posts/efdea9ac/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/posts/efdea9ac/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="Browser-resource-loading-process"><a href="#Browser-resource-loading-process" class="headerlink" title="Browser resource loading process"></a>Browser resource loading process</h2><p>Let’s start with two questions:</p><ul><li>How does the browser know which resources should be loaded?</li><li>In what order does the browser load these resources?</li></ul><p>When the browser intercepts a page, it will do the following four things in order</p><ol><li>First, all the resources that need to be loaded will be classified.</li><li>Then decide the loading permission of the resource according to the security policy related to the browser.</li><li>Then calculate and sort the loading priority of each resource.</li><li>The last step is to load resources according to the loading priority order.</li></ol><span id="more"></span><h3 id="Resource-classification"><a href="#Resource-classification" class="headerlink" title="Resource classification"></a>Resource classification</h3><p>Chrome browser will classify resources into 14 categories, as shown in the following table.</p><div class="table-container"><table><thead><tr><th>Type</th><th>Introduction</th></tr></thead><tbody><tr><td>kMainResource</td><td>is the main resource, html page file resources belong to this type</td></tr><tr><td>kImage</td><td>Various Image Resources</td></tr><tr><td>kCSSStyleSheet</td><td>As the name suggests, it is Cascading Style Sheet css resource</td></tr><tr><td>kScript</td><td>Script resources, such as js resources</td></tr><tr><td>kFont</td><td>Font resources, such as font sets commonly used in web pages. Woff resources</td></tr><tr><td>kRaw</td><td>Mixed-type resources, which are the most common ajax requests</td></tr><tr><td>kSVGDocument</td><td>SVG scalable vector graphics file resource</td></tr><tr><td>kXSLStyleSheet</td><td>Extended Stylesheet Language XSLT is a transformation language. You can refer to w3c XSL to learn about this type</td></tr><tr><td>kLinkPrefetch</td><td>Link prefetch for HTML5 pages, such as dns-prefetch. Details below</td></tr><tr><td>kTextTrack</td><td>subtitle resources for video, - ie “tags</td></tr><tr><td>kImportResource</td><td>HTML Imports, import an HTML file into another HTML doc, such as “. For more information, please refer to the relevant doc.</td></tr><tr><td>kMedia</td><td>Multimedia resources, both video or audio</td></tr><tr><td>kManifest</td><td>HTML5 Application Cache Resources</td></tr><tr><td>kMock</td><td>Reserved Test Types</td></tr></tbody></table></div><h3 id="Security-policy-check"><a href="#Security-policy-check" class="headerlink" title="Security policy check"></a>Security policy check</h3><p>Content Security Policy (CSP) is a Whitelist system provided by browsers. Developers improve the security of web pages by configuring it to tell the browser about loading and execution restrictions for various external resources. One of the most commonly used applications is to prevent XSS attacks by restricting the loading of untrusted domain name scripts. CSP can be configured in two ways. The first is to restrict through the Content-Security-Policy field in the HTTP request header of the page. As shown in the figure below, this is the request header of the www.google.com page:</p><p><img src="https://user-gold-cdn.xitu.io/2018/1/5/160c40056914c841?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="流程">流程</p><p>The second is to set it through the “tag.” is configured in the way of key-value. Here are a few specific application examples to introduce.</p><ol><li>To prevent XSS:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;script-src &#x27;self&#x27;; style-src nos.netease.com kaola.com;&quot;&gt;</span><br><span class="line">Copy the code</span><br></pre></td></tr></table></figure><p>The above’script-src ‘represents script resources;’ style-src ‘represents style resources;’ self ‘represents only trust foreign resources under the current domain name, and all resources under other domains will be intercepted;’ nos.netease.com kaola.com ‘represents trust nos.netease.com and kaola.com resources under these two domain names. So the meaning of the above label is: for script resources only trust the domain, for style resources, in addition to the domain will load nos.netease.com and kaola.com under these two domain names.</p><ol><li>For site request protocol upgrade transition (http to https):</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;Content-Secur****ity-Policy&quot; content=&quot;upgrade-insecure-requests&quot;&gt;</span><br><span class="line">Copy the code</span><br></pre></td></tr></table></figure><p>The meaning of’upgrade-insect-requests’ above is just like the literal meaning: upgrade all non-secure requests. When this meta tag is added, the browser will automatically upgrade all htttp in the https page to https. For example, when we need to transform the whole site from http to https, for a large number of original http resources, the request will be directly forced to send in SSL encryption such as https or wss without reporting an error. Of course, if the resource server does not support SSL encryption such as https, then the resource will not be loaded.</p><ol><li>Used to block Mixed Content:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;block-all-mixed-content&quot;&gt;</span><br><span class="line">Copy the code</span><br></pre></td></tr></table></figure><p>Mixed Content is the http request made in the https site mentioned in the second example. This type of mixed non-secure request content in a secure link is called mixed content. When such a request occurs, we can find the corresponding warning message in the browser Console, as shown in the figure below.</p><p><img src="https://user-gold-cdn.xitu.io/2018/1/5/160c40056936869b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="流程">流程</p><p>Mixed content will reduce the security and User Experience of HTTPS websites. However, it is slightly reassuring that browsers will directly block Blend Mode requests for resource types that may pose a greater threat to security, such as script resources, as shown in the figure below. However, for resources such as images, audio, video, etc., it will only warn, but will not prevent them from loading.</p><p><img src="https://user-gold-cdn.xitu.io/2018/1/5/160c40056950e6f8?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="流程">流程</p><p>For websites with extremely high security requirements, all types of non-secure link requests can be blocked by the above tags, so that resources including pictures, audio, video and so on will also be intercepted and reported errors. Of course, there are many other functions for the setting of Content-Security-Policy. You can use<a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/Security/CSP/Using_Content_Security_Policy">MDN</a>To learn more.</p><h3 id="Resource-priority-calculation"><a href="#Resource-priority-calculation" class="headerlink" title="Resource priority calculation"></a>Resource priority calculation</h3><p>The priority of resources is divided into <strong>5 levels</strong> . The naming and description of this <strong>5 level</strong> may be different on different materials. Mainly because the data itself may be from the <strong>network level</strong> , <strong>browser kernel</strong> or <strong>client console display</strong> one of these three directions. Although these three directions have different names for this <strong>5 level</strong> , they are all one-to-one correspondence. <strong>Network level</strong> , 5 levels are: Highest, Medium, Low, Lowest, Idle; <strong>Browser kernel</strong> , 5 levels are: VeryHigh, High, Medium, Low, VeryLow; <strong>Client Console Display</strong> , 5 levels are: Highest, High, Medium, Low, Lowest;</p><p>The following is a research direction based on the browser kernel to introduce the resource priority calculation process of the browser:</p><ul><li>The first step is to set the default priority according to the type of resource. For each type of resource browser, there is a default loading priority rule:</li></ul><ol><li>html, css, font these three types of resources have the highest priority;</li><li>Then the preload resource (via<a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Preloading_content">``</a>Tag preload), script, xhr request;</li><li>Followed by pictures, voice, and video;</li><li>The lowest is<a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Link_prefetching_FAQ">prefetch</a>Pre-read resources.</li></ol><ul><li>The second step is to adjust the priority according to certain actual rules. After the initial priority is set, the browser will adjust the priority according to the actual properties of the resource and the location in the doc to determine the final loading priority order. Adjustment rules for several common resource types are as follows:</li></ul><ol><li>For <strong>XHR requests</strong> resources: Adjust the priority of <strong>synchronous XHR requests</strong> to the highest. XHR requests can be divided into synchronous requests and asynchronous requests, and the browser will raise the priority of synchronous requests to the highest level in order to obtain data as soon as possible and speed up the display of the page.</li><li>For <strong>image</strong> resources: The priority will be changed according to whether the image is in the visible view. The default priority of image resources is Low. In order to improve the user’s first screen experience, modern browsers will calculate whether the image resource is in the first screen visible view when rendering. If so, the priority of this part of the image in viewport resource will be raised to High.</li><li>For <strong>script</strong> resources: The browser will divide the script into three categories according to its location and attribute tab, and set the priority separately. First, the priority of scripts with defer/async attribute tab added will all be reduced to Low. Then, for scripts without this attribute added, they can be divided into two categories according to whether the position of the script in the doc is before or after the first image displayed by the browser. Before ‘ (marked early <strong>) ‘ it will be set to High priority, after ‘ (marked late</strong> ) ‘ it will be set to Medium priority.</li></ol><h3 id="Load-or-block-resources-according-to-the-security-policy-and-priority-calculated-above"><a href="#Load-or-block-resources-according-to-the-security-policy-and-priority-calculated-above" class="headerlink" title="Load or block resources according to the security policy and priority calculated above."></a>Load or block resources according to the security policy and priority calculated above.</h3><h2 id="Browser-rendering-process"><a href="#Browser-rendering-process" class="headerlink" title="Browser rendering process"></a>Browser rendering process</h2><h3 id="Critical-Render-Path"><a href="#Critical-Render-Path" class="headerlink" title=" Critical Render Path "></a> <strong>Critical Render Path</strong></h3><p>When it comes to page rendering, there are several concepts that are very relevant, the most important is the critical rendering path, and several other concepts can be expanded from it, which is explained slightly below.</p><p>Critical Rendering Path refers to the content related to the current user operation. For example, when a user just opens a page, the first screen display is the content related to the current user operation, specifically, the browser receives resources such as HTML, CSS, and JavaScript and processes them to render a web page.</p><p>Understanding the process and principle of browser rendering is largely to optimize the critical rendering path, but optimization should be a solution to specific problems, so there are no fixed rules for optimization. For example, in order to ensure the fastest display of the first screen content, progressive page rendering is usually mentioned, but in order to progressive page rendering, resources need to be split, so what granularity to split, whether to split, different pages, different scenes strategy is different. The determination of specific solutions should consider not only experience issues, but also engineering issues.</p><p>From a time-consuming perspective, the browser requests, loads, and renders a page, and the time is spent below<a href="http://link.zhihu.com/?target=https%3A//developers.google.com/speed/docs/insights/mobile" rel="external nofollow noopener noreferrer" target="_blank">五件事情</a>Above:</p><ol><li>DNS query</li><li>TCP connection</li><li>HTTP requests are responses</li><li>Server response</li><li>Client Rendering</li></ol><p>This article discusses the fifth part, that is, the rendering of content by the browser. This part (render tree construction, layout, and rendering) can be divided into the following<a href="http://link.zhihu.com/?target=https%3A//developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction" rel="external nofollow noopener noreferrer" target="_blank">五个步骤</a>：</p><ol><li>Process HTML tags and build DOM tree.</li><li>Process CSS tags and build CSSOM trees.</li><li>Merge DOM and CSSOM into one render tree.</li><li>Layout according to the rendering tree to calculate the geometry information of each node.</li><li>Draw each node onto the screen.</li></ol><p>It’s important to understand that these five steps are not necessarily done in order at once. If the DOM or CSSOM is modified, the above process needs to be repeated in order to calculate which pixels need to be re-rendered on the screen. In real pages, CSS and JavaScript tend to modify the DOM and CSSOM multiple times. Here’s a look at how they affect it.</p><h3 id="Blocking-Rendering-CSS"><a href="#Blocking-Rendering-CSS" class="headerlink" title="** Blocking Rendering: CSS"></a>** Blocking Rendering: CSS</h3><p>When talking about blocking of resources, we should be clear that modern browsers always load resources in parallel. For example, when the HTML parser (HTML Parser) is blocked by a script, although the parser will stop building the DOM, it will still recognize the resource behind the script and preload it.</p><p>At the same time, due to the following two points:</p><ol><li>By default, CSS is treated as a rendering-blocking resource, which means that the browser will not render any processed content until the CSSOM is built.</li><li>JavaScript can read and modify not only DOM properties, but also CSSOM properties.</li></ol><p>When there are blocking CSS resources, the browser will delay the execution of JavaScript and DOM construction. In addition:</p><p>When the browser encounters a script tag, the DOM build will pause until the script finishes executing.</p><ol><li>JavaScript can query and modify DOM and CSSOM.</li><li>When CSSOM is built, JavaScript execution will pause until CSSOM is ready.</li></ol><p>Therefore, the position of the script tag is very important. In actual use, you can follow the following two principles:</p><ol><li>CSS first: In the introduction order, CSS resources come before JavaScript resources.</li><li>JavaScript should affect the construction of the DOM as little as possible.</li></ol><p>Browsers are evolving faster and faster (the current official stable version of the Chrome is 61), and the specific rendering strategy will continue to evolve, but after understanding these principles, you can figure out the logic of its evolution. Let’s take a look at how CSS and JavaScript specifically block resources.</p><h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a><strong>CSS</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> <span class="selector-tag">p</span> &#123; <span class="attribute">color</span>: red; &#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;index.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Such link tags (whether inline or not) will be treated as blocking rendering resources, and the browser will prioritize these CSS resources until the CSSOM is built.</p><p>In the critical rendering path of Render-Tree, it is required to have both DOM and CSSOM before building the render tree. That is, both HTML and CSS are rendering-blocking resources. HTML is obviously necessary, because the content, including the text we want to display, is stored in the DOM, so we can figure it out from CSS.</p><p>The easiest thing to think of is of course to simplify CSS and provide it as soon as possible. In addition, you can also use media types and media queries to unblock rendering.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href=&quot;index.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">&lt;link href=&quot;print.css&quot; rel=&quot;stylesheet&quot; media=&quot;print&quot;&gt;</span><br><span class="line">&lt;link href=&quot;other.css&quot; rel=&quot;stylesheet&quot; media=&quot;(min-width: 30em) and (orientation: landscape)&quot;&gt;</span><br></pre></td></tr></table></figure><p>The first resource will load and block.<br>The second resource sets the media type, loads but does not block, and the print declaration is only used when printing web pages.<br>The third resource provides media queries that block rendering when conditions are met.</p><h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a><strong>JavaScript</strong></h3><p>The situation with JavaScript is a bit more complicated than CSS. Observe the following code:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Do not go gentle into that good night,<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;inline&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Old age should burn and rave at close of day;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;app.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Rage, rage against the dying of the light.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Do not go gentle into that good night,<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;app.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Old age should burn and rave at close of day;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;inline&quot;</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Rage, rage against the dying of the light.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Such script tags will block HTML parsing, whether inline-script or not. The above P tag will be parsed from top to bottom, and this process will be planned (loaded and executed) by two JavaScript paragraphs respectively.</p><p>So in practical projects, we often put resources at the bottom of the doc.</p><h3 id="Change-blocking-mode-defer"><a href="#Change-blocking-mode-defer" class="headerlink" title="** Change blocking mode: defer"></a>** Change blocking mode: defer</h3><p>Why put the defer and async methods of script loading later? Because these two methods appear, all due to the existence of the blocking conditions mentioned earlier. In other words, defer and async methods can change the previous blocking situations.</p><p>First, note that the async and defer attributes are not valid for inline-script, so the code for the three script tags in the following example will be executed from top to bottom.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;! -- output 1 2 3 in top-to-bottom order -- &gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;2&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;3&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Therefore, the content discussed in the following two sections is for script tags with the src attribute set.</p><h3 id="defer"><a href="#defer" class="headerlink" title="defer"></a><strong>defer</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;app1.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;app2.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;app3.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The defer attribute indicates the delayed execution of the introduced JavaScript, that is, the HTML does not stop parsing when the JavaScript is loaded, and the two processes are parallel. After the entire document is parsed and the transfer-script is loaded (the order of these two things is independent), all JavaScript code loaded by the transfer-script will be executed, and then the DOMContentLoaded event will be triggered.</p><p>Defer does not change the execution order of the code in the script, and the sample code will be executed in the order of 1, 2, and 3. Therefore, there are two differences between defer and ordinary scripts: the HTML parsing is not blocked when loading JavaScript files, and the execution stage is placed after the HTML tag parsing is completed.</p><h3 id="async"><a href="#async" class="headerlink" title="async"></a><strong>async</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;app.js&quot;</span> <span class="attr">async</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;ad.js&quot;</span> <span class="attr">async</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;statistics.js&quot;</span> <span class="attr">async</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The async attribute indicates that the imported JavaScript is executed asynchronously. The difference between defer and defer is that if it has already been loaded, it will start executing - whether it is in the HTML parsing stage or after DOMContentLoaded is triggered. It should be noted that JavaScript loaded in this way will still block the load event. In other words, async-script may be executed before or after DOMContentLoaded is triggered, but it must be executed before load is triggered.</p><p>As can be seen from the previous paragraph, the execution order of multiple async-scripts is uncertain. It is worth noting that when dynamically adding script tags to document, the async attribute defaults to true. We will continue this topic in the next section.</p><h3 id="document-createElement"><a href="#document-createElement" class="headerlink" title="document.createElement"></a><strong>document.createElement</strong></h3><p>Scripts created using document.createElement are asynchronous by default, as shown below.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>).<span class="property">async</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>Therefore, introducing JavaScript files by dynamically adding script tags will not block the page by default. If you want to execute synchronously, you need to artificially set the async attribute to false.</p><p>What if I use document.createElement to create a link tag?</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> style = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;link&quot;</span>);</span><br><span class="line">style.<span class="property">rel</span> = <span class="string">&quot;stylesheet&quot;</span>;</span><br><span class="line">style.<span class="property">href</span> = <span class="string">&quot;index.css&quot;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(style); <span class="comment">// 阻塞？</span></span><br></pre></td></tr></table></figure><p>In fact, this can only be determined experimentally. What is known is that Chrome have<a href="http://link.zhihu.com/?target=https%3A//bugs.chromium.org/p/chromium/issues/detail%3Fid%3D571725" rel="external nofollow noopener noreferrer" target="_blank">不会阻塞渲染</a>, Firefox, IE were blocked in the past, what will happen now I didn’t experiment.</p><h3 id="document-write"><a href="#document-write" class="headerlink" title="**document.write"></a>**document.write</h3><p>The link or script tag added through document.write is equivalent to the tag added to the document, because it operates on the document stream (so using document.write for loaded pages will automatically call the document.open, which will overwrite the original doc content). That is, under normal circumstances, link will block rendering and script will execute synchronously. However, this is not recommended, Chrome will already display a warning that this introduction may be prohibited in the future. If you add an async attribute to a script introduced in this way, Chrome will check whether it is of the same origin, which is not allowed for non-homologous async-scripts.</p><p>If you use innerHTML to introduce script tags, the JavaScript in them will not be executed. Of course, it can be handled manually with eval (), but it is not recommended. If you introduce link tags, I have experimented with it working in Chrome. In addition, outerHTML and insertAdjacentHTML () should have the same behavior, I did not experiment. These three should be used for text operations, that is, only use them to add text or normal HTML Elements.</p><h2 id="Rearrangement-and-repaint"><a href="#Rearrangement-and-repaint" class="headerlink" title="Rearrangement and repaint"></a>Rearrangement and repaint</h2><p>There will always be an initialized page layout accompanied by a drawing. (Unless you want your page to be blank:)) After that, every change in the information used to build the render tree will result in at least one of the following behaviors:</p><ol><li>Part of the render tree (or the entire render tree) needs to be reanalyzed and node sizes need to be recalculated. This is called <strong>rearrangement</strong> . Note that there will be at least one rearrangement here - initializing the page layout.</li><li>Some content on the screen needs to be updated due to changes in the geometric properties of the node or due to changes in the style, such as changing the background color of the element. Such an update is called redrawing.</li></ol><p>Rearrangements and repaints are expensive, they break the User Experience and make UI presentation very slow.</p><h3 id="Under-what-circumstances-will-rearrangement-and-redrawing-be-triggered"><a href="#Under-what-circumstances-will-rearrangement-and-redrawing-be-triggered" class="headerlink" title="Under what circumstances will rearrangement and redrawing be triggered?"></a>Under what circumstances will rearrangement and redrawing be triggered?</h3><p>Any changes to the information used to build the render tree will result in a rearrangement or repaint.</p><ul><li>Add, delete, update DOM nodes</li><li>Hide a DOM node via display: none - triggers rearrangement and repaint</li><li>Hide a DOM node via visibility: hidden - only triggers redraw because no geometry changes<br>Move or animate DOM nodes in the page</li><li>Add a style sheet, adjust style properties<br>User behavior, such as resizing windows, changing font size, or scrolling.</li></ul><p>Reference link:</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/entry/59e1d31f51882578c3411c77">浏览器渲染过程</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/post/5a4ed917f265da3e317df515">浏览器资源加载</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/entry/582f16fca22b9d006b7afd89">https://juejin.im/entry/582f16fca22b9d006b7afd89</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/posts/efdea9ac/" title="Browser Rendering HTML Process">https://sunra.top/en/posts/efdea9ac/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/posts/d56cb4fa/" rel="prev" title="Currying functions"><i class="fa fa-chevron-left"></i> Currying functions</a></div><div class="post-nav-item"> <a href="/en/posts/e438c689/" rel="next" title="TamperMonkey">TamperMonkey<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/posts/efdea9ac/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>