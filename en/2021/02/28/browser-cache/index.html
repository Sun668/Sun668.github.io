<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="Some time ago, I encountered a problem with browser caching. I didn’t have any ideas at the time. Later, I checked back and found that I had contacted many things, but I didn’t systematically sort the"><meta property="og:type" content="article"><meta property="og:title" content="Browser Cache"><meta property="og:url" content="https://sunra.top/en/2021/02/28/browser-cache/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="Some time ago, I encountered a problem with browser caching. I didn’t have any ideas at the time. Later, I checked back and found that I had contacted many things, but I didn’t systematically sort the"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2021-02-28T02:12:57.000Z"><meta property="article:modified_time" content="2024-10-18T04:06:20.611Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/2021/02/28/browser-cache/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/2021/02/28/browser-cache/","path":"2021/02/28/browser-cache/","title":"Browser Cache"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Browser Cache | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#strong-cache-and-negotiation-cache"><span class="nav-number">1.</span> <span class="nav-text">Strong cache and negotiation cache</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#caching-mechanism"><span class="nav-number">2.</span> <span class="nav-text">Caching mechanism</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#request-flow"><span class="nav-number">3.</span> <span class="nav-text">Request flow</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#strong-cache"><span class="nav-number">3.1.</span> <span class="nav-text">Strong cache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#negotiation-cache"><span class="nav-number">3.2.</span> <span class="nav-text">Negotiation cache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#why-have"><span class="nav-number">3.3.</span> <span class="nav-text">Why have</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cache-control"><span class="nav-number">3.4.</span> <span class="nav-text">Cache-control</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cacheability"><span class="nav-number">3.4.1.</span> <span class="nav-text">Cacheability</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#due"><span class="nav-number">3.4.2.</span> <span class="nav-text">Due</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#re-verify-and-reload"><span class="nav-number">3.4.3.</span> <span class="nav-text">Re-verify and reload</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#other"><span class="nav-number">3.4.4.</span> <span class="nav-text">Other</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#priority"><span class="nav-number">3.5.</span> <span class="nav-text">Priority</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#three-level-cache-principle"><span class="nav-number">3.6.</span> <span class="nav-text">Three-level cache principle</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/2021/02/28/browser-cache/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Browser Cache | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Browser Cache</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-02-28 10:12:57" itemprop="dateCreated datePublished" datetime="2021-02-28T10:12:57+08:00">2021-02-28</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-10-18 12:06:20" itemprop="dateModified" datetime="2024-10-18T12:06:20+08:00">2024-10-18</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Sundry/" itemprop="url" rel="index"><span itemprop="name">Sundry</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/2021/02/28/browser-cache/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/2021/02/28/browser-cache/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Some time ago, I encountered a problem with browser caching. I didn’t have any ideas at the time. Later, I checked back and found that I had contacted many things, but I didn’t systematically sort them out. I used this blog to sort them out.</p><p>The main content is the browser’s strong cache, the mechanism for negotiating the cache, and the corresponding HTTP headers.</p><p>In addition, the content related to the browser’s Cache API may be sorted out in the future.</p><span id="more"></span><h2 id="strong-cache-and-negotiation-cache"><a class="markdownIt-Anchor" href="#strong-cache-and-negotiation-cache"></a> Strong cache and negotiation cache</h2><p>Browser cache is divided into strong cache and negotiation cache, and there are two obvious differences between the two:</p><ol><li>If the browser hits a strong cache, there is no need to send a request to the server; and the negotiation cache is ultimately decided by the server whether to use the cache, that is, there is a communication between the Client and the server.</li><li>The request status code returned by the strong cache in’chrome ’ (although no real’http’ request was made) is’ 200 (from cache) ‘; while the negotiation cache if it hits the cache, the request status code is’ 304 (not modified) ‘. The strategy of different browsers is different, in’Fire Fox’, the’from cache 'status code is 304.</li></ol><blockquote><p>Of which</p></blockquote><h2 id="caching-mechanism"><a class="markdownIt-Anchor" href="#caching-mechanism"></a> Caching mechanism</h2><p>First, let’s take a general perception of its matching process, as follows:</p><ol><li>Before the browser sends the request, determine whether it hits (including whether it expires) according to the expires and cache-control of the request header. If it hits, the resource is directly obtained from the cache and the request will not be sent. If there is no hit, go to the next step.</li><li>If the strong cache rule is not hit, the browser will send a request and judge whether it hits the negotiation cache according to the last-modified and etag of the request header. If it hits, the resource is directly obtained from the cache. If there is no hit, proceed to the next step.</li><li>If the first two steps are not hit, directly from the server level to get resources.</li></ol><h2 id="request-flow"><a class="markdownIt-Anchor" href="#request-flow"></a> Request flow</h2><p>The browser caches the resource after the first request, and when the request is made again, it will perform the following two steps:</p><ol><li>The browser will get the information in the’header ‘of the cache resource, and judge whether it hits a strong cache according to the’expires’ and’cache-control ‘in the’response header’. If it hits, it will directly obtain the resource from the cache.</li><li>If there is no strong cache hit, the browser will send a request to the server, the request will bring “IF-Modified-Since” or “IF-One-Match”, their values are the first request returns “Last-Modified” or “Etag”, by the server to compare this pair of fields to determine whether a hit. If it hits, the server returns a 304 status code and does not return the resource content, the browser will directly retrieve it from the cache; otherwise, the server will eventually return the actual content of the resource and update the relevant cache fields in the header.</li></ol><h3 id="strong-cache"><a class="markdownIt-Anchor" href="#strong-cache"></a> Strong cache</h3><p>Strong caching is controlled by the’Expires’ or’Cache-Control 'fields in the return header, both of which represent the cache effective time of the resource.</p><ul><li>‘Expires’ is the specification of’http 1.0 ‘, and the value is a time point string in’GMT’ format, such as’Expires: Mon, 18 Oct 2066 23:59:59 GMT ‘. This time point represents the time when the resource expires. If the current timestamp is before this time, it is determined that the cache hit. One drawback is that the expiration time is an absolute time, and if the server time deviates from the Client time by a large margin, it will cause cache confusion. It is normal that the time of the server is different from the actual time of the user, so’Expires’ will bring some trouble in actual use.</li><li>‘Cache-Control’ field is the specification of’http 1.1 ‘. Generally, the value of’max-age’ of this field is often used to judge. It is a relative time, for example. ‘Cache-Control: max-age = 3600’ represents the valid period of the resource is 3600 seconds. And the’Date ‘in the return header indicates the time when the message was sent, indicating that the current resource is valid during the period of’Date~ Date + 3600s’. However, I often encounter in actual use after setting’max-age ‘, in the’max-age’ time to revisit the resource will return ‘304 not modified’, which is due to the server time and the local time different caused. Of course, there are several other values of’Cache-Control 'can be set, but relatively rarely used:<ul><li>‘No-cache’ does not use local cache. Negotiation cache is required.</li><li>‘No-store’ directly prohibits the browser from caching data, and every time a resource is requested, the server will be asked for the complete resource, similar to’disabled cache ‘in’network’.</li><li>‘public’ can be cached by all users, including end users and Middleware proxy servers such as cdn.</li><li>‘Private’ can only be cached by the end users’ browsers.</li></ul></li></ul><p>If’Cache-Control ‘and’Expires’ exist at the same time, ‘Cache-Control’ takes precedence over’Expires’.</p><h3 id="negotiation-cache"><a class="markdownIt-Anchor" href="#negotiation-cache"></a> Negotiation cache</h3><p>Negotiated caching is determined by the server whether cache resources are available. It mainly involves two pairs of attribute fields, both of which appear in pairs, that is, the response header of the first request contains a certain word, ‘Last-Modified’ or’Etag ‘, and subsequent requests will bring the corresponding request field’If-Modified-Since’ or’If-One-Match ‘, if there is no’Last-Modified’ or’Etag 'field in the response header, there will be no corresponding field in the request header.</p><ul><li>‘Last-Modified/If-Modified-Since’ The values of both are time strings in GMT format, and’Last-Modified ‘marks the last file modification time. When the next request is made, the request header will be marked with’If-Modified-Since’ The value is’ Last-Modified ‘, which tells the server the last modification time of my locally cached file. On the server, according to the last modification time of the file, it is judged whether the resource has changed. If the file has not changed, it will return’ 304 Not Modified '. The request does not return the resource content, and the browser directly uses Local cache. When the server returns a response of 304 Not Modified, the response header will not add the Last-Modified to attempt to update the local cache of Last-Modified, because since the resource has not changed, the Last-Modified will not change; if the resource has changed, it will return the resource content normally, the new Last-Modified will return in the response header, and update the local cache of Last-Modified before the next request, The next request, ‘If-Modified-Since’ will Enable the updated Last-Modified.</li><li>‘Etag/If-One-Match’, the value is a unique identification string generated by the server for each resource, and the value will change as long as the resource changes. The server calculates a hash value based on the file itself and returns it to the browser through the’ETag ‘field. After receiving the’If-One-Match’ field, the server determines whether the file content is changed by comparing whether the two are consistent. Unlike’Last-Modified ‘, when the server returns a response of’ 304 Not Modified ‘, the’ETag’ will be returned in the’response header ‘because the’ETag’ has been recalculated on the server, even if the’ETag 'has not changed from the previous one.</li></ul><blockquote><p>HTTP</p></blockquote><h3 id="why-have"><a class="markdownIt-Anchor" href="#why-have"></a> Why have</h3><p>The emergence of Etag in HTTP1.1 is mainly to solve several difficult problems of Last-Modified:</p><ul><li>Some files may change periodically, but the content does not change (only the modification time of the change). At this time, we do not want the Client to think that the file has been modified and re-GET;</li><li>Some files are modified very frequently, such as modifying within seconds, (for example, modifying N times within 1s), the granularity that can be checked by If-Modified-Since is second-level, and the use of Etag can ensure that the client can refresh the cache N times within 1 second under this requirement.</li><li>Some servers cannot accurately obtain the last modification time of the file.</li></ul><h3 id="cache-control"><a class="markdownIt-Anchor" href="#cache-control"></a> Cache-control</h3><h4 id="cacheability"><a class="markdownIt-Anchor" href="#cacheability"></a> Cacheability</h4><ul><li><p><code>public</code></p><p>Indicates that the response can be cached by any object (including: the client sending the request, the proxy server, etc.), even content that is not normally cacheable. (For example: 1. The response does not have a’max-age ‘directive or an’Expires’ header; 2. The request method corresponding to the response is <a target="_blank" rel="external nofollow noopener noreferrer" href="https://wiki.developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST">POST</a> 。）</p></li><li><p><code>private</code></p><p>Indicates that the response can only be cached by a single user and cannot be used as a shared cache (that is, the proxy server cannot cache it). Private caches can cache the response content, such as the local browser of the corresponding user.</p></li><li><p><code>no-cache</code></p><p>Before releasing the cached copy, it is mandatory for the cache to submit the request to the origin server for verification (negotiated cache verification).</p></li><li><p><code>no-store</code></p><p>The cache should not store anything about client requests or server responses, i.e. no cache is used.</p></li></ul><h4 id="due"><a class="markdownIt-Anchor" href="#due"></a> Due</h4><ul><li><p><code>max-age=&lt;seconds&gt;</code></p><p>Sets the maximum period of cache storage, beyond which the cache is considered expired (in seconds). In contrast to’Expires’, the time is relative to the requested time.</p></li><li><p><code>s-maxage=&lt;seconds&gt;</code></p><p>Override the max-age or Expires header, but only for shared caches (such as individual proxies), private caches ignore it.</p></li><li><p><code>max-stale[=&lt;seconds&gt;]</code></p><p>Indicates that the Client is willing to receive a resource that has expired. An optional number of seconds can be set to indicate that the response cannot be outdated beyond this given time.</p></li><li><p><code>min-fresh=&lt;seconds&gt;</code></p><p>Indicates that the Client wants to get a response that keeps it up to date for a specified number of seconds.</p></li><li><p><code>stale-while-revalidate=&lt;seconds&gt;</code></p><p>Indicates that the client is willing to accept stale responses while checking for new ones asynchronously in the background. The second value indicates the length of time the client is willing to accept stale responses.</p></li><li><p><code>stale-if-error=&lt;seconds&gt;</code></p><p>Indicates that the customer is willing to accept the stale response if the new check fails. The second value indicates the time the customer is willing to accept the stale response after the initial expiration.</p></li></ul><h4 id="re-verify-and-reload"><a class="markdownIt-Anchor" href="#re-verify-and-reload"></a> Re-verify and reload</h4><ul><li><p><code>must-revalidate</code></p><p>Once a resource has expired (for example, it has passed max-age), the cache cannot use it to respond to subsequent requests until it has successfully authenticated to the origin server.</p></li><li><p><code>proxy-revalidate</code></p><p>Same effect as must-revalidate, but it only applies to shared caches (such as proxies) and is ignored by private caches.</p></li><li><p><code>immutable</code></p><p>Indicates that the response body does not change over time. The resource (if not expired) does not change on the server, so the Client should not send a revalidation request header (such as’If-One-Match ‘or’I f-Modified-Since’) to check for updates, even if the user explicitly refreshes the page. In Firefox, immutable can only be used in’https://'transactions. For more information, see<a target="_blank" rel="external nofollow noopener noreferrer" href="http://bitsup.blogspot.de/2016/05/cache-control-immutable.html">这里</a>。</p></li></ul><h4 id="other"><a class="markdownIt-Anchor" href="#other"></a> Other</h4><ul><li><p><code>no-transform</code></p><p>Resources must not be transformed or transformed. HTTP headers such as’Content-Encoding ‘,’ Content-Range ‘,’ Content-Type 'cannot be modified by proxies. For example, non-transparent proxies or<a target="_blank" rel="external nofollow noopener noreferrer" href="https://support.google.com/webmasters/answer/6211428?hl=en">Google’s Light Mode</a>It is possible to convert image formats to save cache space or reduce traffic on slow links. The’no-transform 'directive does not allow this.</p></li><li><p><code>only-if-cached</code></p><p>Indicates that the Client only accepts cached responses and does not check with the origin server for updated copies.</p></li></ul><h3 id="priority"><a class="markdownIt-Anchor" href="#priority"></a> Priority</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cache-Control &gt; expires &gt; Etag &gt; Last-Modified</span><br></pre></td></tr></table></figure><h3 id="three-level-cache-principle"><a class="markdownIt-Anchor" href="#three-level-cache-principle"></a> Three-level cache principle</h3><p>Finally, summarize the browser’s three-level caching principle:</p><ol><li>Go to the memory first to see, if there is, load it directly.</li><li>If the memory is not available, go to the hard disk to get it. If there is, load it directly.</li><li>If the hard disk is not available, then make a network request</li><li>Load resources into cache to hard disk and memory</li></ol><p>Reference article: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://segmentfault.com/a/1190000021661656">https://segmentfault.com/a/1190000021661656</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/2021/02/28/browser-cache/" title="Browser Cache">https://sunra.top/en/2021/02/28/browser-cache/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/2021/02/27/leetcode-1178/" rel="prev" title="Leetcode Puzzle"><i class="fa fa-chevron-left"></i> Leetcode Puzzle</a></div><div class="post-nav-item"> <a href="/en/2021/03/06/monotonous-stack/" rel="next" title="The Thought and Application of Monotone Stack">The Thought and Application of Monotone Stack<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/2021/02/28/browser-cache/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>