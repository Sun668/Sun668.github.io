<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="Recently, I was interested in how to develop a VsCode plugin, so I deliberately read some plugin Development Documents, mainly looking at a中文翻译的文档However, this doc is not complete. It is basically a l"><meta property="og:type" content="article"><meta property="og:title" content="VsCode Plugin Language Plugin Development"><meta property="og:url" content="https://sunra.top/en/2021/06/04/lsp/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="Recently, I was interested in how to develop a VsCode plugin, so I deliberately read some plugin Development Documents, mainly looking at a中文翻译的文档However, this doc is not complete. It is basically a l"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1623800006/origin-of-ray/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210616073111_tylgg9.png"><meta property="article:published_time" content="2021-06-04T00:31:19.000Z"><meta property="article:modified_time" content="2024-09-23T13:49:32.927Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1623800006/origin-of-ray/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210616073111_tylgg9.png"><link rel="canonical" href="https://sunra.top/en/2021/06/04/lsp/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/2021/06/04/lsp/","path":"2021/06/04/lsp/","title":"VsCode Plugin Language Plugin Development"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>VsCode Plugin Language Plugin Development | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#plugin-directory-structure"><span class="nav-number">1.</span> <span class="nav-text">Plugin directory structure</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#plugin-list"><span class="nav-number">1.1.</span> <span class="nav-text">Plugin List</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#entry-file-main-in-packagejson"><span class="nav-number">1.2.</span> <span class="nav-text">Entry file (main in package.json)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#publish-content-configuration"><span class="nav-number">1.3.</span> <span class="nav-text">Publish content configuration</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#what-can-plugins-do"><span class="nav-number">2.</span> <span class="nav-text">What can plugins do</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#common-features"><span class="nav-number">2.1.</span> <span class="nav-text">Common features</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#command"><span class="nav-number">2.1.1.</span> <span class="nav-text">Command</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#configure"><span class="nav-number">2.1.2.</span> <span class="nav-text">Configure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#key-binding"><span class="nav-number">2.1.3.</span> <span class="nav-text">Key binding</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#menu"><span class="nav-number">2.1.4.</span> <span class="nav-text">Menu</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#data-storage"><span class="nav-number">2.1.5.</span> <span class="nav-text">Data storage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#notification"><span class="nav-number">2.1.6.</span> <span class="nav-text">Notification</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#theme"><span class="nav-number">2.2.</span> <span class="nav-text">Theme</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#file-icon-theme"><span class="nav-number">2.2.1.</span> <span class="nav-text">File Icon Theme</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#language-features"><span class="nav-number">2.3.</span> <span class="nav-text">Language features</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#declarative-language-feature"><span class="nav-number">2.3.1.</span> <span class="nav-text">Declarative language feature</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#code-snippets"><span class="nav-number">2.3.1.1.</span> <span class="nav-text">Code snippets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#language-configuration"><span class="nav-number">2.3.1.2.</span> <span class="nav-text">Language configuration</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#programming-language-feature-monitoring-user-actions"><span class="nav-number">2.3.2.</span> <span class="nav-text">Programming language feature (monitoring user actions)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#take-auto-completion-as-an-example-to-illustrate-usage"><span class="nav-number">2.3.2.1.</span> <span class="nav-text">Take auto-completion as an example to illustrate usage</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#changes-in-monitoring-doc"><span class="nav-number">2.3.3.</span> <span class="nav-text">Changes in monitoring doc</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/2021/06/04/lsp/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="VsCode Plugin Language Plugin Development | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> VsCode Plugin Language Plugin Development</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-06-04 08:31:19" itemprop="dateCreated datePublished" datetime="2021-06-04T08:31:19+08:00">2021-06-04</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-09-23 21:49:32" itemprop="dateModified" datetime="2024-09-23T21:49:32+08:00">2024-09-23</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Sundry/" itemprop="url" rel="index"><span itemprop="name">Sundry</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/2021/06/04/lsp/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/2021/06/04/lsp/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Recently, I was interested in how to develop a VsCode plugin, so I deliberately read some plugin Development Documents, mainly looking at a<a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/">中文翻译的文档</a>However, this doc is not complete. It is basically a list of key functions, but it is very good to get started. However, if you want to go deeper, you still have to look<a target="_blank" rel="external nofollow noopener noreferrer" href="https://code.visualstudio.com/api/extension-capabilities/overview">英文的文档</a>。</p><p>Most of the content is relatively simple, mainly configuration, it can take effect. What I want to summarize this time is how to develop a brand new language plugin. That is to say, if you want to define a new language similar to JSX, if you provide VsCode Support, such as syntax highlighting, code snippets, tag autism, error prompts, auto-completion, etc.</p><span id="more"></span><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1623800006/origin-of-ray/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210616073111_tylgg9.png" alt></p><h1 id="plugin-directory-structure"><a class="markdownIt-Anchor" href="#plugin-directory-structure"></a> Plugin directory structure</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">├── .vscode</span><br><span class="line">│ │ ─ ─ launch.json//Plugin loading and debugging configuration</span><br><span class="line">│ ･ ─ ─ tasks.json//Configure TypeScript compile tasks</span><br><span class="line">- -.gitignore//Ignore build output and node_modules files</span><br><span class="line">- README.md//A friendly plugin doc</span><br><span class="line">├── src</span><br><span class="line">│ ･ ─ ─ extension.ts//plugin <span class="built_in">source</span> code</span><br><span class="line">Van ─ ─ package.json//Plugin configuration list</span><br><span class="line">├── tsconfig.json       // TypeScript配置</span><br></pre></td></tr></table></figure><h2 id="plugin-list"><a class="markdownIt-Anchor" href="#plugin-list"></a> Plugin List</h2><p>Every VS Code plugin must contain a’package.json ', which is the plugin’s<a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/references/extension-manifest">配置清单</a>Package.json mixes Node.js fields such as scripts and dependencies, and also adds some fields unique to VS Code, such as publisher, activationEvents, contributes, etc<a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/">插件清单参考</a>Can be found in. We introduce some very important fields in this section:</p><ul><li><p>‘name’ and’publisher ‘: VS Code uses’ &lt; publisher &gt;. &lt; name &gt; ‘as the ID of a plugin. You can understand it this way, the ID of the Hello World example is’vscode-samples.helloworld-sample’. VS Code uses IDs to distinguish between different plugins.</p></li><li><p>‘main’: the main entry point of the plugin.</p></li><li><p><code>activationEvents</code> 和 <code>contributes</code>: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/references/activation-events">激活事件</a> and <a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/references/contribution-points">发布内容配置</a>。</p></li><li><p>‘Engines.vscode’: Describes the minimum VS Code API version that this plugin depends on.</p></li><li><p>‘postinstall’ script: If your’engines.vscode ‘declares a version 1.25 VS Code API, it will install the target version according to this declaration. Once the’vscode.d.ts’ file exists in node_modules/vscode/vscode.d.ts’, IntelliSense will start working and you can perform definition jumps or syntax checks on all VS Code APIs.</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;helloworld-sample&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;helloworld-sample&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;HelloWorld example for VS Code&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;publisher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vscode-samples&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;repository&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://github.com/Microsoft/vscode-extension-samples/helloworld-sample&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;vscode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.25.0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;Other&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;activationEvents&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;onCommand: extension.helloWorld&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">//Activate the event, that is, what event will activate the plugin. In this example, when the command extension.helloWorld occurs, it will activate the plugin</span></span><br><span class="line">    <span class="attr">&quot;Main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./out/extension.js&quot;</span><span class="punctuation">,</span><span class="comment">//the entry file of the plugin</span></span><br><span class="line">    <span class="attr">&quot;Contributs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="comment">//Plugin release configuration, very important, registration events, file icons, label self-closing, etc. Most of the plugin configuration is here</span></span><br><span class="line">        <span class="attr">&quot;Commands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="comment">//register commands</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;Command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;extension.helloWorld&quot;</span><span class="punctuation">,</span><span class="comment">//This is the command in the activationEvent above, that is, the command we choose to run in comman + shift + P</span></span><br><span class="line">                <span class="attr">&quot;Title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello World&quot;</span><span class="comment">//what is displayed in the command list</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;vscode:prepublish&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run compile&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;compile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc -p ./&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;watch&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tsc -watch -p ./&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;postinstall&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node ./node_modules/vscode/bin/install&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;@types/node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^8.10.25&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;tslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.11.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;typescript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;vscode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.1.22&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="entry-file-main-in-packagejson"><a class="markdownIt-Anchor" href="#entry-file-main-in-packagejson"></a> Entry file (main in package.json)</h2><p>The plugin entry file will export two functions, ‘activate’ and’deactivate ‘, which are executed when the ** activation event ** you registered is triggered, and’deactivate’ provides the opportunity to perform cleanup work before the plugin is shut down.</p><p>The vscode module contains a script located in node./node_modules/vscode/bin/install that pulls the VS Code API defined by the engines .vscode field in package.json. After executing this script, you will get smart code hints and define TS features such as jumps.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//The&#x27;vscode &#x27;module contains the VS Code extensibility API</span></span><br><span class="line"><span class="comment">//Import this module as follows</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> vscode <span class="keyword">from</span> <span class="string">&#x27;vscode&#x27;</span>;</span><br><span class="line"><span class="comment">//Once your plugin is activated, vscode will immediately call the following method</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params"><span class="attr">context</span>: vscode.<span class="title class_">ExtensionContext</span></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Use console to output diagnostic information (console.log) and errors (console.error).</span></span><br><span class="line">    <span class="comment">//The following code will only be executed once when your plugin is activated</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Congratulations, your extension &quot;my-first-extension&quot; is now active!&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//The entry command has been defined in the package.json file, now call the registerCommand method</span></span><br><span class="line">    <span class="comment">//The parameters in registerCommand must be consistent with the command in package.json</span></span><br><span class="line">    <span class="keyword">let</span> disposable = vscode.<span class="property">commands</span>.<span class="title function_">registerCommand</span>(<span class="string">&#x27;extension.sayHello&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Write</span> your code here, and it will be called every time the command is executed</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="title class_">Display</span> a message prompt to the user</span><br><span class="line">        vscode.<span class="property">window</span>.<span class="title function_">showInformationMessage</span>(<span class="string">&#x27;Hello World!&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    context.<span class="property">subscriptions</span>.<span class="title function_">push</span>(disposable);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="publish-content-configuration"><a class="markdownIt-Anchor" href="#publish-content-configuration"></a> Publish content configuration</h2><h1 id="what-can-plugins-do"><a class="markdownIt-Anchor" href="#what-can-plugins-do"></a> What can plugins do</h1><h2 id="common-features"><a class="markdownIt-Anchor" href="#common-features"></a> Common features</h2><ul><li>Register commands, configurations, shortcut bindings, menus, etc.</li></ul><p>Save workspace or global data.</p><ul><li><p>Display notification information.</p></li><li><p>Use Quick Select to get user input.</p></li><li><p>Open the system’s file selection tool so that users can select files or folders.</p></li><li><p>Use the progress API to prompt for longer operations.</p></li></ul><h3 id="command"><a class="markdownIt-Anchor" href="#command"></a> Command</h3><ul><li>Register commands using contributions.commands in pacakge.json. Only commands registered here can be searched in the command panel.</li><li>By default, all commands that appear in the Command Panel can be configured in the commands section of package.json. However, some commands are context-specific, such as in language-specific editors, or only displayed when the user has set certain options.<a target="_blank" rel="external nofollow noopener noreferrer" href="https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts">Visual Studio Code Key Bindings</a>You can see how to write this when command</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;contributes&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;menus&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;commandPalette&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;command&quot;</span>: <span class="string">&quot;myExtension.sayHello&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;when&quot;</span>: <span class="string">&quot;editorLangId  markdown&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Now the myExtension.sayHello command will only appear in the user&#x27;s Markdown file.</span></span><br></pre></td></tr></table></figure><ul><li>Use vscode.command.registerCommand to register the callback function for the command</li><li>Execute commands using vscode.command.excuteCommand</li></ul><p>Vscode also has many built-in commands.<a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/references/commands">VS Code内置命令清单</a>）</p><p>Let’s look at an example 🌰: The editor.action.addCommentLine command can turn the currently selected line into a comment (you can secretly integrate this function into your own plugin):</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import * as vscode from &#x27;vscode&#x27;;</span><br><span class="line">function commentLine() &#123;</span><br><span class="line">    vscode.commands.executeCommand(&#x27;editor.action.addCommentLine&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="configure"><a class="markdownIt-Anchor" href="#configure"></a> Configure</h3><p>The plugin needs to publish the content configuration point in’contributs.configuration '<a target="_blank" rel="external nofollow noopener noreferrer" href="https://code.visualstudio.com/docs/extensionAPI/overview">发布内容配置点</a>Part of package.json, used to configure plugin startup commands and user-changeable plugin configurations, which can be understood as the main configuration file of the plugin. Fill in the relevant configuration, you can read about it in the’workspace.getConfiguration 'API.</p><h3 id="key-binding"><a class="markdownIt-Anchor" href="#key-binding"></a> Key binding</h3><p>Plugins can add custom keymappings in contributs.keybindings and<a target="_blank" rel="external nofollow noopener noreferrer" href="https://code.visualstudio.com/docs/getstarted/keybindings">键位绑定</a>Learn more about the content.</p><h3 id="menu"><a class="markdownIt-Anchor" href="#menu"></a> Menu</h3><p>Plugins can customize context menu items, which vary depending on where the user right-clicks in the VS Code UI. See more’contributs.menus’ publish content configurations.</p><h3 id="data-storage"><a class="markdownIt-Anchor" href="#data-storage"></a> Data storage</h3><p>There are three ways to store data in VS Code:</p><ul><li><p>‘ExtensionContext.workspaceState’: Attribute - Workspace data consisting of Value Pair. When the same workspace is opened again, the data will be retrieved.</p></li><li><p>‘ExtensionContext.globalState’: Attribute - Global data consisting of Value Pair. This data will be retrieved again when the plugin is activated.</p></li><li><p>‘ExtensionContext.storagePath’: Path to a local folder that your plugin can read and write to. This is a great choice if you want to store larger data.</p></li><li><p>‘ExtensionContext.globalStoragePath’: Path to the local storage that your plugin can read and write to. This is a very good choice if you want to store large files in all workspaces.</p></li></ul><h3 id="notification"><a class="markdownIt-Anchor" href="#notification"></a> Notification</h3><p>Almost all plugins need to prompt users with information at some point. VS Code provides 3 APIs to display information of varying importance:</p><ul><li><p><code>window.showInformationMessage</code></p></li><li><p><code>window.showWarningMessage</code></p></li><li><p><code>window.showErrorMessage</code></p></li></ul><h2 id="theme"><a class="markdownIt-Anchor" href="#theme"></a> Theme</h2><p>Product icon theme and color theme can refer to doc:<a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/extension-guides/color-theme">VS Code插件创作中文开发文档 - 色彩主题</a></p><h3 id="file-icon-theme"><a class="markdownIt-Anchor" href="#file-icon-theme"></a> File Icon Theme</h3><p>The UI of VS Code displays icons to the left of the file name, and the icon series configured by the plugin allows users to freely choose their favorite icons.</p><p>However, Vscode currently does not support a language plugin that only defines its own language file icons. If users switch to the theme provided by your plugin, but cannot support all file types, there will be problems</p><p>First, create a VS Code plugin and add the iconTheme contribution point</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;iconThemes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;turtles&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Turtles&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./fileicons/turtles-icon-theme.json&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Copy to clipboard copy error copied</p><ul><li><p>‘id’, as the identifier of this icon theme, is currently only for internal use and may be used in settings in the future, so it is best to set a unique value that is readable.</p></li><li><p>‘label’ will be displayed in the Theme Selection drop-down box.</p></li><li><p>‘path’ indicates where the icon set is located. If your icon family names follow the ‘* icon-theme.json’ naming convention, then VS Code provides full support.</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//turtles-icon-theme.json&#123;</span></span><br><span class="line">    <span class="attr">&quot;iconDefinitions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;_folder_dark&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./images/Folder_16x_inverse.svg&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Here, the icon definition contains an identifier _folder_dark. In addition, the following properties are supported:</p><ul><li><p>‘iconPath’: When using svg/png file: the path to the image.</p></li><li><p>‘fontCharacter’: when using glyph fonts: the characters used in the font.</p></li><li><p>‘fontColor’: When using glyph fonts: Set the color of the glyph.</p></li><li><p>‘fontSize’: When using fonts: Set the font size. By default, the font size defined by the font itself will be used. This value should be the relative value of the parent font size (such as 150%).</p></li><li><p>‘fontId’: When using a font: The ID of the font. If not specified, the first font in the’font specification 'section will be used.</p></li></ul><p>After defining it in iconDefinitions, it can be referenced</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;iconDefinitions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;_folder_dark&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./images/Folder_16x_inverse.svg&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_file_dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;folder&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_folder_dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;folderExpanded&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_folder_open_dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;folderNames&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;.vscode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_vscode_folder&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;fileExtensions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;this&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_ this _ file,&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;fileNames&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;win.ini&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_ win _ this _ file,&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;languageIds&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;this&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_ this _ file&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;light&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;folderExpanded&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_folder_open_light&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;folder&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_folder_light&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;file&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_file_light&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fileExtensions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;this&quot;</span><span class="punctuation">:</span> <span class="string">&quot;_ this _ file _ light,&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;highContrast&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ul><li><p>‘File’ is a default file icon for files that do not match any plugin, filename, or language type. Currently all file icon properties will be inherited (only applicable to: glyphs font, font size (fontSize)).</p></li><li><p>Folder icon for folded folders. If folderExpanded is not set, this icon will also be used for expanded folders. Use’folderNames’ to associate folders with special names. The folder icon is optional, if not set, the folder will not display any icons.</p></li><li><p>‘folderExpanded’ expanded folder icon. This icon is optional, if not set it will use the’folder 'defined icon.</p></li><li><p>‘folderNames’ special name folder icon. This key is for folder names, names containing paths are not supported, matching patterns and Wildcards are not supported. Case insensitive.</p></li><li><p>‘folderNamesExpanded’ expanded special name folder icon.</p></li><li><p>The root folder icon of the collapsed workspace of’rootFolder ‘. If’rootFolderExpanded’ is not set, then the root folder of the expanded workspace will also use this icon. If not set, the folder icon defined by’folder 'will be used.</p></li><li><p>‘rootFolderExpanded’ expanded workspace root folder icon. If not set, the folder icon defined by’rootFolder 'will be used.</p></li><li><p>‘languageIds’ language type icon. This key will match the * language configuration point (contribution point) * configured<a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/references/contribution-points?id=contributeslanguages">语言id</a>Note that the’first line 'of the language configuration is not taken into account.</p></li><li><p>‘fileExtensions’ file plugin icon. Matches according to the name of the file plugin. The plugin name is after the dotted number of the file name (excluding the dotted number). File names with multiple dots, such as’lib.d.ts’, will match multiple patterns - ‘d.ts’ and’ts’. Case sensitive.</p></li><li><p>‘fileNames’ file icon. This key requires the full name of the file for matching, does not support names containing paths, does not support patterns and Wildcards. Case sensitive. ‘fileNames’ is the highest priority match.</p></li></ul><p>Match priority: ‘fileNames’ &gt; ‘fileExtensions’ &gt; ‘languageIds’</p><p>The property sheets of the’light ‘and’highContrast’ sections are the same as above, but will override the original icon configuration under the corresponding theme.</p><h2 id="language-features"><a class="markdownIt-Anchor" href="#language-features"></a> Language features</h2><h3 id="declarative-language-feature"><a class="markdownIt-Anchor" href="#declarative-language-feature"></a> Declarative language feature</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/language-extensions/README?id=%E5%A3%B0%E6%98%8E%E5%BC%8F%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7">声明式语言特性</a>添加了基础的编程语言编辑支持，如括号匹配、自动缩进和语法高亮。这些功能都可以通过声明配置而不用写任何代码就可以获得，更高级的语言特性如IntelliSense或调试，请看<a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/extension-capabilities/README?id=%E7%BC%96%E7%A8%8B%E5%BC%8F%E6%B7%BB%E5%8A%A0%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7">编程式添加语言特性</a></p><ul><li><p>Package commonly used JS code snippets into plugins</p></li><li><p>Added new language support for VS Code</p></li><li><p>Add or replace syntax for a language</p></li><li><p>Extend a syntax by injection</p></li><li><p>Migrate existing TextMate syntax to VS Code</p></li></ul><h4 id="code-snippets"><a class="markdownIt-Anchor" href="#code-snippets"></a> Code snippets</h4><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/language-extensions/snippet-guide">VS Code插件创作中文开发文档 - 代码片段</a></p><h4 id="language-configuration"><a class="markdownIt-Anchor" href="#language-configuration"></a> Language configuration</h4><p>By publishing content configuration via contributions.languages, you can configure the following * declarative language features *:</p><ul><li><p>enable/disable annotations</p></li><li><p>Definition of brackets</p></li><li><p>Auto-closing symbols</p></li><li><p>Auto wrap around symbol</p></li><li><p>Code folding</p></li><li><p>Word match</p></li><li><p>Indentation rules</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;language-configuration-sample&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;displayName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Language Configuration Sample&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Language Configuration Sample&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;publisher&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vscode-samples&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;engines&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;vscode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.28.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;Programming Languages&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;contributes&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Languages &quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// define new languages</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;Id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vnm&quot;</span><span class="punctuation">,</span><span class="comment">//id of language</span></span><br><span class="line">        <span class="attr">&quot;extensions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="string">&quot;.js&quot;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;aliases&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="string">&quot;js&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="string">&quot;JavaScript&quot;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Configuration&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./language-configuration.json&quot;</span><span class="comment">//configuration of the language</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Comments &quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// Define comments</span></span><br><span class="line">        <span class="attr">&quot;lineComment&quot;</span><span class="punctuation">:</span> <span class="string">&quot;//&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;blockComment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;/*&quot;</span><span class="punctuation">,</span> <span class="string">&quot;*/&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Brackets &quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">[</span><span class="string">&quot;&#123;&quot;</span><span class="punctuation">,</span> <span class="string">&quot;&#125;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;[&quot;</span><span class="punctuation">,</span> <span class="string">&quot;]&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="punctuation">[</span><span class="string">&quot;(&quot;</span><span class="punctuation">,</span> <span class="string">&quot;)&quot;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span> <span class="comment">// define parentheses, when the mouse moves over a parenthesis, the corresponding parenthesis will be automatically highlighted</span></span><br><span class="line">    <span class="attr">&quot;autoClosingPairs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="comment">//autoClosingPairs</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;open&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#125;&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;open&quot;</span><span class="punctuation">:</span> <span class="string">&quot;[&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot;]&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;open&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot;)&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;open&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#x27;&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#x27;&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;notIn&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="string">&quot;comment&quot;</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;open&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\&quot;&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\&quot;&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;notIn&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;string&quot;</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;open&quot;</span><span class="punctuation">:</span> <span class="string">&quot;`&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot;`&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;notIn&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;string&quot;</span><span class="punctuation">,</span> <span class="string">&quot;comment&quot;</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span> <span class="attr">&quot;open&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/**&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;close&quot;</span><span class="punctuation">:</span> <span class="string">&quot; */&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;notIn&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;string&quot;</span><span class="punctuation">]</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Au t oC lose Before &quot;</span><span class="punctuation">:</span> <span class="string">&quot;;:.,=&#125;])&gt;` \ n\ t&quot;</span><span class="punctuation">,</span><span class="comment">//By default, the label will only be closed when there is space on the right side, you can override the default behavior with this configuration</span></span><br><span class="line">    <span class="attr">&quot;surroundingPairs &quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">// auto-wrap brackets</span></span><br><span class="line">        <span class="punctuation">[</span><span class="string">&quot;&#123;&quot;</span><span class="punctuation">,</span> <span class="string">&quot;&#125;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">[</span><span class="string">&quot;[&quot;</span><span class="punctuation">,</span> <span class="string">&quot;]&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">[</span><span class="string">&quot;(&quot;</span><span class="punctuation">,</span> <span class="string">&quot;)&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">[</span><span class="string">&quot;&#x27;&quot;</span><span class="punctuation">,</span> <span class="string">&quot;&#x27;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">[</span><span class="string">&quot;\&quot;&quot;</span><span class="punctuation">,</span> <span class="string">&quot;\&quot;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">[</span><span class="string">&quot;`&quot;</span><span class="punctuation">,</span> <span class="string">&quot;`&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;folding&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;markers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^\\s*//\\s*#?region\\b&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;end&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^\\s*//\\s*#?endregion\\b&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;wordPattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\%\\^\\&amp;\\*\\(\\)\\-\\=\\+\\[\\&#123;\\]\\&#125;\\\\\\|\\;\\:\\&#x27;\\\&quot;\\,\\.\\&lt;\\&gt;\\/\\?\\s]+)&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;indentationRules&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;increaseIndentPattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^((?!\\/\\/).)*(\\&#123;[^&#125;\&quot;&#x27;`]*|\\([^)\&quot;&#x27;`]*|\\[[^\\]\&quot;&#x27;`]*)$&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;decreaseIndentPattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^((?!.*?\\/\\*).*\\*/)?\\s*[\\&#125;\\]].*$&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="programming-language-feature-monitoring-user-actions"><a class="markdownIt-Anchor" href="#programming-language-feature-monitoring-user-actions"></a> Programming language feature (monitoring user actions)</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/language-extensions/programmatic-language-features?id=%E7%A8%8B%E5%BA%8F%E6%80%A7%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7">VS Code插件创作中文开发文档 - 程序性语言特性</a></p><p>The following table corresponds to the programming language features that we can implement. Each feature can be implemented separately through the VScode API in the left column, and can also be implemented separately through<a target="_blank" rel="external nofollow noopener noreferrer" href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol</a>Implemented in the language server.</p><p>In theory, all the features implemented through the language server can be implemented with the client alone</p><p>Unable to copy while content loads</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/language-extensions/README?id=%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7">编程式添加语言特性</a>可以为编程语言添加更为丰富的特性，如：悬停提示、转跳定义、错误诊断、IntelliSense和CodeLens。这些语言特性暴露于<code>vscode.languages.*</code>API。语言插件可以直接使用这些API，或是自己写一个语言服务器，通过<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/Microsoft/vscode-languageserver-node">语言服务器库</a>将它适配到VS Code。</p><p>Although we offer a<a target="_blank" rel="external nofollow noopener noreferrer" href="https://liiked.github.io/VS-Code-Extension-Doc-ZH/#/language-extensions/programmatic-language-features">语言特性</a>List, but it doesn’t prevent you from using these APIs freely. For example, displaying additional information in line, using CodeLens and code hovering are very good ways, and error diagnosis can highlight spelling or code style errors.</p><ul><li><p>Usage example appears when mouse hovers over API</p></li><li><p>Use diagnostics to report code style errors</p></li><li><p>Register new HTML code formatting</p></li><li><p>Provides rich IntelliSense Middleware</p></li><li><p>Add code folding, breadcrumb, contour support for one language</p></li></ul><h4 id="take-auto-completion-as-an-example-to-illustrate-usage"><a class="markdownIt-Anchor" href="#take-auto-completion-as-an-example-to-illustrate-usage"></a> Take auto-completion as an example to illustrate usage</h4><p>Client implementation</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GoCompletionItemProvider</span> <span class="keyword">implements</span> vscode.<span class="property">CompletionItemProvider</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">provideCompletionItems</span>(</span><br><span class="line">        <span class="attr">document</span>: vscode.<span class="property">TextDocument</span>, <span class="attr">position</span>: vscode.<span class="property">Position</span>, <span class="attr">token</span>: vscode.<span class="property">CancellationToken</span>):</span><br><span class="line">        <span class="title class_">Thenable</span>&lt;vscode.<span class="property">CompletionItem</span>[]&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">activate</span>(<span class="params"><span class="attr">ctx</span>: vscode.<span class="title class_">ExtensionContext</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">//registerCompletionItemProvider returns the function of unregistering itself. It is speculated that one purpose of adding a subscription is to unregister in the future.</span></span><br><span class="line">    ctx.<span class="property">subscriptions</span>.<span class="title function_">push</span>(</span><br><span class="line">        vscode.<span class="property">languages</span>.<span class="title function_">registerCompletionItemProvider</span>(</span><br><span class="line">            <span class="variable constant_">GO_MODE</span>, <span class="keyword">new</span> <span class="title class_">GoCompletionItemProvider</span>(), <span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;\&quot;&#x27;</span>));</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>LSP implementation</p><p>In the initialize method that receives the response, your language server needs to declare whether it can provide completion and whether it supports the completionItem\ resolve method that dynamically evaluates completion items.</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&quot;capabilities&quot;</span> : &#123;</span><br><span class="line">        <span class="string">&quot;completionProvider&quot;</span> : &#123;</span><br><span class="line">            <span class="string">&quot;resolveProvider&quot;</span>: <span class="string">&quot;true&quot;</span>,</span><br><span class="line">            <span class="string">&quot;triggerCharacters&quot;</span>: [ <span class="string">&#x27;.&#x27;</span> ]</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>After returning this configuration, the Client will send the textDocument/completion event to the language server after the input is completed. The language server listens for this event through the onCompletion event and returns a matching list after listening.</p><p>When we specifically select a completion item, we will send a completionItem/resolve event, which is monitored by the onCompletionResolve event to complete specific information or make modifications</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//server.ts</span></span><br><span class="line">connection.<span class="title function_">onCompletion</span>(</span><br><span class="line">  (&#123; textDocument, position, context &#125;: <span class="title class_">CompletionParams</span>): <span class="title class_">CompletionItem</span>[] =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> doc = documentService.<span class="title function_">getDocument</span>(textDocument.<span class="property">uri</span>)!;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//return type is CompletionItem []</span></span><br><span class="line">    <span class="keyword">const</span> completionItems = <span class="title function_">doComplete</span>(doc, position);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> completionItems || [];</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//This function provides more information about the selected items in the completion list</span></span><br><span class="line">connection.<span class="title function_">onCompletionResolve</span>((<span class="attr">item</span>: <span class="title class_">CompletionItem</span>): <span class="function"><span class="params">CompletionItem</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (item.<span class="property">label</span> = <span class="string">&#x27;$store&#x27;</span>) &#123;</span><br><span class="line">    item.<span class="property">insertText</span> = <span class="string">&#x27;store&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> item;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="changes-in-monitoring-doc"><a class="markdownIt-Anchor" href="#changes-in-monitoring-doc"></a> Changes in monitoring doc</h3><p>The above programming language features mainly do when we perform certain actions, the Client itself listens or the Client will listen to the actions and use events to communicate with the server.</p><p>Another way is to notify the client or tell the language server the content of the text when the text itself changes</p><p>Client itself listens to content changes, you can find the corresponding api in vscode.workspace. *, such as vscode.workspace.onDidChangeTextDocument</p><p>LSP is a little more complicated</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DocumentService.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Connection</span>, <span class="title class_">TextDocuments</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vscode-languageserver&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">TextDocument</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vscode-languageserver-textdocument&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Service responsible for managing documents being syned through LSP</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DocumentService</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">documents</span>: <span class="title class_">TextDocuments</span>&lt;<span class="title class_">TextDocument</span>&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">conn</span>: <span class="title class_">Connection</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">documents</span> = <span class="keyword">new</span> <span class="title class_">TextDocuments</span>(<span class="title class_">TextDocument</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">documents</span>.<span class="title function_">listen</span>(conn);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getDocument</span>(<span class="params"><span class="attr">uri</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">documents</span>.<span class="title function_">get</span>(uri);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getAllDocuments</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">documents</span>.<span class="title function_">all</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">onDidChangeContent</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">documents</span>.<span class="property">onDidChangeContent</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">onDidClose</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">documents</span>.<span class="property">onDidClose</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//server.ts</span></span><br><span class="line">documentService.<span class="title function_">onDidChangeContent</span>(<span class="function">(<span class="params">change</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> textDocument = change.<span class="property">document</span>;</span><br><span class="line">  connection.<span class="title function_">sendDiagnostics</span>(&#123; <span class="attr">uri</span>: textDocument.<span class="property">uri</span>, <span class="attr">diagnostics</span>: <span class="title function_">validateTextDocument</span>(textDocument) &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>This method sends the full text every time, which will affect performance, so vscode provides incremental text update synchronization</p></blockquote></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/2021/06/04/lsp/" title="VsCode Plugin Language Plugin Development">https://sunra.top/en/2021/06/04/lsp/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/2021/06/01/react-fiber/" rel="prev" title="react-fiber"><i class="fa fa-chevron-left"></i> react-fiber</a></div><div class="post-nav-item"> <a href="/en/2021/06/09/g6/" rel="next" title="Introduction and Summary of G6 Use">Introduction and Summary of G6 Use<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/2021/06/04/lsp/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>