<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.17.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="What is SQL Injection?PrincipleThe principle of SQL injection is an attack method that disguises SQL code into input parameters, passes it to the server for parsing and execution. That is to say, impl"><meta property="og:type" content="article"><meta property="og:title" content="SQL Injection, Getting Started Notes"><meta property="og:url" content="https://sunra.top/en/2020/06/20/sql-injection/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="What is SQL Injection?PrincipleThe principle of SQL injection is an attack method that disguises SQL code into input parameters, passes it to the server for parsing and execution. That is to say, impl"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620081821696_iytob2.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615446/sql_injection/image-20200620081912352_gm4sc3.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620082740546_yzowgw.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615757/sql_injection/image-20200620084424782_uqyhrq.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620085249277_yc3nh4.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620085054277_jxns66.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620085634320_w8oblo.png"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620090420970_yvyxb5.png"><meta property="article:published_time" content="2020-06-20T01:17:42.000Z"><meta property="article:modified_time" content="2023-07-21T07:32:11.809Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620081821696_iytob2.png"><link rel="canonical" href="https://sunra.top/en/2020/06/20/sql-injection/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/2020/06/20/sql-injection/","path":"2020/06/20/sql-injection/","title":"SQL Injection, Getting Started Notes"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>SQL Injection, Getting Started Notes | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#What-is-SQL-Injection"><span class="nav-number">1.</span> <span class="nav-text">What is SQL Injection?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Principle"><span class="nav-number">1.1.</span> <span class="nav-text">Principle</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Example"><span class="nav-number">1.1.1.</span> <span class="nav-text">Example:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Classification"><span class="nav-number">1.2.</span> <span class="nav-text">Classification</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Injection-test"><span class="nav-number">1.3.</span> <span class="nav-text">Injection test</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Digital-type"><span class="nav-number">1.3.1.</span> <span class="nav-text">Digital type:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Character-type"><span class="nav-number">1.3.2.</span> <span class="nav-text">Character type:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Search-type"><span class="nav-number">1.3.3.</span> <span class="nav-text">Search type:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sqlmap"><span class="nav-number">2.</span> <span class="nav-text">sqlmap</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/2020/06/20/sql-injection/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="SQL Injection, Getting Started Notes | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> SQL Injection, Getting Started Notes</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-06-20 09:17:42" itemprop="dateCreated datePublished" datetime="2020-06-20T09:17:42+08:00">2020-06-20</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2023-07-21 15:32:11" itemprop="dateModified" datetime="2023-07-21T15:32:11+08:00">2023-07-21</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Security/" itemprop="url" rel="index"><span itemprop="name">Security</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/2020/06/20/sql-injection/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/2020/06/20/sql-injection/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="What-is-SQL-Injection"><a href="#What-is-SQL-Injection" class="headerlink" title="What is SQL Injection?"></a>What is SQL Injection?</h2><h3 id="Principle"><a href="#Principle" class="headerlink" title="Principle"></a>Principle</h3><pre><code>The principle of SQL injection is an attack method that disguises SQL code into input parameters, passes it to the server for parsing and execution. That is to say, implanting some SQL code in some request parameters initiated by the server side, and the server side will splice the corresponding parameters when performing SQL operations, and also splice the &quot;sql&quot; of some SQL injection attacks, resulting in some unexpected operations.
</code></pre><span id="more"></span><h4 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h4><pre><code>For example, the login interface we use: the login interface includes a username and password text box, as well as a submit button, enter the username and password, and submit.

When logging in, call the interface/user/login/with parameters username and password. First connect to the database, and then perform parameter validation on the username and password carried in the request parameters in the background, that is, the query process of sql. Assuming the correct username and password are ls and 123456, enter the correct username and password, submit, which is equivalent to calling the following SQL statement.
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;ls&#x27;</span> <span class="keyword">AND</span> password <span class="operator">=</span> <span class="string">&#x27;123456&#x27;</span></span><br></pre></td></tr></table></figure><pre><code>SQL will treat strings after #and -- as comments. If we use &quot;&#39;or 1 = 1 #&quot; as the username parameter, then the SQL statement constructed at the server level is as follows:
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>#<span class="string">&#x27; and password=&#x27;</span><span class="number">123456</span><span class="string">&#x27;</span></span><br></pre></td></tr></table></figure><pre><code>And #will ignore the following statement, so the above SQL is also equivalent to:
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure><pre><code>And 1 = 1 is a constant condition, so this sql becomes the following, querying all logged-in users.
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users</span><br></pre></td></tr></table></figure><pre><code>In fact, the above sql injection is only done at the parameter level, if it is the introduction of some functional sql that is more dangerous, such as the above login interface, if the username uses this &quot;&#39;or 1 = 1; delete * from users; #&quot;, then after &quot;;&quot; is equivalent to another new sql, this sql is to delete the full table, is a very dangerous operation, so sql injection still needs special attention.
</code></pre><h3 id="Classification"><a href="#Classification" class="headerlink" title="Classification"></a>Classification</h3><p>Common SQL injection can be divided into two types according to parameter types: numeric and character.</p><p>When the parameter of the injection point is an integer, such as ID, num, page, etc., this form belongs to the numeric injection vulnerability. Similarly, when the injection point is a string, it is called character injection, which requires quotation marks to close.</p><p>It can also be divided into echo injection, error injection and blind injection according to the results returned by the database.</p><ul><li><p>Echo injection: The return result can be obtained directly in the current page where the injection point exists.</p></li><li><p>Error injection (Boolean injection): The program returns the error message of the database directly on the page. Although it does not return the query results of the database, some error statements can be constructed to obtain the desired results from the error message.</p></li><li><p>Blind note: The backend of the program masks the error information of the database, and there is no direct display of the result or error message. The result of the injection can only be judged by the logic and delay function of the database. According to the different forms of expression, blind note is divided into based boolean and based time.</p></li></ul><p>According to different injection positions and methods, it is divided into: post injection, get injection, cookie injection, blind injection, delay injection, search injection, base64 injection, no matter how many such classifications are, they can be summarized into the above two forms.</p><h3 id="Injection-test"><a href="#Injection-test" class="headerlink" title="Injection test"></a>Injection test</h3><h4 id="Digital-type"><a href="#Digital-type" class="headerlink" title="Digital type:"></a>Digital type:</h4><p>Guess the SQL statement:</p><p>Select field name from table name where id = 1;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://www.sql.com/xxx.php?id=1 assume the ID is the parameter where the injection exists</span><br><span class="line">http://www.sql.com/xxx.php?id=1 &#x27;statement reports an error</span><br><span class="line">http://www.sql.com/xxx.php?id=1 and 1 = 1 page returns results normally</span><br><span class="line">http://www.sql.com/xxx.php?id=1 and 1 = 2 page returns an error</span><br></pre></td></tr></table></figure><p>  If the results of the above test steps are all met, there may be a SQL injection vulnerability.</p><p>  Numeric injection generally occurs in weakly typed languages such as asp php. Weakly typed languages will automatically deduce variable types. For example, if the parameter id = 1, PHP will automatically deduce the data type of the ID to int type. If id = 1 and 1 = 1, then the ID is deduced to string type. However, for strongly typed languages such as Java and c #, if a string is converted to int type, an exception will be thrown and cannot be run. Therefore, numeric injection generally occurs in weakly typed languages, and strongly typed languages rarely exist.</p><h4 id="Character-type"><a href="#Character-type" class="headerlink" title="Character type:"></a>Character type:</h4><p>Guess the SQL statement:</p><p>Select field name from table name where id = ‘;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://www.sql.com/xxx.php?id=1 assume the ID is the parameter where the injection exists</span><br><span class="line">http://www.sql.com/xxx.php?id=1 &#x27;statement reports an error</span><br><span class="line">http://www.sql.com/xxx.php?id=1 &#x27;and 1 = 1 and&#x27; 1 &#x27;=&#x27; 1</span><br><span class="line">http://www.sql.com/xxx.php?id=1 &#x27;and 1 = 2 and&#x27; 1 &#x27;=&#x27; 1</span><br></pre></td></tr></table></figure><h4 id="Search-type"><a href="#Search-type" class="headerlink" title="Search type:"></a>Search type:</h4><p>Guess the SQL statement:</p><p>Select field from table name where username like ‘% k%’;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://www.sql.com/xxx.php?search=test assume that search exists as an injected parameter</span><br><span class="line">http://www.sql.com/xxx.php?search=test &#x27;statement reports an error</span><br><span class="line">http://www.sql.com/xxx.php?search=test% &#x27;and 1 = 1 and &#x27;%&#x27;=&#x27; page returns the result normally</span><br><span class="line">http://www.sql.com/xxx.php?search=test% &#x27;and 1 = 2 and &#x27;%&#x27;=&#x27; page returns an error</span><br></pre></td></tr></table></figure><h2 id="sqlmap"><a href="#sqlmap" class="headerlink" title="sqlmap"></a>sqlmap</h2><p>If we think that a text box may have SQL injection, we can use sqlmap to help us scan.</p><p>For example, I built a website locally, you can search the articles in the station, it can give me a true or false judgment according to the different keys I enter, then there may be Boolean injection.</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620081821696_iytob2.png" alt="image-20200620082754120"></p><p>At this time, we can find this search request through the Console:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615446/sql_injection/image-20200620081912352_gm4sc3.png" alt="image-20200620081912352"></p><p>After finding this request, we can use sqlmap to check whether our request has sql injection problems.</p><p>We can enter it in the console.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap.py -u http://localhost:8080/article/search?key=123 -dbs</span><br></pre></td></tr></table></figure><p>Try to get the table of the database in the background. If the fetch is successful, the following effects will be displayed:</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620082740546_yzowgw.png" alt="image-20200620082552344"></p><p>It can be seen that there is indeed a sql injection problem here, and we have successfully obtained the database name in the background.</p><p>After obtaining the database name, we can further obtain the table name.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py <span class="number">-3</span> sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>localhost:<span class="number">8080</span><span class="operator">/</span>article<span class="operator">/</span><span class="keyword">search</span>?key<span class="operator">=</span><span class="number">123</span> <span class="operator">-</span>D insecurity <span class="comment">--tables</span></span><br></pre></td></tr></table></figure><p>With this command, we can get what tables are in the insecurity database</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615757/sql_injection/image-20200620084424782_uqyhrq.png" alt="image-20200620084424782"></p><p>We can see that there are three tables in the entire db, namely user, atricle and flyway_schema_history</p><p>Further, we can obtain the column names in the table.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py <span class="number">-3</span> sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>localhost:<span class="number">8080</span><span class="operator">/</span>article<span class="operator">/</span><span class="keyword">search</span>?key<span class="operator">=</span><span class="number">123</span> <span class="operator">-</span>D insecurity <span class="operator">-</span>T insecurity <span class="comment">--columns</span></span><br></pre></td></tr></table></figure><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620085249277_yc3nh4.png" alt="image-20200620085249277"></p><p>It will list the name and type of each column in detail, and finally we can know the following results.</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620085054277_jxns66.png" alt="image-20200620085054277"></p><p>What’s the use of getting this table structure?</p><p>We can use the union statement to union any information I want to know into the return result of atricle. For example, I type in the search bar:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27; union select uid, uid, &#x27;123&#x27;, username, password, &#x27;123&#x27;, create_time, update_time, del  from user;%23&#x27;</span><br></pre></td></tr></table></figure><p>The username and password will be returned to the front-end through the author name and image link, respectively</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620085634320_w8oblo.png" alt="image-20200620085634320"></p><p>This way we can get the password of admin.</p><p>Even if we find that its login interface has injection issues, we don’t need passwords</p><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592615447/sql_injection/image-20200620090420970_yvyxb5.png" alt="image-20200620090420970"></p><p>As long as the password is this, I can enter anyone’s account.</p><p>Sqlmap also has many powerful features. I suggest you go to the doc. I have just come into contact with it.</p><p>Reference article:</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/post/5d56b641f265da03f12e565c">https://juejin.im/post/5d56b641f265da03f12e565c</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.kanxue.com/book-6-110.htm">https://www.kanxue.com/book-6-110.htm</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/2020/06/20/sql-injection/" title="SQL Injection, Getting Started Notes">https://sunra.top/en/2020/06/20/sql-injection/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/2020/06/18/HSTS/" rel="prev" title="HSTS"><i class="fa fa-chevron-left"></i> HSTS</a></div><div class="post-nav-item"> <a href="/en/2020/06/25/preSum/" rel="next" title="Prefix and">Prefix and<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/2020/06/20/sql-injection/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>