<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="The HTTPS protocol is a combination of HTTP + SSL&#x2F;TLS, and HTTP is the protocol used to obtain information from the World Wide Web server, so let’s start with the World Wide Web.  The World Wide Web a"><meta property="og:type" content="article"><meta property="og:title" content="Introduction to the HTTPS Protocol"><meta property="og:url" content="https://sunra.top/en/2020/04/19/https/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="The HTTPS protocol is a combination of HTTP + SSL&#x2F;TLS, and HTTP is the protocol used to obtain information from the World Wide Web server, so let’s start with the World Wide Web.  The World Wide Web a"><meta property="og:locale" content="en_US"><meta property="og:image" content="HTTPS://res.cloudinary.com/dvtfhjxi4/image/upload/v1587259061/computer_network/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200419091617_aku8ru.png"><meta property="article:published_time" content="2020-04-19T00:09:42.000Z"><meta property="article:modified_time" content="2025-01-24T05:44:39.304Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="HTTPS://res.cloudinary.com/dvtfhjxi4/image/upload/v1587259061/computer_network/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200419091617_aku8ru.png"><link rel="canonical" href="https://sunra.top/en/2020/04/19/https/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/2020/04/19/https/","path":"2020/04/19/https/","title":"Introduction to the HTTPS Protocol"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Introduction to the HTTPS Protocol | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#the-world-wide-web-and-http"><span class="nav-number">1.</span> <span class="nav-text">The World Wide Web and HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#question"><span class="nav-number">1.1.</span> <span class="nav-text">Question</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#uniform-resource-locator-url"><span class="nav-number">1.2.</span> <span class="nav-text">Uniform Resource Locator URL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hypertext-transfer-protocol-http"><span class="nav-number">1.3.</span> <span class="nav-text">Hypertext Transfer Protocol HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#proxy-server"><span class="nav-number">1.3.1.</span> <span class="nav-text">Proxy server</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#http-message-network-packet-structure"><span class="nav-number">1.3.2.</span> <span class="nav-text">HTTP message network packet structure</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ssltls"><span class="nav-number">2.</span> <span class="nav-text">SSL&#x2F;TLS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#role"><span class="nav-number">2.1.</span> <span class="nav-text">Role</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#basic-flow"><span class="nav-number">2.2.</span> <span class="nav-text">Basic flow</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#detailed-process"><span class="nav-number">2.3.</span> <span class="nav-text">Detailed process</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/2020/04/19/https/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Introduction to the HTTPS Protocol | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Introduction to the HTTPS Protocol</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-04-19 08:09:42" itemprop="dateCreated datePublished" datetime="2020-04-19T08:09:42+08:00">2020-04-19</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2025-01-24 13:44:39" itemprop="dateModified" datetime="2025-01-24T13:44:39+08:00">2025-01-24</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Network/" itemprop="url" rel="index"><span itemprop="name">Network</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/2020/04/19/https/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/2020/04/19/https/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>The HTTPS protocol is a combination of HTTP + SSL/TLS, and HTTP is the protocol used to obtain information from the World Wide Web server, so let’s start with the World Wide Web.</p><h2 id="the-world-wide-web-and-http"><a class="markdownIt-Anchor" href="#the-world-wide-web-and-http"></a> The World Wide Web and HTTP</h2><p>The World Wide Web (WWW) is not a special kind of computer network. The World Wide Web is a large-scale, online information repository, referred to as the web in English. The World Wide Web uses links to make it very convenient to access another site from one site on the Internet.</p><p>Every site on the World Wide Web contains many docs. The text in some of these docs is displayed in a special way. When we move the mouse over these places, the mouse arrow changes into the shape of a hand, which indicates that there is a link here. If we click on these links, we can link from this doc to another doc that may be far away.</p><p>It is precisely because of the emergence of the Internet that the Internet has changed from being used by a few computer experts to being used by ordinary people.</p><blockquote><p>We usually open web pages from the browser to obtain information from the World Wide Web server, using the HTTP protocol. But when we go to play LOL, the communication between the Client and the server can not be HTTP protocol.</p></blockquote><p>The World Wide Web is a distributed hypermedia. It is an extension of the hypertext system. The so-called hypertext refers to the text that contains links to other docs. A hypertext is made up of multiple sources of information that are distributed around the world.</p><p>** The Client program of the World Wide Web is the browser **, and the host where the World Wide Web doc is stored is the World Wide Web server, which runs the World Wide Web server program. ** The client program sends a request to the server program, and the server program sends the World Wide Web doc required by the client program **. The World Wide Web doc displayed in the browser is called a page.</p><span id="more"></span><h3 id="question"><a class="markdownIt-Anchor" href="#question"></a> Question</h3><p>From the above description, it can be seen that the World Wide Web must solve several problems.</p><ul><li>How to mark the World Wide Web network distributed throughout the network.<br> What protocol is used to implement various links on the World Wide Web?</li><li>How to make different styles of World Wide Web docs created by different authors can be displayed on various hosts on the Internet, and make it clear to users where links exist.</li><li>How to make it easy for users to find the information they need.</li></ul><p>To solve the first problem, the World Wide Web uses Uniform Resource Locator URLs to identify various docs on the World Wide Web and make each doc have a unique identifier URL throughout the entire Internet.</p><p>In order to solve the second problem, the interaction between the client program of the World Wide Web and the World Wide Web server adheres to a strict protocol, which is the HyperText Transfer Protocol HTTP (HyperText Transfer Protocol), which is an application layer protocol that uses TCP for reliable transmission.</p><p>To solve the third problem, the World Wide Web uses the Hypertext Markup Language (HTML).</p><p>The solution to the last problem is search engines.</p><h3 id="uniform-resource-locator-url"><a class="markdownIt-Anchor" href="#uniform-resource-locator-url"></a> Uniform Resource Locator URL</h3><p>A URL is equivalent to a network-wide extension of a file. It is a pointer to any accessible object on a machine connected to the Internet (not only for HTTP). Since different protocols are used to access different objects, it is also necessary to indicate the protocol required to read a certain object.</p><p>** The general form of a URL consists of four parts: &lt; protocol &gt;://&lt; host &gt;: &lt; port &gt;/&lt; path &gt; **</p><p>** Now some browsers for the convenience of users, when entering the URL, you can bar the front of the <a href="HTTP://or" rel="external nofollow noopener noreferrer" target="_blank">HTTP://or</a> even www to omit **.</p><h3 id="hypertext-transfer-protocol-http"><a class="markdownIt-Anchor" href="#hypertext-transfer-protocol-http"></a> Hypertext Transfer Protocol HTTP</h3><p>HTTP is the most transaction-oriented application layer protocol, which is an important foundation for reliable file delivery on the World Wide Web.</p><p>Each World Wide Web server has a server process that constantly listens on TCP port 80 to discover if a browser has made a connection establishment request to it. Once a connection establishment request is listened for and a TCP connection is established, the browser sends a request for a page like a World Wide Web server, and the server returns the requested page as a response.</p><p>HTTP specifies that each interaction between an HTTP client and an HTTP server consists of a request consisting of an ASCII string and a similar universal Internet extension, known as a “MIME-like” response.</p><p>HTTP uses connection-oriented TCP as the transport layer protocol to ensure reliable data transmission. HTTP does not have to consider how to retransmit data after it is discarded during transportation.</p><p>When the user clicks the mouse to link a World Wide Web doc, the HTTP protocol first establishes a TCP connection with the server, which requires a three-way handshake. When the first two times of the three-way handshake to establish a TCP connection are completed, the browser can use the HTTP request message network packet as the The data of the third message network packet is sent over. After the server receives the request, it returns the requested doc to the client as a response message network packet.</p><p>The above process is HTTP1.0, which requests a doc in the amount of time it takes to transmit the doc plus twice the RTT, one RTT for connecting the TCP connection, and another RTT for requesting and receiving the doc.</p><p>But the main disadvantage of 1.0 is that every request for a doc has twice the RTT overhead. If an object with many links on the homepage requires one connection, each download must have 2RTT. Another overhead is that the browser and server have to allocate caches and variables every time a new TCP link is established. In particular, the server needs to serve a large number of browsers, so this kind of non-persistent connection will burden the World Wide Web server heavily</p><p>The HTTP/1.1 protocol adopts a persistent connection, which maintains this connection for a period of time after the server returns a response, so that the same client and server can continue to send subsequent HTTP requests and responses on this connection. 1.1 has two working methods, one is non-pipelined and the other is pipelined. The first method requires waiting for the response from the previous request to arrive before sending the next request, while the pipelined method does not.</p><h4 id="proxy-server"><a class="markdownIt-Anchor" href="#proxy-server"></a> Proxy server</h4><p>A proxy server is a network entity, also known as a web cache, that temporarily stores some recent requests and responses in the cache.</p><h4 id="http-message-network-packet-structure"><a class="markdownIt-Anchor" href="#http-message-network-packet-structure"></a> HTTP message network packet structure</h4><p>HTTP has two types of message network packets:</p><ul><li>Request message network packet</li><li>response message network packet</li></ul><p><img src="HTTPS://res.cloudinary.com/dvtfhjxi4/image/upload/v1587259061/computer_network/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200419091617_aku8ru.png" alt="HTTPS://res.cloudinary.com/dvtfhjxi4/image/upload/v1587259061/computer_network/微信截图_20200419091617_aku8ru.png"></p><p>HTTP request and response message network packets are composed of three parts:</p><ul><li>Start line: used to distinguish between request message network packet and response message network packet, the request message is called the request line, and the response message is called the status line<br> Header line: Some information used to describe the body of a browser, server, or message network packet, which can have several lines or not</li><li>Entity body: It is generally not used in the request message, and this field may not be available in the message you want to use.</li></ul><p>This is just a brief introduction to HTTP. In practice, HTTP is very complex, and there are many types of headers used.</p><h2 id="ssltls"><a class="markdownIt-Anchor" href="#ssltls"></a> SSL/TLS</h2><p>Before understanding this content, you need to understand<a href="HTTPS://sunra.top/2019/10/19/Asymmetric_Encryption/">非对称加密，数字签名和证书</a></p><h3 id="role"><a class="markdownIt-Anchor" href="#role"></a> Role</h3><p>HTTP communication without SSL/TLS is unencrypted communication. All information transmission in plaintext brings three major risks.</p><blockquote><p>（1）</p><p>（2）</p><p>（3）</p></blockquote><p>The SSL/TLS protocol is designed to address these three major risks, hoping to achieve:</p><blockquote><p>（1）</p><p>（2）</p><p>（3）</p></blockquote><p>The Internet is an open environment, and both parties to the communication are unknown, which brings great difficulty to the design of the protocol. Moreover, the protocol must also be able to withstand all unimaginable attacks, which makes the SSL/TLS protocol extremely complex.</p><h3 id="basic-flow"><a class="markdownIt-Anchor" href="#basic-flow"></a> Basic flow</h3><p>The basic idea of the SSL/TLS protocol is to use public key encryption, that is to say, the Client first asks the server for the public key, and then encrypts the information with the public key. After the server receives the ciphertext, it decrypts it with its own private key.</p><p>However, there are two problems here.</p><p>** (1) How to ensure that the public key is not tampered with? **</p><blockquote><p>Solution: Put the public key in the [digital certificate] (HTTP: <a target="_blank" rel="noopener" href="//en.wikipedia.org/wiki/Digital_certificate">//en.wikipedia.org/wiki/Digital_certificate</a>). As long as the certificate is trusted, the public key is trusted.</p></blockquote><p>** (2) Public key encryption calculation is too large, how to reduce the time consumption? **</p><blockquote><p>Solution: For each session, the client and server generate a “session key”.</p></blockquote><p>Therefore, the basic process of the SSL/TLS protocol is as follows:</p><blockquote><p>（1）</p><p>（2）</p><p>（3）</p></blockquote><p>The first two steps of the above process are also known as the “handshake stage” (handshake).</p><h3 id="detailed-process"><a class="markdownIt-Anchor" href="#detailed-process"></a> Detailed process</h3><p>The “handshake phase” involves four communications, let’s look at them one by one. It should be noted that all communications in the “handshake phase” are plaintext.</p><p>** 4.1 Client sends a request (ClientHello) **</p><p>First, the client (usually the browser) first sends a request for encrypted communication to the server, which is called a ClientHello request.</p><p>In this step, the client mainly provides the following information to the server.</p><blockquote><p>（1）</p><p>（2）</p><p>（3）</p><p>（4）</p></blockquote><p>It should be noted here that the information sent by the Client does not include the domain name of the server. That is to say, in theory, the server can only contain one website, otherwise it will be unclear which website’s digital certificate should be provided to the Client. This is why usually a server can only have one digital certificate.</p><p>For users of virtual hosts, this is of course very inconvenient. In 2006, the TLS protocol joined a<a href="HTTP://tools.ietf.org/html/rfc4366" rel="external nofollow noopener noreferrer" target="_blank">Server Name Indication扩展</a>Allow the Client to provide the requested domain name to the server.</p><p>** 4.2 Server Response (SeverHello) **</p><p>After receiving the Client request, the server sends a response to the Client, which is called SeverHello. The server’s response includes the following content.</p><blockquote><p>（1）</p><p>（2）</p><p>（3）</p><p>（4）</p></blockquote><p>In addition to the above information, if the server needs to confirm the identity of the client, it will include a request for the client to provide a “Client certificate”. For example, Financial Institution often only allows authenticated clients to connect to its own network, and will provide official clients with a USB key, which contains a Client certificate.</p><p>** 4.3 Client Response **</p><p>After the client receives the server response, it first verifies the server certificate. If the certificate is not issued by a trusted authority, or the domain name in the certificate does not match the actual domain name, or the certificate has expired, a warning will be displayed to the visitor, who can choose whether to continue communication.</p><p>If there is no problem with the certificate, the Client will retrieve the server’s public key from the certificate. Then, send the following three pieces of information to the server.</p><blockquote><p>（1）</p><p>（2）</p><p>（3）</p></blockquote><p>The random number of the first item above is the third random number that appears in the entire handshake stage, also known as the “pre-master key”. With it, the Client and the server have three random numbers at the same time, and then both parties use the previously agreed encryption method to generate the same “session key” for this session.</p><p>As for why it is necessary to use three random numbers to generate “session keys”,<a href="HTTP://blog.csdn.net/dog250/article/details/5717162" rel="external nofollow noopener noreferrer" target="_blank">dog250</a>Well explained:</p><blockquote><p>&quot;Whether it is a client or a server, random numbers are required so that the generated key will not be the same every time. Since certificates are static in the SSL protocol, it is necessary to introduce a random factor to ensure the negotiated key randomness.</p><p>For the RSA key exchange algorithm, the pre-master-key itself is a random number, coupled with the randomness in the hello message, the three random numbers ultimately derive a symmetric key through a key derivator.</p><p>pre</p></blockquote><p>In addition, if the server requested a Client certificate in the previous step, the Client will send the certificate and related information in this step.</p><p>** Last response from 4.4 server **</p><p>After the server receives the third random number pre-master key from the client, it calculates the “session key” used to generate this session. Then, finally send the following information to the Client.</p><blockquote><p>(1) Code change notice, indicating that subsequent information will be sent using the encryption method and key agreed by both parties.</p><p>(2) The server handshake end notification indicates that the handshake phase of the server has ended. This item is also the hash value of all the content sent earlier, which is used for verification by the Client.</p></blockquote><p>At this point, the entire handshake phase is over. Next, the Client and server enter encrypted communication, using the normal HTTP protocol, but using the “session key” to encrypt the content.</p><p>Reference article:</p><p><a href="HTTPS://www.ruanyifeng.com/blog/2014/02/SSL_TLS.html" rel="external nofollow noopener noreferrer" target="_blank">HTTPS://www.ruanyifeng.com/blog/2014/02/SSL_TLS.html</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/2020/04/19/https/" title="Introduction to the HTTPS Protocol">https://sunra.top/en/2020/04/19/https/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/2020/04/18/TCP/" rel="prev" title="Introduction to TCP Protocol"><i class="fa fa-chevron-left"></i> Introduction to TCP Protocol</a></div><div class="post-nav-item"> <a href="/en/2020/04/23/token-storage-and-transport/" rel="next" title="Secure Storage and Transmission of Tokens">Secure Storage and Transmission of Tokens<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/2020/04/19/https/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>