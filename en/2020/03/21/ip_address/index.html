<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="IP Address  Two-level IP The initial IP Address is composed of two parts, namely the network number and the host number. Different network numbers specify the network segment to which the IP belongs."><meta property="og:type" content="article"><meta property="og:title" content="IP Address and Subnet Division, and the Difference from Intranet"><meta property="og:url" content="https://sunra.top/en/2020/03/21/ip_address/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="IP Address  Two-level IP The initial IP Address is composed of two parts, namely the network number and the host number. Different network numbers specify the network segment to which the IP belongs."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1584758269/computer_network/581342-20170503163928117-1456880074_sbfcsp.png"><meta property="article:published_time" content="2020-03-21T02:28:08.000Z"><meta property="article:modified_time" content="2025-01-06T09:30:06.456Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1584758269/computer_network/581342-20170503163928117-1456880074_sbfcsp.png"><link rel="canonical" href="https://sunra.top/en/2020/03/21/ip_address/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/2020/03/21/ip_address/","path":"2020/03/21/ip_address/","title":"IP Address and Subnet Division, and the Difference from Intranet"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>IP Address and Subnet Division, and the Difference from Intranet | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ip-address"><span class="nav-number">1.</span> <span class="nav-text">IP Address</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#two-level-ip"><span class="nav-number">1.1.</span> <span class="nav-text">Two-level IP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#some-characteristics-of-two-level-ip"><span class="nav-number">1.2.</span> <span class="nav-text">Some characteristics of two-level IP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ip-address-and-mac-address"><span class="nav-number">1.3.</span> <span class="nav-text">IP Address and MAC Address</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#level-3-ip-address-and-subnetting"><span class="nav-number">2.</span> <span class="nav-text">Level 3 IP Address and Subnetting</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#subnet-mask"><span class="nav-number">2.1.</span> <span class="nav-text">Subnet mask</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#packet-forwarding-when-using-subnets"><span class="nav-number">2.1.1.</span> <span class="nav-text">Packet forwarding when using subnets</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#subnet-and-intranet"><span class="nav-number">3.</span> <span class="nav-text">Subnet and intranet</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#nat-technology"><span class="nav-number">3.1.</span> <span class="nav-text">NAT technology</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cidr-construct-supernetwork"><span class="nav-number">4.</span> <span class="nav-text">CIDR construct supernetwork</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#use-binary-search-to-find-routes"><span class="nav-number">4.1.</span> <span class="nav-text">Use binary search to find routes</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/2020/03/21/ip_address/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="IP Address and Subnet Division, and the Difference from Intranet | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> IP Address and Subnet Division, and the Difference from Intranet</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-03-21 10:28:08" itemprop="dateCreated datePublished" datetime="2020-03-21T10:28:08+08:00">2020-03-21</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2025-01-06 17:30:06" itemprop="dateModified" datetime="2025-01-06T17:30:06+08:00">2025-01-06</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Network/" itemprop="url" rel="index"><span itemprop="name">Network</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/2020/03/21/ip_address/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/2020/03/21/ip_address/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="ip-address"><a class="markdownIt-Anchor" href="#ip-address"></a> IP Address</h2><h3 id="two-level-ip"><a class="markdownIt-Anchor" href="#two-level-ip"></a> Two-level IP</h3><p>The initial IP Address is composed of two parts, namely the network number and the host number. Different network numbers specify the network segment to which the IP belongs. It marks the network to which the host or router is connected. Each network number is unique in the entire Internet. The host number marks the host or router, and each host number is unique in the network number to which it belongs. So each IP is unique in the Internet.</p><p>This type of IP Address is called a two-level IP.</p><p>IP Address = {&lt; network number &gt;, &lt; host number &gt;}</p><span id="more"></span><p><img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1584758269/computer_network/581342-20170503163928117-1456880074_sbfcsp.png" alt="IP地址分类"></p><p>From the picture above we can see:</p><ul><li>A, B, C class address network number are 1, 2, 3 bytes long, and the network number field in front of each 1-3 bits of the category field, the values are 0, 10, 110.</li><li>The host number fields of Class A, B, and C addresses are 3, 2, and 1 byte long, respectively.</li><li>Class D addresses for multicast</li><li>Class E address reserved.</li><li>The addresses that can be assigned to classes A, B, and C are specified by the network number and the host number together, roughly (all 0 and all 1 addresses are reserved) twice as many as the latter (one bit difference), but a class A The number of addresses that can be assigned in an address is 256 times that of a class B address, because the number of bits in the host number looks up 8 bits.</li></ul><p>When a unit applies for an IP Address, it actually applies for an address with the same network number, where each host number is assigned by the unit itself, as long as it is not repeated.</p><h3 id="some-characteristics-of-two-level-ip"><a class="markdownIt-Anchor" href="#some-characteristics-of-two-level-ip"></a> Some characteristics of two-level IP</h3><ul><li>IP Address is a hierarchical address structure. ** There are two advantages to dividing it into two levels **. First, the IP Address management agency is only responsible for assigning network addresses when assigning IP Addresses, and the remaining host numbers are assigned by The unit that gets the network number assigns it itself. Second, ** routers only forward packets based on the network number connected to the destination host **, which will greatly reduce the size of the forwarding table that needs to be saved in the router and the time required to find routes.</li><li>IP Address is actually a flag of a host or router interface (and usually we say that the port is different), when a host connected to two networks, he must have two IP Address, and because it is two networks, the two IP Address network number must be different, this host becomes the most home host.</li><li>According to the Internet’s point of view, a network refers to a collection of hosts with the same network number. ** Several LANs connected by repeaters or bridges (working at the link layer) still belong to the same network **, because These LANs have the same network number, ** LANs with different network numbers must be connected by routers **.<br> All IP Addresses are equal.</li><li>The network number of the host or router inside the same ** LAN must be the same **.<br> ** Routers always have two or more IP Addresses, and the network number of each address is different from each other **.</li><li>When two routers are directly connected, the interfaces at both ends of the connection can also not be assigned an IP Address, which is called an unnumbered network.</li></ul><h3 id="ip-address-and-mac-address"><a class="markdownIt-Anchor" href="#ip-address-and-mac-address"></a> IP Address and MAC Address</h3><p>MAC address is used by the link layer and the physical layer. It is an address based on physical reality. It is fixed and will never change when the device appears, while IP Address is a logical address. It is dynamically assigned when a device accesses a certain network. The IP Address of the same device is different in different networks.</p><p>IP Address is placed in the header of the IP datagram, including the source address and destination address. When handing over the IP data packet to the link layer, the network layer will use the ARP protocol to find the next hop route of the destination address. The MAC address, and then encapsulate it into the MAC frame and hand it over to the link layer. The link layer forwards the MAC frame according to the MAC address. During the entire routing and forwarding process, the IP Address is always unchanged, but the MAC address will continue to be replaced by the next hop MAC address of the destination IP in the current route.</p><h2 id="level-3-ip-address-and-subnetting"><a class="markdownIt-Anchor" href="#level-3-ip-address-and-subnetting"></a> Level 3 IP Address and Subnetting</h2><p>I just said the second level IP Address, so why do you need the third level IP Address?</p><ul><li>** IP Address space utilization is sometimes very low **, a class A address, the host number has 24 bits, the number of hosts can be allocated up to 10 million units, but in fact few units will be very good to use.</li><li>** Two-level IP Address is not flexible enough (note that it is not flexible enough, not insufficient, subnetting does not solve the problem of insufficient IP Address) **. Sometimes, an organization needs to open a new network in a new location, which is impossible before applying for a new network number.</li></ul><p>In order to solve the above problem, in 1985, a subnet number field was added to the IP Address. This makes the second-level IP Address become the third-level IP Address.</p><p>The basic idea of dividing subnets is as follows:</p><ul><li>A unit with many physical networks can divide the physical network to which it belongs into multiple subnets. The network outside the unit cannot see that the entire network is composed of multiple subnets, because the external network number of this unit is still the same., is the same network.</li><li>The way to divide the subnet is ** to borrow several bits from the host number as the subnet number **, and the host number also reduces the corresponding number of bits, so the second-level IP Address in the unit also changes from the second-level IP Address to the third-level IP Address.</li><li>Datagrams from other networks still find the network where the unit is located through the network number. After entering the network of the unit, find the destination subnet according to the subnet number. Then the router of the destination subnet delivers the data packet to the destination host.</li></ul><h3 id="subnet-mask"><a class="markdownIt-Anchor" href="#subnet-mask"></a> Subnet mask</h3><p>From the header of the IP data packet is no way to see whether the source host or destination host subnetting, because the header of the IP data packet does not have any field indicating whether subnetting, so we must find another way, that is ** subnet mask **.</p><p>The advantage of using a subnet mask is obvious, that is, even a secondary IP address can use the subnet mask method to obtain the network number of the destination IP. ** Using a subnet mask, the method of obtaining a network number through a secondary or tertiary IP address is the same **, which is to “and” each bit of the subnet mask with the destination IP.</p><p>So how is the Subnet mask calculated? In fact, it is very simple, that is, the bit occupied by all network accounts (including network accounts and Subnet accounts) is 1, and the rest is 0.</p><p>After the addition of subnetting, you need to re-route forwarding table to maintain a multi-subnet mask, ** now there are three columns in the routing table, the destination network address, the subnet mask, the next hop address **, when a data packet over, row by row with the destination IP subnet mask, and the result if the same destination network address, the matching is successful, the next hop address of the column into the MAC frame encapsulation.</p><h4 id="packet-forwarding-when-using-subnets"><a class="markdownIt-Anchor" href="#packet-forwarding-when-using-subnets"></a> Packet forwarding when using subnets</h4><ol><li>Extract the destination IP Address D from the header of the received datagram.</li><li>First, determine whether it is direct delivery. Check each network directly connected to the router one by one: use the subnet mask and D of each network to perform a bit-by-bit “AND” to see if the result matches the corresponding network address. If it matches, the packet is delivered directly (first, use the matching route to convert D into a physical address, and then encapsulate it into a MAC frame) to complete the task, otherwise it is indirect delivery, execute 3.</li><li>If there is a specific host route with destination address D in the routing table, deliver the datagram directly to the next hop route specified in the routing table, otherwise execute 4.</li><li>For each row in the routing table (destination network address, subnet mask, next hop address), use the subnet mask in it to “AND” with D bit by bit, and the result is N. If N matches the destination network address, the data packet is passed to the next hop address specified in the row.</li><li>If there is a default route in the routing table, send the datagram to the default route, otherwise execute 6.</li><li>Report an error forwarding the packet.</li></ol><h2 id="subnet-and-intranet"><a class="markdownIt-Anchor" href="#subnet-and-intranet"></a> Subnet and intranet</h2><p>As mentioned just now, subnetting cannot solve the problem of insufficient IP Addresses, so what technology can alleviate the problem of insufficient IP Addresses? Here we will talk about ** NAT technology **.</p><h3 id="nat-technology"><a class="markdownIt-Anchor" href="#nat-technology"></a> NAT technology</h3><p>NAT technology is simply the intranet IP (intranet IP Address is not applicable to the public IP, such as 192.168.0.1) address and public IP mapping, NAT is also divided into many kinds, such as static mapping, that is, one-to-one mapping, this way the number of internal private addresses on the number of external addresses, does not save IP resources, the second is dynamic NAT, the protocol maintains a pool of external IP, when the internal IP needs to send data When external, dynamically assign an external IP to him, somewhat similar to DHCP leased IP Address. The third is the most effective, also called PAT, which maps the IP + Port of the intranet to the IP + Port of the extranet.</p><p>Those who are interested can take a look.<a href="https://sunra.top/posts/303b575/">NAT与内网穿透</a>。</p><h2 id="cidr-construct-supernetwork"><a class="markdownIt-Anchor" href="#cidr-construct-supernetwork"></a> CIDR construct supernetwork</h2><p>The NAT mentioned above is to allow multiple hosts in the intranet to share a public network IP, which is somewhat similar to open source, while CIDR is more inclined to throttle. By breaking the classification of network addresses, network addresses are not limited to the ABC class. It is more flexible to assign network address numbers of different lengths to units with different needs to reduce unnecessary consumption of IP Addresses.</p><p>As early as RFC1009, it was pointed out that subnet masks of different lengths can be used in subnets, called Variable Length Subnet Mask (VLSM), and based on VLSM, a classification-free addressing method was developed. The official name is Classless Inter-Domian Routing CIDR (Classless Inter-Domian Routing).</p><p>The two main features of CIDR:</p><ul><li>** CIDR eliminates the traditional Class A, Class B and Class C addresses and the concept of subnetting **, thus allocating IPv4 address space more efficiently, thus allocating IPv4 address space more efficiently, and in the new IPv6 Allow the scale of the Internet to continue to grow before use. CIDR divides the 32-bit IP Address into two parts before and after, the front is the ** network prefix **, which is used to designate the network, and the latter part is used to indicate the host, so ** CIDR makes the IP Address change from level 3 back to level 2 **.</li><li>CIDR will ** network prefix ** are the same ** consecutive ** IP Address composed of ** CIDR address block **.</li></ul><p>CIDR also uses address masks, which are used and generated in the same way as subnet masks.</p><p>It should be noted that the so-called CIDR does not use subnets, which means that CIDR does not specify several bits as subnet numbers in the address of 32. However, once a CIDR address block is assigned, it is still possible to subnet within the unit.</p><p>Since there are many addresses in a CIDR address block, the CIDR address block is used in the routing table to find the destination network. The aggregation of this address is called ** route aggregation **, and it can also be called ** to constitute a supernetwork **.</p><p>Assuming that an ISP has 206.0.64.0/18 have address blocks, which is equivalent to having 64 Class C networks, if we use CIDR, we can very flexibly assign address blocks of different sizes to units with different needs. At the same time, if CIDR is not used, each router that exchanges information with the ISP needs to save 64 routing information of the ISP, but with CIDR’s ** address aggregation **, each router only needs to save one 206.0.64.0/18.</p><p>When address aggregation occurs, then another problem is inevitable, that is, it is possible that the destination address of a request can find multiple matches in the routing table. At this time, we will use the longest prefix matching strategy., as the name suggests, is to choose the route with the longest prefix in the matching item.</p><h3 id="use-binary-search-to-find-routes"><a class="markdownIt-Anchor" href="#use-binary-search-to-find-routes"></a> Use binary search to find routes</h3><p>After using CIDR, the lookup process of the routing table becomes more complicated due to the need to find the longest prefix match, so we need good data structures and advanced fast lookup methods.</p><p>One of the most commonly used is ** binary leads **. In this tree structure, the left-to-right bit values in the IP Address determine the path extending down from the root node layer by layer, and each path in the binary leads Represents each address stored in the routing table.</p><p>The construction process of the binary leads tree is also very simple. The input is all the IP Addresses in the current routing table. We find the ** unique prefix ** of each IP Address. The so-called unique prefix refers to all the IP Addresses in the table. Among them, the prefix is unique. As long as the unique prefix matches, only one route can be found.</p><p>By constructing a binary leads tree in this way, the maximum depth is 32 layers, which means that 32 bits must be used to find the only route in the routing table of this router.</p><p>Of course, it is not enough to get the prefix match through the binary leads tree. If we find the only record through the binary leads tree, we must also use the subnet mask and network prefix in the record to verify whether it is the network address of the destination address.</p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/2020/03/21/ip_address/" title="IP Address and Subnet Division, and the Difference from Intranet">https://sunra.top/en/2020/03/21/ip_address/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/2020/03/13/v-charts/" rel="prev" title="v-charts"><i class="fa fa-chevron-left"></i> v-charts</a></div><div class="post-nav-item"> <a href="/en/2020/03/25/microservices-reading/" rel="next" title="Introduction to Microservices">Introduction to Microservices<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2025</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css" integrity="sha256-hLTCMFlKxdNgPXyWlSSxYN0ykJmxxq9Yt3MNfdRGWeA=" crossorigin="anonymous"><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/2020/03/21/ip_address/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>