<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="I encountered several problems in my work this week, all of which are errors reported in the header of the http protocol. They can be roughly divided into three categories, Referrer Policy, Breakpoint"><meta property="og:type" content="article"><meta property="og:title" content="Parameter analysis and application of http protocol header"><meta property="og:url" content="https://sunra.top/en/2020/01/25/http-headers-part-params/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="I encountered several problems in my work this week, all of which are errors reported in the header of the http protocol. They can be roughly divided into three categories, Referrer Policy, Breakpoint"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2020-01-25T02:09:23.000Z"><meta property="article:modified_time" content="2023-09-25T13:21:34.456Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/2020/01/25/http-headers-part-params/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/2020/01/25/http-headers-part-params/","path":"2020/01/25/http-headers-part-params/","title":"Parameter analysis and application of http protocol header"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Parameter analysis and application of http protocol header | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Referrer"><span class="nav-number">1.</span> <span class="nav-text">Referrer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Referer"><span class="nav-number">1.1.</span> <span class="nav-text">Referer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Referer-1"><span class="nav-number">1.2.</span> <span class="nav-text">Referer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Empty-string"><span class="nav-number">1.2.1.</span> <span class="nav-text">Empty string</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#no-referrer"><span class="nav-number">1.2.2.</span> <span class="nav-text">no-referrer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#no-referrer-when-downgrade"><span class="nav-number">1.2.3.</span> <span class="nav-text">no-referrer-when-downgrade</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#same-origin"><span class="nav-number">1.2.4.</span> <span class="nav-text">same-origin</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#origin"><span class="nav-number">1.3.</span> <span class="nav-text">origin</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#strict-origin"><span class="nav-number">1.3.1.</span> <span class="nav-text">strict-origin</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#origin-when-cross-origin"><span class="nav-number">1.3.2.</span> <span class="nav-text">origin-when-cross-origin</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#strict-origin-when-cross-origin"><span class="nav-number">1.3.3.</span> <span class="nav-text">strict-origin-when-cross-origin</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#unsaft-url"><span class="nav-number">1.3.4.</span> <span class="nav-text">unsaft-url</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Referrer-Policy-change-method"><span class="nav-number">1.4.</span> <span class="nav-text">Referrer-Policy change method</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Range-request"><span class="nav-number">2.</span> <span class="nav-text">Range request</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP"><span class="nav-number">3.</span> <span class="nav-text">HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Whether-to-support-scope-requests"><span class="nav-number">3.1.</span> <span class="nav-text">Whether to support scope requests</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Usage-scope-request"><span class="nav-number">3.2.</span> <span class="nav-text">Usage scope request</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Resource-changes"><span class="nav-number">3.3.</span> <span class="nav-text">Resource changes</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/2020/01/25/http-headers-part-params/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Parameter analysis and application of http protocol header | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Parameter analysis and application of http protocol header</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-01-25 10:09:23" itemprop="dateCreated datePublished" datetime="2020-01-25T10:09:23+08:00">2020-01-25</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2023-09-25 21:21:34" itemprop="dateModified" datetime="2023-09-25T21:21:34+08:00">2023-09-25</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Network/" itemprop="url" rel="index"><span itemprop="name">Network</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/2020/01/25/http-headers-part-params/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/2020/01/25/http-headers-part-params/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>I encountered several problems in my work this week, all of which are errors reported in the header of the http protocol. They can be roughly divided into three categories, Referrer Policy, Breakpoint Resume, and Range Request. Here I have searched and sorted out a little content and applications.</p><span id="more"></span><h2 id="Referrer"><a href="#Referrer" class="headerlink" title="Referrer"></a>Referrer</h2><h3 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h3><p>The first thing to do is to understand what a Referer is.</p><p>Simply put, when you initiate an http request, the’referrer ‘field in the request header indicates which page you initiated the request from. For a detailed explanation, please see Mr. Ruan Yifeng’s<a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.ruanyifeng.com/blog/2019/06/http-referer.html">Http Referer 教程</a></p><h3 id="Referer-1"><a href="#Referer-1" class="headerlink" title="Referer"></a>Referer</h3><p>Referrer-Policy, which controls the content of referrer in the request header, is currently a candidate standard, although some browsers already support it.</p><p>Currently’Referrer-Policy ‘only contains the following values:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">enum ReferrerPolicy &#123;</span><br><span class="line">&quot;&quot;,</span><br><span class="line">&quot;no-referrer&quot;,</span><br><span class="line">&quot;no-referrer-when-downgrade&quot;,</span><br><span class="line">&quot;same-origin&quot;,</span><br><span class="line">&quot;origin&quot;,</span><br><span class="line">&quot;strict-origin&quot;,</span><br><span class="line">&quot;origin-when-cross-origin&quot;,</span><br><span class="line">&quot;strict-origin-when-cross-origin&quot;,</span><br><span class="line">&quot;unsafe-url&quot;</span><br><span class="line">Copy the code</span><br></pre></td></tr></table></figure><h4 id="Empty-string"><a href="#Empty-string" class="headerlink" title="Empty string"></a>Empty string</h4><p>If set to an empty string, the content of’referrer ‘is set according to the browser’s mechanism by default, which is the same as’no-referrer-when-downgrade’ by default.</p><h4 id="no-referrer"><a href="#no-referrer" class="headerlink" title="no-referrer"></a>no-referrer</h4><p>Do not display any information about’referrer ‘in the request header.</p><h4 id="no-referrer-when-downgrade"><a href="#no-referrer-when-downgrade" class="headerlink" title="no-referrer-when-downgrade"></a>no-referrer-when-downgrade</h4><p>This is the default value. When jumping from https website to http website or requesting its resources (security downgrade HTTPS → HTTP), the information of’referrer ‘is not displayed. In other cases (security sibling HTTPS → HTTPS, or HTTP → HTTP), the full URL information of the source website is displayed in’referrer’.</p><h4 id="same-origin"><a href="#same-origin" class="headerlink" title="same-origin"></a>same-origin</h4><p>Indicates that the browser will only display’referrer ‘information to websites with the same origin, and it is the complete URL information. The so-called homologous website is a website with the same protocol, domain name, and port.</p><h3 id="origin"><a href="#origin" class="headerlink" title="origin"></a>origin</h3><p>Indicates that the browser only displays the source address (i.e. protocol, domain name, port) of the source website in the referrer field, not the full path.</p><h4 id="strict-origin"><a href="#strict-origin" class="headerlink" title="strict-origin"></a>strict-origin</h4><p>This policy is more secure, similar to the’origin ‘policy, but does not allow’referrer’ information to be displayed in requests from https websites to http websites (security degradation).</p><h4 id="origin-when-cross-origin"><a href="#origin-when-cross-origin" class="headerlink" title="origin-when-cross-origin"></a>origin-when-cross-origin</h4><p>When sending a request to a same-origin website, the Browser will display the complete URL information in the referrer, when sending a Non-Same-Origin website, only the source address (protocol, domain name, port) will be displayed.</p><h4 id="strict-origin-when-cross-origin"><a href="#strict-origin-when-cross-origin" class="headerlink" title="strict-origin-when-cross-origin"></a>strict-origin-when-cross-origin</h4><p>Similar to’origin-when-cross-origin ‘, except that’referrer’ information is not allowed to appear in requests from https websites to http websites (security degradation).</p><h4 id="unsaft-url"><a href="#unsaft-url" class="headerlink" title="unsaft-url"></a>unsaft-url</h4><p>The browser will always display the complete URL information in the’referrer ‘field, regardless of the request sent to any website</p><h3 id="Referrer-Policy-change-method"><a href="#Referrer-Policy-change-method" class="headerlink" title="Referrer-Policy change method"></a>Referrer-Policy change method</h3><p>There can be the following 5 methods:</p><p> <strong>1.</strong> Set via Referrer-Policy HTTP header:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Referrer-Policy: origin copy code</span><br></pre></td></tr></table></figure><p> <strong>2.</strong> Change the’Referrer Policy ‘via the’element’ to directly modify the content named’referrer ‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt; Meta name = &quot;referrer&quot; content = &quot;origin&quot; &gt; copy code</span><br></pre></td></tr></table></figure><p> <strong>3.</strong> Here <a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a">``</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/area">``</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img"><code>![img]()</code></a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe">``</a>, or<a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link">``</a>The element sets the’referrerpolicy ‘attribute</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt; a href = &quot;http://example.com&quot; referrerpolicy = &quot;origin&quot; &gt; copy code</span><br></pre></td></tr></table></figure><p> <strong>4.</strong> If you need to set not to display’referrer ‘information, you can also give <a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a">``</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/area">``</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link">``</a>The element sets the link relationship of’rel ‘.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;http://example.com&quot; rel=&quot;noreferrer&quot;&gt;</span><br></pre></td></tr></table></figure><h2 id="Range-request"><a href="#Range-request" class="headerlink" title="Range request"></a>Range request</h2><p>Range requests are mainly requests or uploads for larger files, and you can only operate on a certain segment of it.</p><p>A more common scenario is to resume uploading/downloading when the network is not good, you can continue to obtain only part of the content after disconnecting. For example, downloading software online has already downloaded 95%. At this time, the network is disconnected. If range requests are not supported, you will be forced to start downloading all over again. But if there is the blessing of range requests, you only need to download the last 5% of the resources to avoid re-downloading.</p><p>Another scenario is multi-threaded download. For large files, multiple threads are opened, and each thread downloads a certain section of them. After the final download is completed, it is spliced locally into a complete file, which can make more efficient use of resources.</p><p>These are two common scenarios. Next, let’s take a look at the technical details of HTTP protocol support for range requests.</p><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><h3 id="Whether-to-support-scope-requests"><a href="#Whether-to-support-scope-requests" class="headerlink" title="Whether to support scope requests"></a>Whether to support scope requests</h3><p>HTTP itself is a stateless “loose” protocol, and after many iterations, it only supports range requests on top of HTTP/1.1 (RFC2616). So if either client or server level is lower than HTTP/1.1, we should not use the function of range requests.</p><p>In HTTP/1.1, a response header’Access-Ranges’ is explicitly declared to mark whether range requests are supported, with only one optional parameter’bytes’.</p><p>For example, here is an MP4 response header, you can see that it is marked with’Accept-Ranges: bytes’, which identifies the current resource support range request.</p><h3 id="Usage-scope-request"><a href="#Usage-scope-request" class="headerlink" title="Usage scope request"></a>Usage scope request</h3><p>If it has been determined that both sides support range requests, we can use it when requesting resources.</p><p>All files are ultimately bytes stored on disk or in memory, and the files to be operated on can be divided in bytes. In this way, only HTTP support is required to request resources in the range of n to n + x for the file to achieve the range request.</p><p>HTTP/1.1 defines a Ranges header to specify the range of the request entity. Its range is between ‘0 - Content-Length’, separated by ‘-‘…</p><p>For example, the resource content of 1000 bytes has been downloaded. If you want to continue downloading the resource content after that, just add’Ranges: bytes = 1000- ‘to the header of the HTTP request.</p><p>Range also has several different ways to limit the range, which can be flexibly customized according to your needs.</p><ul><li><p>500-1000: Specifies the range of start and end, generally used for multi-threaded downloads.</p></li><li><ol><li><ul><li>500-: Specify the start interval, which is passed to the end. This is more suitable for resuming transmission at breakpoints, or online playback, etc.</li></ul></li></ol></li><li><ol><li><ul><li>-500: No start interval, only means the content entity that needs the last 500 bytes.</li></ul></li></ol></li><li><ol><li><ul><li>100-300, 1000-3000: Specify multiple ranges. There are few scenarios used in this way, just learn about it.</li></ul></li></ol></li></ul><p>The HTTP protocol is a bilateral negotiation protocol. Since the request header has been determined to use Ranges, it is also necessary to use the’Content-Ragne ‘response header to mark the physical content range of the response.</p><p>The format of’Content-Range ‘is also very clear. First, mark its unit as bytes, and then mark the currently passed content entity range and total length.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Range: bytes 100-999/1000</span><br></pre></td></tr></table></figure><p>In this example, content entities in the range of 100~ 999 are passed, and the total size of the resource file is 1000 bytes. And the HTTP response status code at this time is’ 206 Partial Content ‘.</p><h3 id="Resource-changes"><a href="#Resource-changes" class="headerlink" title="Resource changes"></a>Resource changes</h3><p>When we download large-scale resources in some download tools, we occasionally pause and re-download in the middle, and we may encounter the situation that it starts downloading again.</p><p>This may seem to be the failure of the HTTP scope request, but in fact it is not necessarily the case. It is likely that the requested resource has changed during the process of the request.</p><p>If during the download process, the downloaded source resource file has changed, but the URL has not changed, the file length may have changed at this time (which is very easy to find). In extreme cases, even if there is no length change, you will continue to Download, it is likely that after the final download is completed, the downloaded content cannot be spliced into the file we need.</p><p>If we need to download a resource from the server, we must prevent possible changes to this resource. Before talking about <a target="_blank" rel="external nofollow noopener noreferrer" href="http://mp.weixin.qq.com/s?__biz=MzIxNjc0ODExMA&amp;mid=2247485517&amp;idx=1&amp;sn=3edffef8db15d92c26072d85df1cc5a8&amp;chksm=9785116ca0f2987a4ccf77339800873d092c1bded522d50fcf03aec98a9f51b23355e28aa3b7#rd">HTTP 缓存</a>的时候讲到，在 HTTP 协议中，可以通过 ETag 或者 Last-Modified 来标识当前资源是否变化。</p><ul><li>ETag: A verification token fingerprint of the current file, used to identify the uniqueness of the file.</li><li>Last-Modified: marks the time when the current file was last modified.</li></ul><p>In the HTTP range request, you can also use these two fields to distinguish the resource of the segmented request. Whether it has been modified or not, you only need to put it in the request header’If-Range ‘in the request message network packet header.’ If-Range ‘uses either of the’ETag’ or’Last-Modified ‘parameters, and you can fill it in as it is.</p><p>References:</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/post/5cd81b59518825686a06fd05">https://juejin.im/post/5cd81b59518825686a06fd05</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referrer-Policy">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referrer-Policy</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/post/5b555f055188251af25700aa">https://juejin.im/post/5b555f055188251af25700aa</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.jianshu.com/p/934d3e8d371e">https://www.jianshu.com/p/934d3e8d371e</a></p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/2020/01/25/http-headers-part-params/" title="Parameter analysis and application of http protocol header">https://sunra.top/en/2020/01/25/http-headers-part-params/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/2020/01/17/js-modules2/" rel="prev" title="JavaScript Modularization Syntax"><i class="fa fa-chevron-left"></i> JavaScript Modularization Syntax</a></div><div class="post-nav-item"> <a href="/en/2020/02/01/pwa/" rel="next" title="PWA">PWA<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/2020/01/25/http-headers-part-params/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>