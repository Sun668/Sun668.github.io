<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="Today, when I was making up the test, I encountered the problem of not being able to identify the import. After being solved by babel’s dynamic import plugin, I had a little doubt about the keywords t"><meta property="og:type" content="article"><meta property="og:title" content="JavaScript Modularization Syntax"><meta property="og:url" content="https://sunra.top/en/2020/01/17/js-modules2/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="Today, when I was making up the test, I encountered the problem of not being able to identify the import. After being solved by babel’s dynamic import plugin, I had a little doubt about the keywords t"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2020-01-17T10:31:15.000Z"><meta property="article:modified_time" content="2023-08-12T14:12:26.390Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/2020/01/17/js-modules2/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/2020/01/17/js-modules2/","path":"2020/01/17/js-modules2/","title":"JavaScript Modularization Syntax"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>JavaScript Modularization Syntax | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#History"><span class="nav-number">1.</span> <span class="nav-text">History</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Aspects-of-use"><span class="nav-number">2.</span> <span class="nav-text">Aspects of use</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#require-exports"><span class="nav-number">2.1.</span> <span class="nav-text">require&#x2F;exports</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#require-exports-1"><span class="nav-number">2.2.</span> <span class="nav-text">require&#x2F;exports</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:10px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/2020/01/17/js-modules2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="JavaScript Modularization Syntax | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> JavaScript Modularization Syntax</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-01-17 18:31:15" itemprop="dateCreated datePublished" datetime="2020-01-17T18:31:15+08:00">2020-01-17</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2023-08-12 22:12:26" itemprop="dateModified" datetime="2023-08-12T22:12:26+08:00">2023-08-12</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/2020/01/17/js-modules2/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/2020/01/17/js-modules2/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Today, when I was making up the test, I encountered the problem of not being able to identify the import. After being solved by babel’s dynamic import plugin, I had a little doubt about the keywords that are often used at ordinary times, import, export, exports, and require, so I sorted out. The evolution process and relationship between them.</p><span id="more"></span><p>I mainly understand this problem through these three blogs combined with my usual actual development experience:</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://segmentfault.com/a/1190000011081338">JavaScript模块化演进历史</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.zhihu.com/question/56820346">require和import的区别</a></p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://juejin.im/post/5a2e5f0851882575d42f5609">import, require, export, module.exports混合使用详解</a></p><h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><p>To sum up, the Modularization of js has probably gone through three important stages. The first stage is that there is no Modularization at all, and all variables and methods are global. The second stage is the various ways proposed by js developers in the community to implement Modularization, including the original CommonJS, RequireJS with AMD as the core, and SeaJS with CMD as the core. The third stage is the esModule specification launched by es6, which is import and export. The second stage is actually not the specification of the js syntax itself, but a module encapsulation method proposed by the developers themselves. The third way is the new syntax of es6, which is not well supported in most cases. Generally, it will be converted by babel into the require and exports syntax of CommonJS, which is why we sometimes have it in development. The reason why various keywords can be mixed, you think you are using esmodule, but in fact it has been converted by babel into the old syntax of es5.</p><p>In the first stage, all variables are global, so there is no concept of modularization at all.</p><p>In the second stage, the first is the various module encapsulation methods proposed by developers, such as namespaces, which can solve the problem of global variables everywhere, such as:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// greeting.js</span></span><br><span class="line"><span class="keyword">var</span> app = &#123;&#125;;</span><br><span class="line">app.<span class="property">helloInLang</span> = &#123;</span><br><span class="line">  <span class="attr">en</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">  <span class="attr">is</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">  <span class="attr">en</span>: <span class="string">&#x27;Hello world!&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line">app.<span class="property">writeHello</span> = <span class="keyword">function</span> (<span class="params">lang</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(helloInLang[lang]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// third_party_script.js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">writeHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;The script is broken&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>However, there is no privacy at all. All properties are exposed to the global object, which can be accessed and manipulated everywhere</p><p>So someone combined the immediate execution of function and closure to solve the problem of private variables, such as:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> greeting = (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="variable language_">module</span> = &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> helloInLang = &#123;</span><br><span class="line">    <span class="attr">en</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">    <span class="attr">is</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">    <span class="attr">en</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">getHello</span> = <span class="keyword">function</span>(<span class="params">lang</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> helloInLang[lang];</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">writeHello</span> = <span class="keyword">function</span>(<span class="params">lang</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="variable language_">module</span>.<span class="title function_">getHello</span>(lang));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">module</span>;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>Immediately executing the function itself has its own independent scope, where declared variables only fall under that scope, and private variables can only be accessed elsewhere through the method returned by immediately executing the function.</p><p>Although the above two methods solve the problem of a little module, but still can not be a good relationship between the management module, this point until the arrival of Node.js, CommonJS specification landing can be solved to a certain extent.</p><p>CommonJS is a synchronous solution that considers Node.js running at the server level, mainly by’require ‘to load dependencies, and by’exports’ or’module.exports’ to expose interfaces or data.</p><p>Because the server through the’require ‘loading resources are directly read the file, so the time required in the middle can be ignored, but in the browser that needs to rely on HTTP to obtain resources, the time required for the acquisition of resources is uncertain, which leads to the need to use asynchronous mechanism, on behalf of the main two:</p><ul><li>Based on <a target="_blank" rel="external nofollow noopener noreferrer" href="http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition">AMD</a> The RequireJS</li><li>Based on <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cmdjs/specification/blob/master/draft/module.md">CMD</a> Of SeaJS</li></ul><p>They are in the browser to achieve the “define”, “require” and “module” of the core functions, although the two goals are the same, but the implementation of the way or ideas, or some differences, AMD biased dependent on the front, CMD biased to use the idea of running, resulting in dependencies loading and running time points will be different, about the comparison of the two, there are many on the Internet, here recommended a few for reference only:</p><ul><li>《<a target="_blank" rel="external nofollow noopener noreferrer" href="https://lifesinger.wordpress.com/2011/05/17/the-difference-between-seajs-and-requirejs/">SeaJS 和 RequireJS 的异同</a>》</li><li>《<a target="_blank" rel="external nofollow noopener noreferrer" href="https://div.io/topic/430">再谈 SeaJS 与 RequireJS 的差异</a>》</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// CMD</span><br><span class="line">define(function (require) &#123;</span><br><span class="line">    Var a = require (&#x27;./a &#x27;); // &lt;- to load and run module a</span><br><span class="line">    Var b = require (&#x27;./b &#x27;); // &lt;- to load and run module b</span><br><span class="line">    // more code ..</span><br><span class="line">&#125;)</span><br><span class="line">// AMD</span><br><span class="line">define(</span><br><span class="line">    [&#x27;./a&#x27;, &#x27;./b &#x27;], // &lt;- predeclaration, i.e. modules a and b are loaded and run before the subject runs</span><br><span class="line">    function (a, b) &#123;</span><br><span class="line">        // more code ..</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>Through examples, you can see that in addition to the differences in grammar, the main differences between the two are:</p><blockquote><p>When to load and run dependencies?</p></blockquote><p>This is also one of the main reasons for questioning AMD in the CommonJS community. Many people think that it destroys the specification. In contrast, the CMD model simply removes the outer wrapper of’define ‘, which is the standard CommonJS implementation, so CMD is the closest to CommonJS. Asynchronous Modularization scheme.</p><p>Then came the formal definition of modules in ES6</p><p>In June 2015, <strong>ECMAScript2015</strong> , which is <strong>ES6</strong> , was released. JavaScript finally implemented the module function at the level of language standards, so that the dependencies of the module can be determined during compilation, as well as its input and output variables. Unlike CommonJS, AMD and the like, which need to be determined at runtime (for example, tools such as FIS can only preprocess dependencies, which are essentially parsed at runtime), it has become a common module solution for browsers and servers.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib/greeting.js</span></span><br><span class="line"><span class="keyword">const</span> helloInLang = &#123;</span><br><span class="line">    <span class="attr">en</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">    <span class="attr">is</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">    <span class="attr">en</span>: <span class="string">&#x27;Hello world!&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getHello</span> = (<span class="params">lang</span>) =&gt; (</span><br><span class="line">    helloInLang[lang];</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">sayHello</span> = (<span class="params">lang</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getHello</span>(lang));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hello.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; sayHello &#125; <span class="keyword">from</span> <span class="string">&#x27;./lib/greeting&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sayHello</span>(<span class="string">&#x27;ru&#x27;</span>);</span><br></pre></td></tr></table></figure><p>Unlike CommonJS, which uses the require () method to load modules, in ES6, the import command can specify the interface exposed by the export command in the loading module (do not specify the specific interface, load the export default by default), and what is not specified will not be loaded, so the loading of the module will be completed during compile. This loading method is called <strong>compile-time loading</strong> or <strong>static loading</strong> .</p><p>CommonJS ‘require () ‘ method is only loaded at runtime.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib/greeting.js</span></span><br><span class="line"><span class="keyword">const</span> helloInLang = &#123;</span><br><span class="line">    <span class="attr">en</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">    <span class="attr">is</span>: <span class="string">&#x27;Hello world!&#x27;</span>,</span><br><span class="line">    <span class="attr">en</span>: <span class="string">&#x27;Hello world!&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> getHello = <span class="keyword">function</span> (<span class="params">lang</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> helloInLang[lang];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">getHello</span> = getHello;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">sayHello</span> = <span class="keyword">function</span> (<span class="params">lang</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getHello</span>(lang))</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hello.js</span></span><br><span class="line"><span class="keyword">const</span> sayHello = <span class="built_in">require</span>(<span class="string">&#x27;./lib/greeting&#x27;</span>).<span class="property">sayHello</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sayHello</span>(<span class="string">&#x27;ru&#x27;</span>);</span><br></pre></td></tr></table></figure><p>It can be seen that in CommonJS, the entire module is introduced as an object, and then a property on this object is obtained.</p><h2 id="Aspects-of-use"><a href="#Aspects-of-use" class="headerlink" title="Aspects of use"></a>Aspects of use</h2><h3 id="require-exports"><a href="#require-exports" class="headerlink" title="require/exports"></a>require/exports</h3><p>The usage of require/exports can only be written in the following three simple ways:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;)</span><br><span class="line">exports.fs = fs</span><br><span class="line">module.exports = fs</span><br></pre></td></tr></table></figure><p>There are various ways to write import/export:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import fs from &#x27;fs&#x27;</span><br><span class="line">import &#123;default as fs&#125; from &#x27;fs&#x27;</span><br><span class="line">import * as fs from &#x27;fs&#x27;</span><br><span class="line">import &#123;readFile&#125; from &#x27;fs&#x27;</span><br><span class="line">import &#123;readFile as read&#125; from &#x27;fs&#x27;</span><br><span class="line">import fs, &#123;readFile&#125; from &#x27;fs&#x27;</span><br><span class="line"></span><br><span class="line">export default fs</span><br><span class="line">export const fs</span><br><span class="line">export function readFile</span><br><span class="line">export &#123;readFile, read&#125;</span><br><span class="line">export * from &#x27;fs&#x27;</span><br></pre></td></tr></table></figure><h3 id="require-exports-1"><a href="#require-exports-1" class="headerlink" title="require/exports"></a>require/exports</h3><p>The form looks varied, but in essence:</p><ol><li>CommonJS or ES6 Module output can be seen as an object with multiple properties or methods;</li><li>default is a unique keyword of ES6 Module, export default fs outputs the default interface object, import fs from’fs’ can directly import this object;</li><li>The properties or methods of imported modules in ES6 Module are strongly bound, including basic types; while CommonJS is ordinary value passing or reference passing.</li></ol><p>1, 2 is relatively easy to understand, 3 need to see an example:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// counter.js</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">count</span> = <span class="number">0</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;increase count to&#x27;</span>, ++<span class="built_in">exports</span>.<span class="property">count</span>, <span class="string">&#x27;in counter.js after 500ms&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// commonjs.js</span></span><br><span class="line"><span class="keyword">const</span> &#123;count&#125; = <span class="built_in">require</span>(<span class="string">&#x27;./counter&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;read count after 1000ms in commonjs is&#x27;</span>, count)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//es6.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;count&#125; <span class="keyword">from</span> <span class="string">&#x27;./counter&#x27;</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;read count after 1000ms in es6 is&#x27;</span>, count)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure><p>Run commonjs.js and es6.js separately:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  <span class="built_in">test</span> node commonjs.js</span><br><span class="line">increase count to 1 <span class="keyword">in</span> counter.js after 500ms</span><br><span class="line"><span class="built_in">read</span> count after 1000ms <span class="keyword">in</span> commonjs is 0</span><br><span class="line">➜  <span class="built_in">test</span> babel-node es6.js</span><br><span class="line">increase count to 1 <span class="keyword">in</span> counter.js after 500ms</span><br><span class="line"><span class="built_in">read</span> count after 1000ms <span class="keyword">in</span> es6 is 1</span><br></pre></td></tr></table></figure><p>The above is just a summary of my three blogs and my own understanding. For a detailed explanation, you can see the above three blogs and realize it yourself to have a better understanding.</p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/2020/01/17/js-modules2/" title="JavaScript Modularization Syntax">https://sunra.top/en/2020/01/17/js-modules2/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/2020/01/12/webpack-code-splitting/" rel="prev" title="Webpack Code Splitting"><i class="fa fa-chevron-left"></i> Webpack Code Splitting</a></div><div class="post-nav-item"> <a href="/en/2020/01/25/http-headers-part-params/" rel="next" title="Parameter analysis and application of http protocol header">Parameter analysis and application of http protocol header<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/2020/01/17/js-modules2/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>