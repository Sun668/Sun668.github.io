<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2"><link rel="apple-touch-icon" sizes="180x180" href="/en/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/en/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/en/images/favicon-16x16-next.png"><link rel="mask-icon" href="/en/images/logo.svg" color="#222"><meta name="google-site-verification" content="7yRqtT6cCpC-_R-rzM9gUoQGmheV9OZAUKIXrbAsyqE"><link rel="stylesheet" href="/en/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"sunra.top","root":"/en/","images":"/en/images","scheme":"Muse","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/en/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/en/js/config.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623125811074939" crossorigin="anonymous"></script><script>!function(e,p,s,r){if(void 0===e.webpushr){e.webpushr=e.webpushr||function(){(e.webpushr.q=e.webpushr.q||[]).push(arguments)};var d,t=p.getElementsByTagName(s)[0];(d=p.createElement(s)).id="webpushr-jssdk",d.async=1,d.src="https://cdn.webpushr.com/app.min.js",t.parentNode.appendChild(d)}}(window,document,"script"),webpushr("setup",{key:"BEQjc-0d1Q1CubrYZ2e2XXv5Is0ZCd3CtrNLet06owkUWK68qkxHpho2mKdnj2vpGdxddRDxRYthLuMwrTqfSB4"})</script><meta name="description" content="The previous blog explored some of the concepts of Unity Shader, so go ahead and take a look at how to write a Shader."><meta property="og:type" content="article"><meta property="og:title" content="Unity Rendering Principle (5) Shader Lab"><meta property="og:url" content="https://sunra.top/en/2022/05/01/unity-render-pipeline-5/index.html"><meta property="og:site_name" content="Origin of Ray"><meta property="og:description" content="The previous blog explored some of the concepts of Unity Shader, so go ahead and take a look at how to write a Shader."><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2022-05-01T03:21:02.000Z"><meta property="article:modified_time" content="2024-02-07T08:11:31.235Z"><meta property="article:author" content="Ray Sun"><meta property="article:tag" content="Technology Sharing Using Tutorials Principles Front End Computer Graphics"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://sunra.top/en/2022/05/01/unity-render-pipeline-5/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://sunra.top/en/2022/05/01/unity-render-pipeline-5/","path":"2022/05/01/unity-render-pipeline-5/","title":"Unity Rendering Principle (5) Shader Lab"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Unity Rendering Principle (5) Shader Lab | Origin of Ray</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEJ1L66CKC"></script><script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-KEJ1L66CKC","only_pageview":false}</script><script src="/en/js/third-party/analytics/google-analytics.js"></script><script src="/en/js/third-party/analytics/baidu-analytics.js"></script><script async src="https://hm.baidu.com/hm.js?cc2e15dfd66849cf1d7843d0d532438e"></script><link rel="dns-prefetch" href="https://blog-comments-3w44.vercel.app/"><noscript><link rel="stylesheet" href="/en/css/noscript.css"></noscript><link rel="alternate" href="/en/atom.xml" title="Origin of Ray" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div></div><div class="site-meta"><a href="/en/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Origin of Ray</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">Lift the fog of the Internet together</p></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="Search" role="button"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/en/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/en/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/en/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-english"><a href="https://sunra.top/en" rel="section"><i class="fa fa-language fa-fw"></i>English</a></li><li class="menu-item menu-item-中文"><a href="https://sunra.top/" rel="section"><i class="fa fa-language fa-fw"></i>中文</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc"> Table of Contents</li><li class="sidebar-nav-overview"> Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview"><span class="nav-number">1.</span> <span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shader"><span class="nav-number">2.</span> <span class="nav-text">Shader</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Defining-Shader-Objects"><span class="nav-number">2.1.</span> <span class="nav-text">Defining Shader Objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Define-subshader-SubShader"><span class="nav-number">2.2.</span> <span class="nav-text">Define subshader (SubShader)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Sub-shader-label"><span class="nav-number">2.2.1.</span> <span class="nav-text">Sub-shader label</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sub-shader-LOD-value"><span class="nav-number">2.2.2.</span> <span class="nav-text">Sub-shader LOD value</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sub-shader-channel"><span class="nav-number">2.3.</span> <span class="nav-text">Sub-shader channel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Channel-label"><span class="nav-number">2.3.1.</span> <span class="nav-text">Channel label</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BAShader"><span class="nav-number">2.4.</span> <span class="nav-text">为Shader</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Types-of-Shader-Code-Blocks"><span class="nav-number">2.4.1.</span> <span class="nav-text">Types of Shader Code Blocks</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HLSL"><span class="nav-number">2.4.2.</span> <span class="nav-text">HLSL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PROGRAM"><span class="nav-number">2.4.3.</span> <span class="nav-text">PROGRAM</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shader-1"><span class="nav-number">2.5.</span> <span class="nav-text">Shader</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Ray Sun" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><p class="site-author-name" itemprop="name">Ray Sun</p><div class="site-description" itemprop="description">Lift the fog of the Internet together</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/en/archives/"><span class="site-state-item-count">268</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/en/categories/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">categories</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/Sun668" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sun668" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:947692259@qq.com" title="E-Mail → mailto:947692259@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i> E-Mail</a></span></div><div class="cc-license animated" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div></div></div></div><div class="wechat_channel" style="width:50%;margin-left:25%;margin-bottom:5px"><br> <img src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="wechat_channel" style="width:50%;margin-left:25%"><br> <span>一站式程序员工具平台</span> <img src="https://origin-of-ray.oss-cn-shenzhen.aliyuncs.com/rannie_share.png"></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://sunra.top/en/2022/05/01/unity-render-pipeline-5/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1592617514/avatar_rpap6c.jpg"><meta itemprop="name" content="Ray Sun"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Origin of Ray"><meta itemprop="description" content="Lift the fog of the Internet together"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Unity Rendering Principle (5) Shader Lab | Origin of Ray"><meta itemprop="description" content></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> Unity Rendering Principle (5) Shader Lab</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2022-05-01 11:21:02" itemprop="dateCreated datePublished" datetime="2022-05-01T11:21:02+08:00">2022-05-01</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">Edited on</span> <time title="Modified: 2024-02-07 16:11:31" itemprop="dateModified" datetime="2024-02-07T16:11:31+08:00">2024-02-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/en/categories/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Waline:</span><a title="waline" href="/en/2022/05/01/unity-render-pipeline-5/#waline" itemprop="discussionUrl"><span class="post-comments-count waline-comment-count" data-path="/en/2022/05/01/unity-render-pipeline-5/" itemprop="commentCount"></span></a></span></div></div></header><div class="post-body" itemprop="articleBody"><p>The previous blog explored some of the concepts of Unity Shader, so go ahead and take a look at how to write a Shader.</p><span id="more"></span><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>When writing shaders for Unity, use the following languages:</p><ul><li>A programming language called HLSL. Use it to write the shader program itself. For more information about HLSL, see HLSL in Unity.</li><li>A Unity-specific language called ShaderLab. Use it to define Shader objects, which act as containers for shader programs. See ShaderLab for more information about ShaderLab.<br>No need to use different languages for different platforms; Unity compiles HLSL and ShaderLab code into different languages for different graphics APIs</li></ul><blockquote><p>You can also use it directly if needed</p></blockquote><p>There are different ways to write shaders:</p><ul><li>The most common approach is to write vertex and slice element shaders using HLSL. For more information, see Writing Vertex and slice element shaders.</li><li>In the built-in render pipeline, you can also write surface shaders. This is a simplified way to write shaders that interact with lighting. See Surface Shaders for more information.</li><li>Unity also supports the “fixed function style” ShaderLab command for backward compatibility reasons. Therefore, you can write shaders using ShaderLab without using HLSL. This is no longer a recommended method</li></ul><h2 id="Shader"><a href="#Shader" class="headerlink" title="Shader"></a>Shader</h2><p>ShaderLab is a declarative language used in shader source files. It uses nested brace syntax to describe Shader objects.</p><p>There are many things that can be defined in ShaderLab, but the most common are:</p><ul><li>Defines the overall structure of the Shader object. See ShaderLab: Creating Shaders, ShaderLab: Creating Sub-Shaders, and ShaderLab: Creating Channels.</li><li>Use Code Block to add shader programs written in HLSL.</li><li>Use the command to set the rendering state of the GPU before executing the shader program or performing operations involving another channel.<br>Exposes properties from shader code to edit them in Material Inspector and save them as part of the Material resource.</li><li>Specifying package requirements for SubShaders and Passes. This enables Unity to run certain SubShaders and Passes only when particular packages are installed in the Unity project. See ShaderLab: specifying package requirements.</li><li>Defines fallback behavior when Unity is unable to run any SubShader with a Shader object on the current hardware.</li></ul><h3 id="Defining-Shader-Objects"><a href="#Defining-Shader-Objects" class="headerlink" title="Defining Shader Objects"></a>Defining Shader Objects</h3><p>Shader objects are a Unity-specific concept; it is a wrapper for shader programs and other information. It allows you to define multiple shader programs in the same file and tell Unity how to use them.</p><p>Shader objects have a nested structure; it organizes information into structures called SubShader and Pass.</p><p>In the Shader Code Block, you can:</p><ul><li>Use Properties Code Block to define material properties.</li><li>Use SubShader Code Block to define one or more sub-shaders.</li><li>Assign a custom editor, which determines how shader resources are displayed in the Unity editor. Alternatively, different custom editors can be assigned for different rendering pipelines.</li><li>Assign a fallback Shader object using Fallback Code Block.</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Shader &quot;Examples/ShaderSyntax&quot;</span><br><span class="line">&#123;</span><br><span class="line">    CustomEditor = &quot;ExampleCustomEditor&quot;</span><br><span class="line"></span><br><span class="line">    Properties</span><br><span class="line">    &#123;</span><br><span class="line">        //here is the material property declaration</span><br><span class="line">    &#125;</span><br><span class="line">    SubShader</span><br><span class="line">    &#123;</span><br><span class="line">        //Here is the rest of the code to define the sub-shader</span><br><span class="line"></span><br><span class="line">        Pass</span><br><span class="line">        &#123;</span><br><span class="line">           //Here is the code that defines the channel</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Fallback &quot;ExampleFallbackShader&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In ShaderLab code, material properties can be defined. Material properties are properties that Unity stores as part of a material resource. This allows artists to create, edit, and share materials with different configurations.</p><p>If using material properties:<br>You can get or set the value of a variable in a Shader object by calling a function (e.g. Material. SetFloat) on a material.</p><ul><li>Values can be viewed and edited using Material Inspector.</li><li>Unity saves changes made as part of the Material asset, so they persist between sessions.</li></ul><p>All material property declarations follow the following basic format:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[optional: attribute] name(&quot;display text in Inspector&quot;, type name) = default value</span><br></pre></td></tr></table></figure><p>The previous attribute is an attribute attribute, which can be absent or multiple at the same time.<br>Names usually start with an underscore</p><p>We can classify attributes from two perspectives:</p><ul><li>Divided by data type: there are float, Texture2D, etc.</li><li>According to the characteristics of material properties, such as’ [MainTexture] ‘,’ [MainColor] ‘, etc</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Shader &quot;Examples/MaterialPropertyShaderLab&quot;</span><br><span class="line">&#123;</span><br><span class="line">    Properties</span><br><span class="line">    &#123;</span><br><span class="line">        //Change this value in Material Inspector to affect the value of the Offset command</span><br><span class="line">        _OffsetUnitScale (&quot;Offset unit scale&quot;, Integer) = 1</span><br><span class="line">    &#125;</span><br><span class="line">    SubShader</span><br><span class="line">    &#123;</span><br><span class="line">        //Here is the code that defines the rest of SubShader</span><br><span class="line"></span><br><span class="line">        Pass</span><br><span class="line">        &#123;</span><br><span class="line">            Offset 0, [_OffsetUnitScale]</span><br><span class="line"></span><br><span class="line">           //Here is the code that defines the rest of the Pass</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In addition to defining material properties, we can also assign fallbacks and customize editors in the Shader object</p><h3 id="Define-subshader-SubShader"><a href="#Define-subshader-SubShader" class="headerlink" title="Define subshader (SubShader)"></a>Define subshader (SubShader)</h3><p>In ShaderLab, sub-shaders can be defined by placing a SubShader Code Block in a Shader Code Block.</p><p>In the SubShader Code Block, you can:</p><ul><li>Use LOD Code Block to assign LOD (level of detail) values to SubShader.</li><li>Use Tags Code Block to assign the Attribute-Value Pair of the data to the child shader.</li><li>Use the ShaderLab command to add GPU instructions or shader code to SubShader.</li><li>Use Pass Code Block to define one or more channels.</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Shader &quot;Examples/SinglePass&quot;</span><br><span class="line">&#123;</span><br><span class="line">    SubShader</span><br><span class="line">    &#123;</span><br><span class="line">        Tags &#123; &quot;ExampleSubShaderTagKey&quot; = &quot;ExampleSubShaderTagValue&quot; &#125;</span><br><span class="line">        LOD 100</span><br><span class="line"></span><br><span class="line">         //Here is the ShaderLab command applied to the entire child shader.</span><br><span class="line"></span><br><span class="line">        Pass</span><br><span class="line">        &#123;                </span><br><span class="line">              Name &quot;ExamplePassName&quot;</span><br><span class="line">              Tags &#123; &quot;ExamplePassTagKey&quot; = &quot;ExamplePassTagValue&quot; &#125;</span><br><span class="line"></span><br><span class="line">              //Here is the ShaderLab command applied to this channel.</span><br><span class="line"></span><br><span class="line">              Here is the HLSL code.</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Sub-shader-label"><a href="#Sub-shader-label" class="headerlink" title="Sub-shader label"></a>Sub-shader label</h4><p>In ShaderLab, you can assign tags to child shaders by placing a Tags Code Block in a SubShader Code Block.</p><p>Note that both sub-shaders and channels use Tags Code Block, but they work differently. Assigning sub-shader tags to channels has no effect, and vice versa. The difference lies in where you place the Tags Code Block:</p><ul><li>To define channel labels, place the Tags Code Block inside the Pass Code Block.</li><li>To define a subshader tag, place the Tags Code Block inside the SubShader Code Block, but outside the Pass Code Block.</li></ul><p>Subshader tags can be read from a C # script using the Material. GetTag API as follows:</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Example</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//attach this to a game object with a renderer component</span></span><br><span class="line">    <span class="built_in">string</span> tagName = <span class="string">&quot;ExampleTagName&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Renderer myRenderer = GetComponent&lt;Renderer&gt;();</span><br><span class="line">        <span class="built_in">string</span> tagValue = myRenderer.material.GetTag(ExampleTagName, <span class="literal">true</span>, <span class="string">&quot;Tag not found&quot;</span>);</span><br><span class="line">        Debug.Log(tagValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>There are many sub-shader tags:<br>The RenderPipeline tag tells Unity if the subshader is compatible with the universal rendering pipeline (URP) or high definition rendering pipeline (HDRP).</p><ul><li>The Queue tag tells Unity the render queue to use for the geometry it renders. The render queue is one of the factors that determines the order in which Unity renders geometry.</li><li>Use the RenderType tag to override the behavior of Shader objects.</li><li>ForceNoShadowCasting tag prevents geometry in sub-shaders from casting (and sometimes receiving) shadows. The exact behavior depends on the render pipeline and render path.</li><li>DisableBatching sub-shader tag prevents Unity from applying dynamic batching to geometry using this sub-shader.</li><li>In the built-in render pipeline, the IgnoreProjector sub-shader tag informs Unity if the geometry is affected by the projector. This is useful for excluding most translucent geometry that is incompatible with the projector.</li><li>The PreviewType Sub-Shader Tag tells the Unity editor how to display materials using this sub-shader in the Material Inspector.</li><li>Using this subshader tag in projects using Legacy Sprite Packer warns the user that shaders depend on raw texture coordinates and therefore should not be packaged into atlases.</li></ul><h4 id="Sub-shader-LOD-value"><a href="#Sub-shader-LOD-value" class="headerlink" title="Sub-shader LOD value"></a>Sub-shader LOD value</h4><p>You can assign an LOD value to a child shader. This value indicates its computational requirements.</p><p>At runtime, you can set the value of the shader LOD for a single Shader object or for all Shader objects. Unity then prioritizes sub-shaders with lower LOD values. Information on how Unity chooses when to use sub-shaders</p><h3 id="Sub-shader-channel"><a href="#Sub-shader-channel" class="headerlink" title="Sub-shader channel"></a>Sub-shader channel</h3><p>The channel is the basic element of the Shader object. It contains instructions to set the state of the GPU, as well as a shader program to run on the GPU.</p><p>Simple Shader objects may contain only one channel, but more complex shaders can contain multiple channels. You can define separate channels for different parts of the Shader object to achieve different ways of working; for example, parts that need to change rendering state, different shader programs, or different LightMode tags.</p><p>To define a regular channel in ShaderLab, you need to place a Pass Code Block in a SubShader Code Block.</p><p>In the Pass Code Block, you can:</p><ul><li>Use the Name Code Block to specify a name for the channel.</li><li>Use Tags Code Block to assign the Attribute-Value Pair of the data to the channel.</li><li>Use ShaderLab commands to perform operations.</li><li>Add shader code to the channel using Shader Code Block.</li></ul><h4 id="Channel-label"><a href="#Channel-label" class="headerlink" title="Channel label"></a>Channel label</h4><p>Each channel can have its own label, we list a few built-in labels: such as LightMode, PassFlags, RequireOptions, etc., you can see: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.unity3d.com/cn/current/Manual/shader-predefined-pass-tags-built-in.html">https://docs.unity3d.com/cn/current/Manual/shader-predefined-pass-tags-built-in.html</a></p><h3 id="为Shader"><a href="#为Shader" class="headerlink" title="为Shader"></a>为Shader</h3><p>In Unity, you usually use HLSL to write shader programs. To add HLSL code to your shader resources, you should place the code in a Shader Code Block.</p><p>This page contains information about using the Shader Code Block. Information about writing HLSL itself.</p><p>Note: Unity also supports writing shader programs in other languages, but this is usually not required or recommended.</p><h4 id="Types-of-Shader-Code-Blocks"><a href="#Types-of-Shader-Code-Blocks" class="headerlink" title="Types of Shader Code Blocks"></a>Types of Shader Code Blocks</h4><p>To add HLSL code, you can use the following type of shader Code Block:</p><p>HLSLPROGRAM<br>CGPROGRAM<br>HLSLINCLUDE<br>CGINCLUDE<br>To understand when to use which, you must understand their prefixes (HLSL or CG) and suffixes (PROGRAM or INCLUDE).</p><h4 id="HLSL"><a href="#HLSL" class="headerlink" title="HLSL"></a>HLSL</h4><p>The difference between blocks prefixed with HLSL or CG is:</p><p>The shader Code Block prefixed with CG is older. By default, they contain several of Unity’s built-in shader include files, which is handy if you need this feature. The built-in include files are only compatible with the built-in render pipeline.<br>Shader Code Blocks prefixed with HLSL are newer. By default, they do not contain Unity’s built-in shader include files, so you must manually include any library code you want to use. They are suitable for any rendering pipeline.<br>For information about Unity’s built-in shader include files, see Built-in shader include files.</p><h4 id="PROGRAM"><a href="#PROGRAM" class="headerlink" title="PROGRAM"></a>PROGRAM</h4><p>The difference between blocks suffixed with PROGRAM or INCLUDE is:</p><p>Shader Code Blocks suffixed with PROGRAM are called shader blocks. You can use them to write shader programs. You write HLSL shader code in these blocks and then put them in a Pass block in your ShaderLab code.<br>Shader Code Blocks that are suffixed with INCLUDE are called shader include blocks. You can use them to share common code between shader blocks in the same source file. You write HLSL shader code to share in these blocks, and then place them in a Pass, SubShader, or Shader block in your ShaderLab code. It works in a similar way to using include in HLSL code.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Shader &quot;Examples/ExampleShader&quot;</span><br><span class="line">&#123;</span><br><span class="line">    SubShader</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        HLSLINCLUDE</span><br><span class="line">            //Write the HLSL code to be shared here</span><br><span class="line">        ENDHLSL</span><br><span class="line"></span><br><span class="line">        Pass</span><br><span class="line">        &#123;                </span><br><span class="line">              Name &quot;ExampleFirstPassName&quot;</span><br><span class="line">              Tags &#123; &quot;LightMode&quot; = &quot;ExampleLightModeTagValue&quot; &#125;</span><br><span class="line"></span><br><span class="line">              //Write the ShaderLab command to set the render state here</span><br><span class="line"></span><br><span class="line">              HLSLPROGRAM</span><br><span class="line">                //This HLSL shader program automatically contains the contents of the HLSLINCLUDE block above</span><br><span class="line">                //Write HLSL shader code here</span><br><span class="line">              ENDHLSL</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Pass</span><br><span class="line">        &#123;                </span><br><span class="line">              Name &quot;ExampleSecondPassName&quot;</span><br><span class="line">              Tags &#123; &quot;LightMode&quot; = &quot;ExampleLightModeTagValue&quot; &#125;</span><br><span class="line"></span><br><span class="line">              //Write the ShaderLab command to set the render state here</span><br><span class="line"></span><br><span class="line">              HLSLPROGRAM</span><br><span class="line">                //This HLSL shader program automatically contains the contents of the HLSLINCLUDE block above</span><br><span class="line">                //Write HLSL shader code here</span><br><span class="line">              ENDHLSL</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Shader-1"><a href="#Shader-1" class="headerlink" title="Shader"></a>Shader</h3><p>ShaderLab commands fall into the following categories:</p><ul><li>Command for setting rendering state on GPU.</li><li>Used to create channels with specific purposes.</li><li>If you use the old “fixed function style” command, you can create a shader program without writing HLSL.</li></ul><p>Command for setting rendering status<br>Use these commands in a Pass Code Block to set the render state for the Pass, or in a SubShader Code Block to set the render state for the SubShader and all passes in it.</p><ul><li>AlphaToMask: Set alpha-to-coverage mode.</li><li>Blend: enable and configure alpha blending.</li><li>BlendOp: Set the operation used by the Blend command.</li><li>ColorMask: Set the color channel write mask.</li><li>Conservative: Enable and disable conservative grating.</li><li>Cull: Set polygon culling mode.</li><li>Offset: Set polygon depth offset.</li><li>Stencil: Configure template tests and what to write to template buffers.</li><li>ZClip: Set deep clip mode.</li><li>ZTest: Set deep test mode.</li><li>ZWrite: Sets deep buffer write mode.</li></ul><p>Channel command<br>Use these commands in SubShader to define channels with specific purposes.</p><p>UsePass defines a channel that imports the contents of a specified channel from another Shader object.<br>GrabPass creates a channel that grabs the screen content into a texture for later use in the channel. -</p></div><footer class="post-footer"><div class="post-copyright"><ul><li class="post-copyright-author"> <strong>Post author:</strong> Ray Sun</li><li class="post-copyright-link"> <strong>Post link:</strong> <a href="https://sunra.top/en/2022/05/01/unity-render-pipeline-5/" title="Unity Rendering Principle (5) Shader Lab">https://sunra.top/en/2022/05/01/unity-render-pipeline-5/</a></li><li class="post-copyright-license"> <strong>Copyright Notice:</strong> All articles in this blog are licensed under<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> unless stating additionally.</li></ul></div><div class="followme"> <span>Welcome to my other publishing channels</span><div class="social-list"><div class="social-item"><span class="social-link"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></span> <img class="social-item-img" src="https://res.cloudinary.com/dvtfhjxi4/image/upload/v1685836114/origin-of-ray/wechat_channel_zmg0hw.jpg"></div><div class="social-item"><a target="_blank" class="social-link" href="/en/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><div class="post-nav"><div class="post-nav-item"><a href="/en/2022/04/22/unity-render-pipeline-4/" rel="prev" title="Unity Rendering Principle (4) Unity Shader Basic Concepts"><i class="fa fa-chevron-left"></i> Unity Rendering Principle (4) Unity Shader Basic Concepts</a></div><div class="post-nav-item"> <a href="/en/2022/05/03/unity-render-pipeline-6/" rel="next" title="Unity Rendering Principles (6) Unity HLSL">Unity Rendering Principles (6) Unity HLSL<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; <span itemprop="copyrightYear">2024</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Ray Sun</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="external nofollow noopener noreferrer" target="_blank">NexT.Muse</a></div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span><span class="toggle-line"></span><span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="/en/js/comments.js"></script><script src="/en/js/utils.js"></script><script src="/en/js/motion.js"></script><script src="/en/js/schemes/muse.js"></script><script src="/en/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script><script src="/en/js/third-party/search/local-search.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script><script src="/en/js/third-party/math/mathjax.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"https://blog-comments-3w44.vercel.app/","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"placeholder":"欢迎大家交流学习","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":true,"comment_count":true,"requiredFields":[],"libUrl":"//unpkg.com/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/en/2022/05/01/unity-render-pipeline-5/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script></body></html>